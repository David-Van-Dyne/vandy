"use strict";var Zc=Object.create;var zt=Object.defineProperty;var el=Object.getOwnPropertyDescriptor;var tl=Object.getOwnPropertyNames;var rl=Object.getPrototypeOf,sl=Object.prototype.hasOwnProperty;var f=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),nl=(s,e)=>{for(var t in e)zt(s,t,{get:e[t],enumerable:!0})},Xn=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of tl(e))!sl.call(s,n)&&n!==t&&zt(s,n,{get:()=>e[n],enumerable:!(r=el(e,n))||r.enumerable});return s};var Ee=(s,e,t)=>(t=s!=null?Zc(rl(s)):{},Xn(e||!s||!s.__esModule?zt(t,"default",{value:s,enumerable:!0}):t,s)),il=s=>Xn(zt({},"__esModule",{value:!0}),s);var Yt=f(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.Event=Re.Response=Re.Message=void 0;var vt=class{constructor(e){this.seq=0,this.type=e}};Re.Message=vt;var as=class extends vt{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};Re.Response=as;var us=class extends vt{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}};Re.Event=us});var zn=f(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.ProtocolServer=void 0;var ol=require("events"),_t=Yt(),cs=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let r;return r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},Pe=class extends ol.EventEmitter{constructor(){super(),this._sendMessage=new cs,this._sequence=1,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",r=>this._handleData(r)),e.on("close",()=>{this._emitEvent(new _t.Event("close"))}),e.on("error",r=>{this._emitEvent(new _t.Event("error","inStream error: "+(r&&r.message)))}),t.on("error",r=>{this._emitEvent(new _t.Event("error","outStream error: "+(r&&r.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,n){let i={command:e};if(t&&Object.keys(t).length>0&&(i.arguments=t),this._send("request",i),n){this._pendingRequests.set(i.seq,n);let o=setTimeout(()=>{clearTimeout(o);let c=this._pendingRequests.get(i.seq);c&&(this._pendingRequests.delete(i.seq),c(new _t.Response(i,"timeout")))},r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let r=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}\r
\r
${r}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let r=JSON.parse(t);this.handleMessage(r)}catch(r){this._emitEvent(new _t.Event("error","Error handling data: "+(r&&r.message)))}continue}}else{let t=this._rawData.indexOf(Pe.TWO_CRLF);if(t!==-1){let n=this._rawData.toString("utf8",0,t).split(`\r
`);for(let i=0;i<n.length;i++){let o=n[i].split(/: +/);o[0]=="Content-Length"&&(this._contentLength=+o[1])}this._rawData=this._rawData.slice(t+Pe.TWO_CRLF.length);continue}}break}}};Wt.ProtocolServer=Pe;Pe.TWO_CRLF=`\r
\r
`});var Yn=f(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.runDebugAdapter=void 0;var al=require("net");function ul(s){let e=0;if(process.argv.slice(2).forEach(function(r,n,i){let o=/^--server=(\d{4,5})$/.exec(r);o&&(e=parseInt(o[1],10))}),e>0)console.error(`waiting for debug protocol on port ${e}`),al.createServer(r=>{console.error(">> accepted connection from client"),r.on("end",()=>{console.error(`>> client connection closed
`)});let n=new s(!1,!0);n.setRunAsServer(!0),n.start(r,r)}).listen(e);else{let r=new s(!1);process.on("SIGTERM",()=>{r.shutdown()}),r.start(process.stdin,process.stdout)}}Jt.runDebugAdapter=ul});var Kt=f(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.DebugSession=A.ErrorDestination=A.MemoryEvent=A.InvalidatedEvent=A.ProgressEndEvent=A.ProgressUpdateEvent=A.ProgressStartEvent=A.CapabilitiesEvent=A.LoadedSourceEvent=A.ModuleEvent=A.BreakpointEvent=A.ThreadEvent=A.OutputEvent=A.ExitedEvent=A.TerminatedEvent=A.InitializedEvent=A.ContinuedEvent=A.StoppedEvent=A.CompletionItem=A.Module=A.Breakpoint=A.Variable=A.Thread=A.StackFrame=A.Scope=A.Source=void 0;var cl=zn(),ee=Yt(),ll=Yn(),Wn=require("url"),ls=class{constructor(e,t,r=0,n,i){this.name=e,this.path=t,this.sourceReference=r,n&&(this.origin=n),i&&(this.adapterData=i)}};A.Source=ls;var ps=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};A.Scope=ps;var hs=class{constructor(e,t,r,n=0,i=0){this.id=e,this.source=r,this.line=n,this.column=i,this.name=t}};A.StackFrame=hs;var fs=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};A.Thread=fs;var ds=class{constructor(e,t,r=0,n,i){this.name=e,this.value=t,this.variablesReference=r,typeof i=="number"&&(this.namedVariables=i),typeof n=="number"&&(this.indexedVariables=n)}};A.Variable=ds;var gs=class{constructor(e,t,r,n){this.verified=e;let i=this;typeof t=="number"&&(i.line=t),typeof r=="number"&&(i.column=r),n&&(i.source=n)}setId(e){this.id=e}};A.Breakpoint=gs;var ms=class{constructor(e,t){this.id=e,this.name=t}};A.Module=ms;var bs=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};A.CompletionItem=bs;var Es=class extends ee.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof r=="string"&&(this.body.text=r)}};A.StoppedEvent=Es;var vs=class extends ee.Event{constructor(e,t){super("continued"),this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};A.ContinuedEvent=vs;var _s=class extends ee.Event{constructor(){super("initialized")}};A.InitializedEvent=_s;var ys=class extends ee.Event{constructor(e){if(super("terminated"),typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};A.TerminatedEvent=ys;var Ss=class extends ee.Event{constructor(e){super("exited"),this.body={exitCode:e}}};A.ExitedEvent=Ss;var Rs=class extends ee.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},r!==void 0&&(this.body.data=r)}};A.OutputEvent=Rs;var xs=class extends ee.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};A.ThreadEvent=xs;var Ls=class extends ee.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};A.BreakpointEvent=Ls;var Ts=class extends ee.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}};A.ModuleEvent=Ts;var Os=class extends ee.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}};A.LoadedSourceEvent=Os;var Cs=class extends ee.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}};A.CapabilitiesEvent=Cs;var As=class extends ee.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},typeof r=="string"&&(this.body.message=r)}};A.ProgressStartEvent=As;var Is=class extends ee.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};A.ProgressUpdateEvent=Is;var Ps=class extends ee.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};A.ProgressEndEvent=Ps;var ws=class extends ee.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}};A.InvalidatedEvent=ws;var Ns=class extends ee.Event{constructor(e,t,r){super("memory"),this.body={memoryReference:e,offset:t,count:r}}};A.MemoryEvent=Ns;var we;(function(s){s[s.User=1]="User",s[s.Telemetry=2]="Telemetry"})(we=A.ErrorDestination||(A.ErrorDestination={}));var ge=class extends cl.ProtocolServer{constructor(e,t){super();let r=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",n=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,ll.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,r,n,i=we.User){let o;typeof t=="number"?(o={id:t,format:r},n&&(o.variables=n),i&we.User&&(o.showUser=!0),i&we.Telemetry&&(o.sendTelemetry=!0)):o=t,e.success=!1,e.message=ge.formatPII(o.format,!0,o.variables),e.body||(e.body={}),e.body.error=o,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){let t=new ee.Response(e);try{if(e.command==="initialize"){var r=e.arguments;if(typeof r.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=r.linesStartAt1),typeof r.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=r.columnsStartAt1),r.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,we.Telemetry);else{let n=t;n.body={},this.initializeRequest(n,r)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(n){this.sendErrorResponse(t,1104,"{_stack}",{_exception:n.message,_stack:n.stack},we.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,n){this.sendErrorResponse(t,1014,"unrecognized request",null,we.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?ge.uri2path(e):ge.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?ge.uri2path(e):ge.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new Wn.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new Wn.URL(e),r=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(ge._formatPIIRegexp,function(n,i){return t&&i.length>0&&i[0]!=="_"?n:r[i]&&r.hasOwnProperty(i)?r[i]:n})}};A.DebugSession=ge;ge._formatPIIRegexp=/{([^}]+)}/g});var Zn=f(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.InternalLogger=void 0;var Jn=require("fs"),Kn=require("path"),ue=er(),Ds=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=ue.LogLevel.Warn,this.disposeCallback=(r,n)=>{this.dispose(),n=n||2,n+=128,process.exit(n)}}async setup(e){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(!Kn.isAbsolute(e.logFilePath))this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,ue.LogLevel.Error);else{let t=r=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${r.toString()}
`,ue.LogLevel.Error);try{await Jn.promises.mkdir(Kn.dirname(e.logFilePath),{recursive:!0}),this.log(`Verbose logs are written to:
`,ue.LogLevel.Warn),this.log(e.logFilePath+`
`,ue.LogLevel.Warn),this._logFileStream=Jn.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",r=>{t(r)})}catch(r){t(r)}}}logDateTime(){let e=new Date,r=e.getUTCFullYear()+`-${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+Qn();this.log(r+`
`,ue.LogLevel.Verbose,!1)}setupShutdownListeners(){process.on("beforeExit",this.beforeExitCallback),process.on("SIGTERM",this.disposeCallback),process.on("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,r=!0){if(this._minLogLevel!==ue.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let n=t===ue.LogLevel.Error?console.error:t===ue.LogLevel.Warn?console.warn:null;n&&n((0,ue.trimLastNewline)(e))}t===ue.LogLevel.Error&&(e=`[${ue.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+Qn()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let r=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",r&&(e=e+`
`)}if(this._logCallback){let r=new ue.LogOutputEvent(e,t);this._logCallback(r)}}};Zt.InternalLogger=Ds;function Qn(){let s=new Date,e=Qt(2,String(s.getUTCHours())),t=Qt(2,String(s.getUTCMinutes())),r=Qt(2,String(s.getUTCSeconds())),n=Qt(3,String(s.getUTCMilliseconds()));return e+":"+t+":"+r+"."+n+" UTC"}function Qt(s,e){return e.length>=s?e:String("0".repeat(s)+e).slice(-s)}});var er=f(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.trimLastNewline=ce.LogOutputEvent=ce.logger=ce.Logger=ce.LogLevel=void 0;var pl=Zn(),hl=Kt(),xe;(function(s){s[s.Verbose=0]="Verbose",s[s.Log=1]="Log",s[s.Warn=2]="Warn",s[s.Error=3]="Error",s[s.Stop=4]="Stop"})(xe=ce.LogLevel||(ce.LogLevel={}));var tr=class{constructor(){this._pendingLogQ=[]}log(e,t=xe.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,xe.Verbose)}warn(e){this.log(e,xe.Warn)}error(e){this.log(e,xe.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=xe.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){let n=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let i={consoleMinLogLevel:e,logFilePath:n,prependTimestamp:r};this._currentLogger.setup(i).then(()=>{if(this._pendingLogQ){let o=this._pendingLogQ;this._pendingLogQ=null,o.forEach(c=>this._write(c.msg,c.level))}})}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new pl.InternalLogger(e,r),this._logFilePathFromInit=t}};ce.Logger=tr;ce.logger=new tr;var Fs=class extends hl.OutputEvent{constructor(e,t){let r=t===xe.Error?"stderr":t===xe.Warn?"console":"stdout";super(e,r)}};ce.LogOutputEvent=Fs;function fl(s){return s.replace(/(\n|\r\n)$/,"")}ce.trimLastNewline=fl});var ri=f(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.LoggingDebugSession=void 0;var ti=er(),Ge=ti.logger,ei=Kt(),qs=class extends ei.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",n=>{Ge.error(n.body)})}start(e,t){super.start(e,t),Ge.init(r=>this.sendEvent(r),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof ti.LogOutputEvent)){let t=e;e instanceof ei.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),Ge.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,n){Ge.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,n)}sendResponse(e){Ge.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){Ge.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};rr.LoggingDebugSession=qs});var si=f(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.Handles=void 0;var Ms=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};sr.Handles=Ms});var yt=f(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.Handles=L.Response=L.Event=L.ErrorDestination=L.CompletionItem=L.Module=L.Source=L.Breakpoint=L.Variable=L.Scope=L.StackFrame=L.Thread=L.MemoryEvent=L.InvalidatedEvent=L.ProgressEndEvent=L.ProgressUpdateEvent=L.ProgressStartEvent=L.CapabilitiesEvent=L.LoadedSourceEvent=L.ModuleEvent=L.BreakpointEvent=L.ThreadEvent=L.OutputEvent=L.ContinuedEvent=L.StoppedEvent=L.ExitedEvent=L.TerminatedEvent=L.InitializedEvent=L.logger=L.Logger=L.LoggingDebugSession=L.DebugSession=void 0;var H=Kt();Object.defineProperty(L,"DebugSession",{enumerable:!0,get:function(){return H.DebugSession}});Object.defineProperty(L,"InitializedEvent",{enumerable:!0,get:function(){return H.InitializedEvent}});Object.defineProperty(L,"TerminatedEvent",{enumerable:!0,get:function(){return H.TerminatedEvent}});Object.defineProperty(L,"ExitedEvent",{enumerable:!0,get:function(){return H.ExitedEvent}});Object.defineProperty(L,"StoppedEvent",{enumerable:!0,get:function(){return H.StoppedEvent}});Object.defineProperty(L,"ContinuedEvent",{enumerable:!0,get:function(){return H.ContinuedEvent}});Object.defineProperty(L,"OutputEvent",{enumerable:!0,get:function(){return H.OutputEvent}});Object.defineProperty(L,"ThreadEvent",{enumerable:!0,get:function(){return H.ThreadEvent}});Object.defineProperty(L,"BreakpointEvent",{enumerable:!0,get:function(){return H.BreakpointEvent}});Object.defineProperty(L,"ModuleEvent",{enumerable:!0,get:function(){return H.ModuleEvent}});Object.defineProperty(L,"LoadedSourceEvent",{enumerable:!0,get:function(){return H.LoadedSourceEvent}});Object.defineProperty(L,"CapabilitiesEvent",{enumerable:!0,get:function(){return H.CapabilitiesEvent}});Object.defineProperty(L,"ProgressStartEvent",{enumerable:!0,get:function(){return H.ProgressStartEvent}});Object.defineProperty(L,"ProgressUpdateEvent",{enumerable:!0,get:function(){return H.ProgressUpdateEvent}});Object.defineProperty(L,"ProgressEndEvent",{enumerable:!0,get:function(){return H.ProgressEndEvent}});Object.defineProperty(L,"InvalidatedEvent",{enumerable:!0,get:function(){return H.InvalidatedEvent}});Object.defineProperty(L,"MemoryEvent",{enumerable:!0,get:function(){return H.MemoryEvent}});Object.defineProperty(L,"Thread",{enumerable:!0,get:function(){return H.Thread}});Object.defineProperty(L,"StackFrame",{enumerable:!0,get:function(){return H.StackFrame}});Object.defineProperty(L,"Scope",{enumerable:!0,get:function(){return H.Scope}});Object.defineProperty(L,"Variable",{enumerable:!0,get:function(){return H.Variable}});Object.defineProperty(L,"Breakpoint",{enumerable:!0,get:function(){return H.Breakpoint}});Object.defineProperty(L,"Source",{enumerable:!0,get:function(){return H.Source}});Object.defineProperty(L,"Module",{enumerable:!0,get:function(){return H.Module}});Object.defineProperty(L,"CompletionItem",{enumerable:!0,get:function(){return H.CompletionItem}});Object.defineProperty(L,"ErrorDestination",{enumerable:!0,get:function(){return H.ErrorDestination}});var dl=ri();Object.defineProperty(L,"LoggingDebugSession",{enumerable:!0,get:function(){return dl.LoggingDebugSession}});var ni=er();L.Logger=ni;var ii=Yt();Object.defineProperty(L,"Event",{enumerable:!0,get:function(){return ii.Event}});Object.defineProperty(L,"Response",{enumerable:!0,get:function(){return ii.Response}});var gl=si();Object.defineProperty(L,"Handles",{enumerable:!0,get:function(){return gl.Handles}});var ml=ni.logger;L.logger=ml});var Rt=f(Ci=>{"use strict";var bl=typeof window<"u"&&window,El=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,vl=typeof global<"u"&&global,Oi=bl||vl||El;Ci.root=Oi;(function(){if(!Oi)throw new Error("RxJS could not find any global context (window, self, global)")})()});var pr=f(Ai=>{"use strict";function _l(s){return typeof s=="function"}Ai.isFunction=_l});var Us=f(Ii=>{"use strict";Ii.isArray=Array.isArray||function(s){return s&&typeof s.length=="number"}});var wi=f(Pi=>{"use strict";function yl(s){return s!=null&&typeof s=="object"}Pi.isObject=yl});var hr=f(Ni=>{"use strict";Ni.errorObject={e:{}}});var Hs=f(qi=>{"use strict";var Di=hr(),Fi;function Sl(){try{return Fi.apply(this,arguments)}catch(s){return Di.errorObject.e=s,Di.errorObject}}function Rl(s){return Fi=s,Sl}qi.tryCatch=Rl});var Mi=f(fr=>{"use strict";var xl=fr&&fr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Ll=function(s){xl(e,s);function e(t){s.call(this),this.errors=t;var r=Error.call(this,t?t.length+` errors occurred during unsubscription:
  `+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return e}(Error);fr.UnsubscriptionError=Ll});var gr=f(ji=>{"use strict";var Tl=Us(),Ol=wi(),Cl=pr(),Vi=Hs(),Je=hr(),dr=Mi(),Al=function(){function s(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return s.prototype.unsubscribe=function(){var e=!1,t;if(!this.closed){var r=this,n=r._parent,i=r._parents,o=r._unsubscribe,c=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,u=i?i.length:0;n;)n.remove(this),n=++a<u&&i[a]||null;if(Cl.isFunction(o)){var l=Vi.tryCatch(o).call(this);l===Je.errorObject&&(e=!0,t=t||(Je.errorObject.e instanceof dr.UnsubscriptionError?$i(Je.errorObject.e.errors):[Je.errorObject.e]))}if(Tl.isArray(c))for(a=-1,u=c.length;++a<u;){var p=c[a];if(Ol.isObject(p)){var l=Vi.tryCatch(p.unsubscribe).call(p);if(l===Je.errorObject){e=!0,t=t||[];var h=Je.errorObject.e;h instanceof dr.UnsubscriptionError?t=t.concat($i(h.errors)):t.push(h)}}}if(e)throw new dr.UnsubscriptionError(t)}},s.prototype.add=function(e){if(!e||e===s.EMPTY)return s.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new s(e);case"object":if(t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(typeof t._addParent!="function"){var r=t;t=new s,t._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var n=this._subscriptions||(this._subscriptions=[]);return n.push(t),t._addParent(this),t},s.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);r!==-1&&t.splice(r,1)}},s.prototype._addParent=function(e){var t=this,r=t._parent,n=t._parents;!r||r===e?this._parent=e:n?n.indexOf(e)===-1&&n.push(e):this._parents=[e]},s.EMPTY=function(e){return e.closed=!0,e}(new s),s}();ji.Subscription=Al;function $i(s){return s.reduce(function(e,t){return e.concat(t instanceof dr.UnsubscriptionError?t.errors:t)},[])}});var Bs=f(ki=>{"use strict";ki.empty={closed:!0,next:function(s){},error:function(s){throw s},complete:function(){}}});var Xs=f(mr=>{"use strict";var Il=Rt(),Gs=Il.root.Symbol;mr.rxSubscriber=typeof Gs=="function"&&typeof Gs.for=="function"?Gs.for("rxSubscriber"):"@@rxSubscriber";mr.$$rxSubscriber=mr.rxSubscriber});var Gi=f(br=>{"use strict";var Bi=br&&br.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Ui=pr(),Pl=gr(),zs=Bs(),Ys=Xs(),Ws=function(s){Bi(e,s);function e(t,r,n){switch(s.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=zs.empty;break;case 1:if(!t){this.destination=zs.empty;break}if(typeof t=="object"){if(wl(t)){var i=t[Ys.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new Hi(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new Hi(this,t,r,n);break}}return e.prototype[Ys.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,s.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,r=t._parent,n=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=r,this._parents=n,this},e}(Pl.Subscription);br.Subscriber=Ws;var Hi=function(s){Bi(e,s);function e(t,r,n,i){s.call(this),this._parentSubscriber=t;var o,c=this;Ui.isFunction(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==zs.empty&&(c=Object.create(r),Ui.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=o,this._error=n,this._complete=i}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber;if(this._error)r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)r.syncErrorValue=t,r.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),t}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};r.syncErrorThrowable?(this.__tryOrSetError(r,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(n){throw this.unsubscribe(),n}},e.prototype.__tryOrSetError=function(t,r,n){try{r.call(this._context,n)}catch(i){return t.syncErrorValue=i,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Ws);function wl(s){return s instanceof Ws||"syncErrorThrowable"in s&&s[Ys.rxSubscriber]}});var Yi=f(zi=>{"use strict";var Js=Gi(),Xi=Xs(),Nl=Bs();function Dl(s,e,t){if(s){if(s instanceof Js.Subscriber)return s;if(s[Xi.rxSubscriber])return s[Xi.rxSubscriber]()}return!s&&!e&&!t?new Js.Subscriber(Nl.empty):new Js.Subscriber(s,e,t)}zi.toSubscriber=Dl});var Ji=f(xt=>{"use strict";var Fl=Rt();function Wi(s){var e,t=s.Symbol;return typeof t=="function"?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}xt.getSymbolObservable=Wi;xt.observable=Wi(Fl.root);xt.$$observable=xt.observable});var Qi=f(Ki=>{"use strict";function ql(){}Ki.noop=ql});var eo=f(Ks=>{"use strict";var Ml=Qi();function Vl(){for(var s=[],e=0;e<arguments.length;e++)s[e-0]=arguments[e];return Zi(s)}Ks.pipe=Vl;function Zi(s){return s?s.length===1?s[0]:function(t){return s.reduce(function(r,n){return n(r)},t)}:Ml.noop}Ks.pipeFromArray=Zi});var Ke=f(to=>{"use strict";var he=Rt(),$l=Yi(),jl=Ji(),kl=eo(),Ul=function(){function s(e){this._isScalar=!1,e&&(this._subscribe=e)}return s.prototype.lift=function(e){var t=new s;return t.source=this,t.operator=e,t},s.prototype.subscribe=function(e,t,r){var n=this.operator,i=$l.toSubscriber(e,t,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},s.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},s.prototype.forEach=function(e,t){var r=this;if(t||(he.root.Rx&&he.root.Rx.config&&he.root.Rx.config.Promise?t=he.root.Rx.config.Promise:he.root.Promise&&(t=he.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(n,i){var o;o=r.subscribe(function(c){if(o)try{e(c)}catch(a){i(a),o.unsubscribe()}else e(c)},i,n)})},s.prototype._subscribe=function(e){return this.source.subscribe(e)},s.prototype[jl.observable]=function(){return this},s.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.length===0?this:kl.pipeFromArray(e)(this)},s.prototype.toPromise=function(e){var t=this;if(e||(he.root.Rx&&he.root.Rx.config&&he.root.Rx.config.Promise?e=he.root.Rx.config.Promise:he.root.Promise&&(e=he.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(r,n){var i;t.subscribe(function(o){return i=o},function(o){return n(o)},function(){return r(i)})})},s.create=function(e){return new s(e)},s}();to.Observable=Ul});var ao=f((vm,oo)=>{"use strict";var io=require("child_process"),ro=io.spawn,Hl=io.exec;oo.exports=function(s,e,t){if(typeof e=="function"&&t===void 0&&(t=e,e=void 0),s=parseInt(s),Number.isNaN(s)){if(t)return t(new Error("pid must be a number"));throw new Error("pid must be a number")}var r={},n={};switch(r[s]=[],n[s]=1,process.platform){case"win32":Hl("taskkill /pid "+s+" /T /F",t);break;case"darwin":Qs(s,r,n,function(i){return ro("pgrep",["-P",i])},function(){so(r,e,t)});break;default:Qs(s,r,n,function(i){return ro("ps",["-o","pid","--no-headers","--ppid",i])},function(){so(r,e,t)});break}};function so(s,e,t){var r={};try{Object.keys(s).forEach(function(n){s[n].forEach(function(i){r[i]||(no(i,e),r[i]=1)}),r[n]||(no(n,e),r[n]=1)})}catch(n){if(t)return t(n);throw n}if(t)return t()}function no(s,e){try{process.kill(parseInt(s,10),e)}catch(t){if(t.code!=="ESRCH")throw t}}function Qs(s,e,t,r,n){var i=r(s),o="";i.stdout.on("data",function(u){var u=u.toString("ascii");o+=u});var c=function(a){if(delete t[s],a!=0){Object.keys(t).length==0&&n();return}o.match(/\d+/g).forEach(function(u){u=parseInt(u,10),e[s].push(u),e[u]=[],t[u]=1,Qs(u,e,t,r,n)})};i.on("close",c)}});var en=f(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.CliCommandExecution=J.KILL_CODE=J.CANCELLATION_INTERVAL=J.NO_STDERR_ERROR=J.NO_STDOUT_ERROR=J.NO_PID_ERROR=void 0;var Lt=Ke(),Bl=ao();J.NO_PID_ERROR="No process associated with sfdx command.";J.NO_STDOUT_ERROR="No stdout found for childProcess";J.NO_STDERR_ERROR="No stderr found for childProcess";J.CANCELLATION_INTERVAL=1e3;J.KILL_CODE="SIGKILL";var Zs=class{constructor(e,t,r){if(this.command=e,this.cancellationToken=r,!t.pid)throw new Error(J.NO_PID_ERROR);this.childProcessPid=t.pid;let n;if(this.processExitSubject=Lt.Observable.fromEvent(t,"exit"),this.processExitSubject.subscribe(()=>{n&&n.unsubscribe()}),this.processErrorSubject=Lt.Observable.fromEvent(t,"error"),this.processErrorSubject.subscribe(()=>{n&&n.unsubscribe()}),!t.stdout)throw new Error(J.NO_STDOUT_ERROR);if(this.stdoutSubject=Lt.Observable.fromEvent(t.stdout,"data"),!t.stderr)throw new Error(J.NO_STDERR_ERROR);this.stderrSubject=Lt.Observable.fromEvent(t.stderr,"data"),r&&(n=Lt.Observable.interval(J.CANCELLATION_INTERVAL).subscribe(async()=>{if(r.isCancellationRequested)try{await this.killExecution()}catch(o){console.log(o)}}))}async killExecution(e=J.KILL_CODE){return Gl(this.childProcessPid,e)}};J.CliCommandExecution=Zs;var Gl=(s,e)=>new Promise((t,r)=>{Bl(s,e,n=>{n&&r(n),t()})})});var ho=f((ym,po)=>{po.exports=lo;lo.sync=zl;var uo=require("fs");function Xl(s,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var r=0;r<t.length;r++){var n=t[r].toLowerCase();if(n&&s.substr(-n.length).toLowerCase()===n)return!0}return!1}function co(s,e,t){return!s.isSymbolicLink()&&!s.isFile()?!1:Xl(e,t)}function lo(s,e,t){uo.stat(s,function(r,n){t(r,r?!1:co(n,s,e))})}function zl(s,e){return co(uo.statSync(s),s,e)}});var Eo=f((Sm,bo)=>{bo.exports=go;go.sync=Yl;var fo=require("fs");function go(s,e,t){fo.stat(s,function(r,n){t(r,r?!1:mo(n,e))})}function Yl(s,e){return mo(fo.statSync(s),e)}function mo(s,e){return s.isFile()&&Wl(s,e)}function Wl(s,e){var t=s.mode,r=s.uid,n=s.gid,i=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),o=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),a=parseInt("010",8),u=parseInt("001",8),l=c|a,p=t&u||t&a&&n===o||t&c&&r===i||t&l&&i===0;return p}});var _o=f((xm,vo)=>{var Rm=require("fs"),Er;process.platform==="win32"||global.TESTING_WINDOWS?Er=ho():Er=Eo();vo.exports=tn;tn.sync=Jl;function tn(s,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,n){tn(s,e||{},function(i,o){i?n(i):r(o)})})}Er(s,e||{},function(r,n){r&&(r.code==="EACCES"||e&&e.ignoreErrors)&&(r=null,n=!1),t(r,n)})}function Jl(s,e){try{return Er.sync(s,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var Oo=f((Lm,To)=>{var Qe=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",yo=require("path"),Kl=Qe?";":":",So=_o(),Ro=s=>Object.assign(new Error(`not found: ${s}`),{code:"ENOENT"}),xo=(s,e)=>{let t=e.colon||Kl,r=s.match(/\//)||Qe&&s.match(/\\/)?[""]:[...Qe?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(t)],n=Qe?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=Qe?n.split(t):[""];return Qe&&s.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:r,pathExt:i,pathExtExe:n}},Lo=(s,e,t)=>{typeof e=="function"&&(t=e,e={}),e||(e={});let{pathEnv:r,pathExt:n,pathExtExe:i}=xo(s,e),o=[],c=u=>new Promise((l,p)=>{if(u===r.length)return e.all&&o.length?l(o):p(Ro(s));let h=r[u],d=/^".*"$/.test(h)?h.slice(1,-1):h,g=yo.join(d,s),E=!d&&/^\.[\\\/]/.test(s)?s.slice(0,2)+g:g;l(a(E,u,0))}),a=(u,l,p)=>new Promise((h,d)=>{if(p===n.length)return h(c(l+1));let g=n[p];So(u+g,{pathExt:i},(E,N)=>{if(!E&&N)if(e.all)o.push(u+g);else return h(u+g);return h(a(u,l,p+1))})});return t?c(0).then(u=>t(null,u),t):c(0)},Ql=(s,e)=>{e=e||{};let{pathEnv:t,pathExt:r,pathExtExe:n}=xo(s,e),i=[];for(let o=0;o<t.length;o++){let c=t[o],a=/^".*"$/.test(c)?c.slice(1,-1):c,u=yo.join(a,s),l=!a&&/^\.[\\\/]/.test(s)?s.slice(0,2)+u:u;for(let p=0;p<r.length;p++){let h=l+r[p];try{if(So.sync(h,{pathExt:n}))if(e.all)i.push(h);else return h}catch{}}}if(e.all&&i.length)return i;if(e.nothrow)return null;throw Ro(s)};To.exports=Lo;Lo.sync=Ql});var Ao=f((Tm,rn)=>{"use strict";var Co=(s={})=>{let e=s.env||process.env;return(s.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};rn.exports=Co;rn.exports.default=Co});var No=f((Om,wo)=>{"use strict";var Io=require("path"),Zl=Oo(),ep=Ao();function Po(s,e){let t=s.options.env||process.env,r=process.cwd(),n=s.options.cwd!=null,i=n&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(s.options.cwd)}catch{}let o;try{o=Zl.sync(s.command,{path:t[ep({env:t})],pathExt:e?Io.delimiter:void 0})}catch{}finally{i&&process.chdir(r)}return o&&(o=Io.resolve(n?s.options.cwd:"",o)),o}function tp(s){return Po(s)||Po(s,!0)}wo.exports=tp});var Do=f((Cm,nn)=>{"use strict";var sn=/([()\][%!^"`<>&|;, *?])/g;function rp(s){return s=s.replace(sn,"^$1"),s}function sp(s,e){return s=`${s}`,s=s.replace(/(\\*)"/g,'$1$1\\"'),s=s.replace(/(\\*)$/,"$1$1"),s=`"${s}"`,s=s.replace(sn,"^$1"),e&&(s=s.replace(sn,"^$1")),s}nn.exports.command=rp;nn.exports.argument=sp});var qo=f((Am,Fo)=>{"use strict";Fo.exports=/^#!(.*)/});var Vo=f((Im,Mo)=>{"use strict";var np=qo();Mo.exports=(s="")=>{let e=s.match(np);if(!e)return null;let[t,r]=e[0].replace(/#! ?/,"").split(" "),n=t.split("/").pop();return n==="env"?r:r?`${n} ${r}`:n}});var jo=f((Pm,$o)=>{"use strict";var on=require("fs"),ip=Vo();function op(s){let t=Buffer.alloc(150),r;try{r=on.openSync(s,"r"),on.readSync(r,t,0,150,0),on.closeSync(r)}catch{}return ip(t.toString())}$o.exports=op});var Bo=f((wm,Ho)=>{"use strict";var ap=require("path"),ko=No(),Uo=Do(),up=jo(),cp=process.platform==="win32",lp=/\.(?:com|exe)$/i,pp=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function hp(s){s.file=ko(s);let e=s.file&&up(s.file);return e?(s.args.unshift(s.file),s.command=e,ko(s)):s.file}function fp(s){if(!cp)return s;let e=hp(s),t=!lp.test(e);if(s.options.forceShell||t){let r=pp.test(e);s.command=ap.normalize(s.command),s.command=Uo.command(s.command),s.args=s.args.map(i=>Uo.argument(i,r));let n=[s.command].concat(s.args).join(" ");s.args=["/d","/s","/c",`"${n}"`],s.command=process.env.comspec||"cmd.exe",s.options.windowsVerbatimArguments=!0}return s}function dp(s,e,t){e&&!Array.isArray(e)&&(t=e,e=null),e=e?e.slice(0):[],t=Object.assign({},t);let r={command:s,args:e,options:t,file:void 0,original:{command:s,args:e}};return t.shell?r:fp(r)}Ho.exports=dp});var zo=f((Nm,Xo)=>{"use strict";var an=process.platform==="win32";function un(s,e){return Object.assign(new Error(`${e} ${s.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${s.command}`,path:s.command,spawnargs:s.args})}function gp(s,e){if(!an)return;let t=s.emit;s.emit=function(r,n){if(r==="exit"){let i=Go(n,e,"spawn");if(i)return t.call(s,"error",i)}return t.apply(s,arguments)}}function Go(s,e){return an&&s===1&&!e.file?un(e.original,"spawn"):null}function mp(s,e){return an&&s===1&&!e.file?un(e.original,"spawnSync"):null}Xo.exports={hookChildProcess:gp,verifyENOENT:Go,verifyENOENTSync:mp,notFoundError:un}});var Jo=f((Dm,Ze)=>{"use strict";var Yo=require("child_process"),cn=Bo(),ln=zo();function Wo(s,e,t){let r=cn(s,e,t),n=Yo.spawn(r.command,r.args,r.options);return ln.hookChildProcess(n,r),n}function bp(s,e,t){let r=cn(s,e,t),n=Yo.spawnSync(r.command,r.args,r.options);return n.error=n.error||ln.verifyENOENTSync(n.status,r),n}Ze.exports=Wo;Ze.exports.spawn=Wo;Ze.exports.sync=bp;Ze.exports._parse=cn;Ze.exports._enoent=ln});var Zo=f(vr=>{"use strict";var Ep=vr&&vr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},vp=Ke(),_p=Hs(),yp=pr(),Ko=hr(),Sp=gr(),Qo=Object.prototype.toString;function Rp(s){return!!s&&typeof s.addListener=="function"&&typeof s.removeListener=="function"}function xp(s){return!!s&&typeof s.on=="function"&&typeof s.off=="function"}function Lp(s){return!!s&&Qo.call(s)==="[object NodeList]"}function Tp(s){return!!s&&Qo.call(s)==="[object HTMLCollection]"}function Op(s){return!!s&&typeof s.addEventListener=="function"&&typeof s.removeEventListener=="function"}var Cp=function(s){Ep(e,s);function e(t,r,n,i){s.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=i}return e.create=function(t,r,n,i){return yp.isFunction(n)&&(i=n,n=void 0),new e(t,r,i,n)},e.setupSubscription=function(t,r,n,i,o){var c;if(Lp(t)||Tp(t))for(var a=0,u=t.length;a<u;a++)e.setupSubscription(t[a],r,n,i,o);else if(Op(t)){var l=t;t.addEventListener(r,n,o),c=function(){return l.removeEventListener(r,n,o)}}else if(xp(t)){var p=t;t.on(r,n),c=function(){return p.off(r,n)}}else if(Rp(t)){var h=t;t.addListener(r,n),c=function(){return h.removeListener(r,n)}}else throw new TypeError("Invalid event target");i.add(new Sp.Subscription(c))},e.prototype._subscribe=function(t){var r=this.sourceObj,n=this.eventName,i=this.options,o=this.selector,c=o?function(){for(var a=[],u=0;u<arguments.length;u++)a[u-0]=arguments[u];var l=_p.tryCatch(o).apply(void 0,a);l===Ko.errorObject?t.error(Ko.errorObject.e):t.next(l)}:function(a){return t.next(a)};e.setupSubscription(r,n,c,t,i)},e}(vp.Observable);vr.FromEventObservable=Cp});var ta=f(ea=>{"use strict";var Ap=Zo();ea.fromEvent=Ap.FromEventObservable.create});var ra=f(()=>{"use strict";var Ip=Ke(),Pp=ta();Ip.Observable.fromEvent=Pp.fromEvent});var na=f(sa=>{"use strict";var wp=Us();function Np(s){return!wp.isArray(s)&&s-parseFloat(s)+1>=0}sa.isNumeric=Np});var ia=f(_r=>{"use strict";var Dp=_r&&_r.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Fp=gr(),qp=function(s){Dp(e,s);function e(t,r){s.call(this)}return e.prototype.schedule=function(t,r){return r===void 0&&(r=0),this},e}(Fp.Subscription);_r.Action=qp});var aa=f(yr=>{"use strict";var Mp=yr&&yr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},oa=Rt(),Vp=ia(),$p=function(s){Mp(e,s);function e(t,r){s.call(this,t,r),this.scheduler=t,this.pending=!1,this.work=r}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,i=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(i,n,r)),this.delay=r,this.id=this.id||this.requestAsyncId(i,this.id,r),this},e.prototype.requestAsyncId=function(t,r,n){return n===void 0&&(n=0),oa.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,r,n){return n===void 0&&(n=0),n!==null&&this.delay===n&&this.pending===!1?r:oa.root.clearInterval(r)&&void 0||void 0},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,r);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var n=!1,i=void 0;try{this.work(t)}catch(o){n=!0,i=!!o&&o||new Error(o)}if(n)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,r=this.scheduler,n=r.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&n.splice(i,1),t!=null&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null},e}(Vp.Action);yr.AsyncAction=$p});var ca=f(ua=>{"use strict";var jp=function(){function s(e,t){t===void 0&&(t=s.now),this.SchedulerAction=e,this.now=t}return s.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},s.now=Date.now?Date.now:function(){return+new Date},s}();ua.Scheduler=jp});var la=f(Sr=>{"use strict";var kp=Sr&&Sr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Up=ca(),Hp=function(s){kp(e,s);function e(){s.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return e.prototype.flush=function(t){var r=this.actions;if(this.active){r.push(t);return}var n;this.active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=r.shift());if(this.active=!1,n){for(;t=r.shift();)t.unsubscribe();throw n}},e}(Up.Scheduler);Sr.AsyncScheduler=Hp});var ha=f(pa=>{"use strict";var Bp=aa(),Gp=la();pa.async=new Gp.AsyncScheduler(Bp.AsyncAction)});var fa=f(Rr=>{"use strict";var Xp=Rr&&Rr.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},zp=na(),Yp=Ke(),pn=ha(),Wp=function(s){Xp(e,s);function e(t,r){t===void 0&&(t=0),r===void 0&&(r=pn.async),s.call(this),this.period=t,this.scheduler=r,(!zp.isNumeric(t)||t<0)&&(this.period=0),(!r||typeof r.schedule!="function")&&(this.scheduler=pn.async)}return e.create=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=pn.async),new e(t,r)},e.dispatch=function(t){var r=t.index,n=t.subscriber,i=t.period;n.next(r),!n.closed&&(t.index+=1,this.schedule(t,i))},e.prototype._subscribe=function(t){var r=0,n=this.period,i=this.scheduler;t.add(i.schedule(e.dispatch,n,{index:r,subscriber:t,period:n}))},e}(Yp.Observable);Rr.IntervalObservable=Wp});var ga=f(da=>{"use strict";var Jp=fa();da.interval=Jp.IntervalObservable.create});var ma=f(()=>{"use strict";var Kp=Ke(),Qp=ga();Kp.Observable.interval=Qp.interval});var ba=f($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.TELEMETRY_HEADER=$.SF_CONFIG_ISV_DEBUGGER_URL=$.SF_CONFIG_ISV_DEBUGGER_SID=$.SF_COMMAND=$.MISSING_LABEL_MSG=$.LOCALE_JA=$.DEFAULT_LOCALE=$.BASE_FILE_EXTENSION=$.BASE_FILE_NAME=$.ENV_SF_ORG_INSTANCE_URL=$.ENV_HTTPS_PROXY=$.ENV_HTTP_PROXY=$.ENV_SF_TARGET_ORG=$.DEFAULT_CONNECTION_TIMEOUT_MS=$.CLIENT_ID=void 0;$.CLIENT_ID="sfdx-vscode";$.DEFAULT_CONNECTION_TIMEOUT_MS=2e4;$.ENV_SF_TARGET_ORG="SF_TARGET_ORG";$.ENV_HTTP_PROXY="HTTP_PROXY";$.ENV_HTTPS_PROXY="HTTPS_PROXY";$.ENV_SF_ORG_INSTANCE_URL="SF_ORG_INSTANCE_URL";$.BASE_FILE_NAME="i18n";$.BASE_FILE_EXTENSION="js";$.DEFAULT_LOCALE="en";$.LOCALE_JA="ja";$.MISSING_LABEL_MSG="!!! MISSING LABEL !!!";$.SF_COMMAND="sf";$.SF_CONFIG_ISV_DEBUGGER_SID="org-isv-debugger-sid";$.SF_CONFIG_ISV_DEBUGGER_URL="org-isv-debugger-url";$.TELEMETRY_HEADER="salesforce-vscode-extensions"});var et=f(Ne=>{"use strict";var Zp=Ne&&Ne.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),eh=Ne&&Ne.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Zp(e,s,t)};Object.defineProperty(Ne,"__esModule",{value:!0});eh(ba(),Ne)});var hn=f(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.GlobalCliEnvironment=void 0;var xr=class{};Lr.GlobalCliEnvironment=xr;xr.environmentVariables=new Map});var Or=f(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.CliCommandExecutor=void 0;var th=Jo();ra();ma();var rh=et(),sh=en(),nh=hn(),Tt=class{static patchEnv(e,t){let r=Object.create(null);return Object.assign(r,process.env),t.forEach((n,i)=>{r[i]=n}),r&&(r.SFDX_TOOL=rh.TELEMETRY_HEADER),typeof e.env<"u"&&Object.assign(r,e.env),e.env=r,e}constructor(e,t,r=!0){this.command=e,this.options=r?Tt.patchEnv(t,nh.GlobalCliEnvironment.environmentVariables):t}execute(e){let t=th(this.command.command,this.command.args,this.options);return new sh.CliCommandExecution(this.command,t,e)}};Tr.CliCommandExecutor=Tt});var Ea=f(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.Command=void 0;var fn=class{constructor(e){this.command=e.command,this.description=e.description,this.args=e.args,this.logName=e.logName}toString(){return this.description?this.description:`${this.command} ${this.args.join(" ")}`}toCommand(){return`${this.command} ${this.args.join(" ")}`}};Cr.Command=fn});var gn=f(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.CommandBuilder=Le.JSON_FLAG=void 0;var ih=Ea();Le.JSON_FLAG="--json";var dn=class{constructor(e){this.args=[],this.command=e}withDescription(e){return this.description=e,this}withArg(e){return e===Le.JSON_FLAG?this.withJson():this.args.push(e),this}withFlag(e,t){return this.args.push(e,t),this}withJson(){return this.args.push(Le.JSON_FLAG),this}withLogName(e){return this.logName=e,this}build(){return new ih.Command(this)}};Le.CommandBuilder=dn});var Ir=f(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.CommandOutput=void 0;var mn=class{constructor(){this.stdoutBuffer="",this.stderrBuffer=""}async getCmdResult(e){return e.stdoutSubject.subscribe(t=>{this.stdoutBuffer+=t.toString()}),e.stderrSubject.subscribe(t=>{this.stderrBuffer+=t.toString()}),new Promise((t,r)=>{e.processExitSubject.subscribe(n=>n!==void 0&&String(n)==="0"?t(this.stdoutBuffer):r(this.stderrBuffer||this.stdoutBuffer))})}};Ar.CommandOutput=mn});var wr=f(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.SfCommandBuilder=void 0;var oh=et(),ah=gn(),bn=class extends ah.CommandBuilder{constructor(){super(oh.SF_COMMAND)}};Pr.SfCommandBuilder=bn});var va=f(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.ConfigGet=void 0;var uh=Or(),ch=Ir(),lh=wr(),En=class{async getConfig(e,...t){let r=new lh.SfCommandBuilder().withArg("config:get");t.forEach(c=>r.withArg(c));let n=new uh.CliCommandExecutor(r.withJson().build(),{cwd:e}).execute(),o=await new ch.CommandOutput().getCmdResult(n);try{let c=new Map;return JSON.parse(o).result.forEach(u=>c.set(u.key,u.value)),Promise.resolve(c)}catch(c){return Promise.reject(c)}}};Nr.ConfigGet=En});var _a=f(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.OrgDisplay=void 0;var ph=Or(),hh=Ir(),fh=wr(),vn=class{async getOrgInfo(e){let t=new ph.CliCommandExecutor(new fh.SfCommandBuilder().withArg("org:display").withJson().build(),{cwd:e}).execute(),n=await new hh.CommandOutput().getCmdResult(t);try{let i=JSON.parse(n).result;return Promise.resolve(i)}catch{return Promise.reject(n)}}};Dr.OrgDisplay=vn});var Ot=f((ib,ya)=>{var dh="2.0.0",gh=Number.MAX_SAFE_INTEGER||9007199254740991,mh=16,bh=256-6,Eh=["major","premajor","minor","preminor","patch","prepatch","prerelease"];ya.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:mh,MAX_SAFE_BUILD_LENGTH:bh,MAX_SAFE_INTEGER:gh,RELEASE_TYPES:Eh,SEMVER_SPEC_VERSION:dh,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ct=f((ob,Sa)=>{var vh=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...s)=>console.error("SEMVER",...s):()=>{};Sa.exports=vh});var tt=f((_e,Ra)=>{var{MAX_SAFE_COMPONENT_LENGTH:_n,MAX_SAFE_BUILD_LENGTH:_h,MAX_LENGTH:yh}=Ot(),Sh=Ct();_e=Ra.exports={};var Rh=_e.re=[],xh=_e.safeRe=[],R=_e.src=[],x=_e.t={},Lh=0,yn="[a-zA-Z0-9-]",Th=[["\\s",1],["\\d",yh],[yn,_h]],Oh=s=>{for(let[e,t]of Th)s=s.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return s},D=(s,e,t)=>{let r=Oh(e),n=Lh++;Sh(s,n,e),x[s]=n,R[n]=e,Rh[n]=new RegExp(e,t?"g":void 0),xh[n]=new RegExp(r,t?"g":void 0)};D("NUMERICIDENTIFIER","0|[1-9]\\d*");D("NUMERICIDENTIFIERLOOSE","\\d+");D("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${yn}*`);D("MAINVERSION",`(${R[x.NUMERICIDENTIFIER]})\\.(${R[x.NUMERICIDENTIFIER]})\\.(${R[x.NUMERICIDENTIFIER]})`);D("MAINVERSIONLOOSE",`(${R[x.NUMERICIDENTIFIERLOOSE]})\\.(${R[x.NUMERICIDENTIFIERLOOSE]})\\.(${R[x.NUMERICIDENTIFIERLOOSE]})`);D("PRERELEASEIDENTIFIER",`(?:${R[x.NUMERICIDENTIFIER]}|${R[x.NONNUMERICIDENTIFIER]})`);D("PRERELEASEIDENTIFIERLOOSE",`(?:${R[x.NUMERICIDENTIFIERLOOSE]}|${R[x.NONNUMERICIDENTIFIER]})`);D("PRERELEASE",`(?:-(${R[x.PRERELEASEIDENTIFIER]}(?:\\.${R[x.PRERELEASEIDENTIFIER]})*))`);D("PRERELEASELOOSE",`(?:-?(${R[x.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${R[x.PRERELEASEIDENTIFIERLOOSE]})*))`);D("BUILDIDENTIFIER",`${yn}+`);D("BUILD",`(?:\\+(${R[x.BUILDIDENTIFIER]}(?:\\.${R[x.BUILDIDENTIFIER]})*))`);D("FULLPLAIN",`v?${R[x.MAINVERSION]}${R[x.PRERELEASE]}?${R[x.BUILD]}?`);D("FULL",`^${R[x.FULLPLAIN]}$`);D("LOOSEPLAIN",`[v=\\s]*${R[x.MAINVERSIONLOOSE]}${R[x.PRERELEASELOOSE]}?${R[x.BUILD]}?`);D("LOOSE",`^${R[x.LOOSEPLAIN]}$`);D("GTLT","((?:<|>)?=?)");D("XRANGEIDENTIFIERLOOSE",`${R[x.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);D("XRANGEIDENTIFIER",`${R[x.NUMERICIDENTIFIER]}|x|X|\\*`);D("XRANGEPLAIN",`[v=\\s]*(${R[x.XRANGEIDENTIFIER]})(?:\\.(${R[x.XRANGEIDENTIFIER]})(?:\\.(${R[x.XRANGEIDENTIFIER]})(?:${R[x.PRERELEASE]})?${R[x.BUILD]}?)?)?`);D("XRANGEPLAINLOOSE",`[v=\\s]*(${R[x.XRANGEIDENTIFIERLOOSE]})(?:\\.(${R[x.XRANGEIDENTIFIERLOOSE]})(?:\\.(${R[x.XRANGEIDENTIFIERLOOSE]})(?:${R[x.PRERELEASELOOSE]})?${R[x.BUILD]}?)?)?`);D("XRANGE",`^${R[x.GTLT]}\\s*${R[x.XRANGEPLAIN]}$`);D("XRANGELOOSE",`^${R[x.GTLT]}\\s*${R[x.XRANGEPLAINLOOSE]}$`);D("COERCEPLAIN",`(^|[^\\d])(\\d{1,${_n}})(?:\\.(\\d{1,${_n}}))?(?:\\.(\\d{1,${_n}}))?`);D("COERCE",`${R[x.COERCEPLAIN]}(?:$|[^\\d])`);D("COERCEFULL",R[x.COERCEPLAIN]+`(?:${R[x.PRERELEASE]})?(?:${R[x.BUILD]})?(?:$|[^\\d])`);D("COERCERTL",R[x.COERCE],!0);D("COERCERTLFULL",R[x.COERCEFULL],!0);D("LONETILDE","(?:~>?)");D("TILDETRIM",`(\\s*)${R[x.LONETILDE]}\\s+`,!0);_e.tildeTrimReplace="$1~";D("TILDE",`^${R[x.LONETILDE]}${R[x.XRANGEPLAIN]}$`);D("TILDELOOSE",`^${R[x.LONETILDE]}${R[x.XRANGEPLAINLOOSE]}$`);D("LONECARET","(?:\\^)");D("CARETTRIM",`(\\s*)${R[x.LONECARET]}\\s+`,!0);_e.caretTrimReplace="$1^";D("CARET",`^${R[x.LONECARET]}${R[x.XRANGEPLAIN]}$`);D("CARETLOOSE",`^${R[x.LONECARET]}${R[x.XRANGEPLAINLOOSE]}$`);D("COMPARATORLOOSE",`^${R[x.GTLT]}\\s*(${R[x.LOOSEPLAIN]})$|^$`);D("COMPARATOR",`^${R[x.GTLT]}\\s*(${R[x.FULLPLAIN]})$|^$`);D("COMPARATORTRIM",`(\\s*)${R[x.GTLT]}\\s*(${R[x.LOOSEPLAIN]}|${R[x.XRANGEPLAIN]})`,!0);_e.comparatorTrimReplace="$1$2$3";D("HYPHENRANGE",`^\\s*(${R[x.XRANGEPLAIN]})\\s+-\\s+(${R[x.XRANGEPLAIN]})\\s*$`);D("HYPHENRANGELOOSE",`^\\s*(${R[x.XRANGEPLAINLOOSE]})\\s+-\\s+(${R[x.XRANGEPLAINLOOSE]})\\s*$`);D("STAR","(<|>)?=?\\s*\\*");D("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");D("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Fr=f((ab,xa)=>{var Ch=Object.freeze({loose:!0}),Ah=Object.freeze({}),Ih=s=>s?typeof s!="object"?Ch:s:Ah;xa.exports=Ih});var Sn=f((ub,Oa)=>{var La=/^[0-9]+$/,Ta=(s,e)=>{let t=La.test(s),r=La.test(e);return t&&r&&(s=+s,e=+e),s===e?0:t&&!r?-1:r&&!t?1:s<e?-1:1},Ph=(s,e)=>Ta(e,s);Oa.exports={compareIdentifiers:Ta,rcompareIdentifiers:Ph}});var te=f((cb,Pa)=>{var qr=Ct(),{MAX_LENGTH:Ca,MAX_SAFE_INTEGER:Mr}=Ot(),{safeRe:Aa,t:Ia}=tt(),wh=Fr(),{compareIdentifiers:rt}=Sn(),le=class{constructor(e,t){if(t=wh(t),e instanceof le){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Ca)throw new TypeError(`version is longer than ${Ca} characters`);qr("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Aa[Ia.LOOSE]:Aa[Ia.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Mr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Mr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Mr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let i=+n;if(i>=0&&i<Mr)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(qr("SemVer.compare",this.version,this.options,e),!(e instanceof le)){if(typeof e=="string"&&e===this.version)return 0;e=new le(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof le||(e=new le(e,this.options)),rt(this.major,e.major)||rt(this.minor,e.minor)||rt(this.patch,e.patch)}comparePre(e){if(e instanceof le||(e=new le(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],n=e.prerelease[t];if(qr("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return rt(r,n)}while(++t)}compareBuild(e){e instanceof le||(e=new le(e,this.options));let t=0;do{let r=this.build[t],n=e.build[t];if(qr("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return rt(r,n)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(r)?1:0;if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(t){let i=[t,n];r===!1&&(i=[t]),rt(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Pa.exports=le});var De=f((lb,Na)=>{var wa=te(),Nh=(s,e,t=!1)=>{if(s instanceof wa)return s;try{return new wa(s,e)}catch(r){if(!t)return null;throw r}};Na.exports=Nh});var Fa=f((pb,Da)=>{var Dh=De(),Fh=(s,e)=>{let t=Dh(s,e);return t?t.version:null};Da.exports=Fh});var Ma=f((hb,qa)=>{var qh=De(),Mh=(s,e)=>{let t=qh(s.trim().replace(/^[=v]+/,""),e);return t?t.version:null};qa.exports=Mh});var ja=f((fb,$a)=>{var Va=te(),Vh=(s,e,t,r,n)=>{typeof t=="string"&&(n=r,r=t,t=void 0);try{return new Va(s instanceof Va?s.version:s,t).inc(e,r,n).version}catch{return null}};$a.exports=Vh});var Ha=f((db,Ua)=>{var ka=De(),$h=(s,e)=>{let t=ka(s,null,!0),r=ka(e,null,!0),n=t.compare(r);if(n===0)return null;let i=n>0,o=i?t:r,c=i?r:t,a=!!o.prerelease.length;if(!!c.prerelease.length&&!a)return!c.patch&&!c.minor?"major":o.patch?"patch":o.minor?"minor":"major";let l=a?"pre":"";return t.major!==r.major?l+"major":t.minor!==r.minor?l+"minor":t.patch!==r.patch?l+"patch":"prerelease"};Ua.exports=$h});var Ga=f((gb,Ba)=>{var jh=te(),kh=(s,e)=>new jh(s,e).major;Ba.exports=kh});var za=f((mb,Xa)=>{var Uh=te(),Hh=(s,e)=>new Uh(s,e).minor;Xa.exports=Hh});var Wa=f((bb,Ya)=>{var Bh=te(),Gh=(s,e)=>new Bh(s,e).patch;Ya.exports=Gh});var Ka=f((Eb,Ja)=>{var Xh=De(),zh=(s,e)=>{let t=Xh(s,e);return t&&t.prerelease.length?t.prerelease:null};Ja.exports=zh});var fe=f((vb,Za)=>{var Qa=te(),Yh=(s,e,t)=>new Qa(s,t).compare(new Qa(e,t));Za.exports=Yh});var tu=f((_b,eu)=>{var Wh=fe(),Jh=(s,e,t)=>Wh(e,s,t);eu.exports=Jh});var su=f((yb,ru)=>{var Kh=fe(),Qh=(s,e)=>Kh(s,e,!0);ru.exports=Qh});var Vr=f((Sb,iu)=>{var nu=te(),Zh=(s,e,t)=>{let r=new nu(s,t),n=new nu(e,t);return r.compare(n)||r.compareBuild(n)};iu.exports=Zh});var au=f((Rb,ou)=>{var ef=Vr(),tf=(s,e)=>s.sort((t,r)=>ef(t,r,e));ou.exports=tf});var cu=f((xb,uu)=>{var rf=Vr(),sf=(s,e)=>s.sort((t,r)=>rf(r,t,e));uu.exports=sf});var At=f((Lb,lu)=>{var nf=fe(),of=(s,e,t)=>nf(s,e,t)>0;lu.exports=of});var $r=f((Tb,pu)=>{var af=fe(),uf=(s,e,t)=>af(s,e,t)<0;pu.exports=uf});var Rn=f((Ob,hu)=>{var cf=fe(),lf=(s,e,t)=>cf(s,e,t)===0;hu.exports=lf});var xn=f((Cb,fu)=>{var pf=fe(),hf=(s,e,t)=>pf(s,e,t)!==0;fu.exports=hf});var jr=f((Ab,du)=>{var ff=fe(),df=(s,e,t)=>ff(s,e,t)>=0;du.exports=df});var kr=f((Ib,gu)=>{var gf=fe(),mf=(s,e,t)=>gf(s,e,t)<=0;gu.exports=mf});var Ln=f((Pb,mu)=>{var bf=Rn(),Ef=xn(),vf=At(),_f=jr(),yf=$r(),Sf=kr(),Rf=(s,e,t,r)=>{switch(e){case"===":return typeof s=="object"&&(s=s.version),typeof t=="object"&&(t=t.version),s===t;case"!==":return typeof s=="object"&&(s=s.version),typeof t=="object"&&(t=t.version),s!==t;case"":case"=":case"==":return bf(s,t,r);case"!=":return Ef(s,t,r);case">":return vf(s,t,r);case">=":return _f(s,t,r);case"<":return yf(s,t,r);case"<=":return Sf(s,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};mu.exports=Rf});var Eu=f((wb,bu)=>{var xf=te(),Lf=De(),{safeRe:Ur,t:Hr}=tt(),Tf=(s,e)=>{if(s instanceof xf)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;e=e||{};let t=null;if(!e.rtl)t=s.match(e.includePrerelease?Ur[Hr.COERCEFULL]:Ur[Hr.COERCE]);else{let a=e.includePrerelease?Ur[Hr.COERCERTLFULL]:Ur[Hr.COERCERTL],u;for(;(u=a.exec(s))&&(!t||t.index+t[0].length!==s.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),a.lastIndex=u.index+u[1].length+u[2].length;a.lastIndex=-1}if(t===null)return null;let r=t[2],n=t[3]||"0",i=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",c=e.includePrerelease&&t[6]?`+${t[6]}`:"";return Lf(`${r}.${n}.${i}${o}${c}`,e)};bu.exports=Tf});var _u=f((Nb,vu)=>{"use strict";vu.exports=function(s){s.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Su=f((Db,yu)=>{"use strict";yu.exports=j;j.Node=Fe;j.create=j;function j(s){var e=this;if(e instanceof j||(e=new j),e.tail=null,e.head=null,e.length=0,s&&typeof s.forEach=="function")s.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return e}j.prototype.removeNode=function(s){if(s.list!==this)throw new Error("removing node which does not belong to this list");var e=s.next,t=s.prev;return e&&(e.prev=t),t&&(t.next=e),s===this.head&&(this.head=e),s===this.tail&&(this.tail=t),s.list.length--,s.next=null,s.prev=null,s.list=null,e};j.prototype.unshiftNode=function(s){if(s!==this.head){s.list&&s.list.removeNode(s);var e=this.head;s.list=this,s.next=e,e&&(e.prev=s),this.head=s,this.tail||(this.tail=s),this.length++}};j.prototype.pushNode=function(s){if(s!==this.tail){s.list&&s.list.removeNode(s);var e=this.tail;s.list=this,s.prev=e,e&&(e.next=s),this.tail=s,this.head||(this.head=s),this.length++}};j.prototype.push=function(){for(var s=0,e=arguments.length;s<e;s++)Cf(this,arguments[s]);return this.length};j.prototype.unshift=function(){for(var s=0,e=arguments.length;s<e;s++)Af(this,arguments[s]);return this.length};j.prototype.pop=function(){if(!!this.tail){var s=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,s}};j.prototype.shift=function(){if(!!this.head){var s=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,s}};j.prototype.forEach=function(s,e){e=e||this;for(var t=this.head,r=0;t!==null;r++)s.call(e,t.value,r,this),t=t.next};j.prototype.forEachReverse=function(s,e){e=e||this;for(var t=this.tail,r=this.length-1;t!==null;r--)s.call(e,t.value,r,this),t=t.prev};j.prototype.get=function(s){for(var e=0,t=this.head;t!==null&&e<s;e++)t=t.next;if(e===s&&t!==null)return t.value};j.prototype.getReverse=function(s){for(var e=0,t=this.tail;t!==null&&e<s;e++)t=t.prev;if(e===s&&t!==null)return t.value};j.prototype.map=function(s,e){e=e||this;for(var t=new j,r=this.head;r!==null;)t.push(s.call(e,r.value,this)),r=r.next;return t};j.prototype.mapReverse=function(s,e){e=e||this;for(var t=new j,r=this.tail;r!==null;)t.push(s.call(e,r.value,this)),r=r.prev;return t};j.prototype.reduce=function(s,e){var t,r=this.head;if(arguments.length>1)t=e;else if(this.head)r=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;r!==null;n++)t=s(t,r.value,n),r=r.next;return t};j.prototype.reduceReverse=function(s,e){var t,r=this.tail;if(arguments.length>1)t=e;else if(this.tail)r=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;r!==null;n--)t=s(t,r.value,n),r=r.prev;return t};j.prototype.toArray=function(){for(var s=new Array(this.length),e=0,t=this.head;t!==null;e++)s[e]=t.value,t=t.next;return s};j.prototype.toArrayReverse=function(){for(var s=new Array(this.length),e=0,t=this.tail;t!==null;e++)s[e]=t.value,t=t.prev;return s};j.prototype.slice=function(s,e){e=e||this.length,e<0&&(e+=this.length),s=s||0,s<0&&(s+=this.length);var t=new j;if(e<s||e<0)return t;s<0&&(s=0),e>this.length&&(e=this.length);for(var r=0,n=this.head;n!==null&&r<s;r++)n=n.next;for(;n!==null&&r<e;r++,n=n.next)t.push(n.value);return t};j.prototype.sliceReverse=function(s,e){e=e||this.length,e<0&&(e+=this.length),s=s||0,s<0&&(s+=this.length);var t=new j;if(e<s||e<0)return t;s<0&&(s=0),e>this.length&&(e=this.length);for(var r=this.length,n=this.tail;n!==null&&r>e;r--)n=n.prev;for(;n!==null&&r>s;r--,n=n.prev)t.push(n.value);return t};j.prototype.splice=function(s,e,...t){s>this.length&&(s=this.length-1),s<0&&(s=this.length+s);for(var r=0,n=this.head;n!==null&&r<s;r++)n=n.next;for(var i=[],r=0;n&&r<e;r++)i.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=0;r<t.length;r++)n=Of(this,n,t[r]);return i};j.prototype.reverse=function(){for(var s=this.head,e=this.tail,t=s;t!==null;t=t.prev){var r=t.prev;t.prev=t.next,t.next=r}return this.head=e,this.tail=s,this};function Of(s,e,t){var r=e===s.head?new Fe(t,null,e,s):new Fe(t,e,e.next,s);return r.next===null&&(s.tail=r),r.prev===null&&(s.head=r),s.length++,r}function Cf(s,e){s.tail=new Fe(e,s.tail,null,s),s.head||(s.head=s.tail),s.length++}function Af(s,e){s.head=new Fe(e,null,s.head,s),s.tail||(s.tail=s.head),s.length++}function Fe(s,e,t,r){if(!(this instanceof Fe))return new Fe(s,e,t,r);this.list=r,this.value=s,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{_u()(j)}catch{}});var Ou=f((Fb,Tu)=>{"use strict";var If=Su(),qe=Symbol("max"),Se=Symbol("length"),st=Symbol("lengthCalculator"),Pt=Symbol("allowStale"),Me=Symbol("maxAge"),ye=Symbol("dispose"),Ru=Symbol("noDisposeOnSet"),Q=Symbol("lruList"),be=Symbol("cache"),Lu=Symbol("updateAgeOnGet"),Tn=()=>1,Cn=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[qe]=e.max||1/0,r=e.length||Tn;if(this[st]=typeof r!="function"?Tn:r,this[Pt]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Me]=e.maxAge||0,this[ye]=e.dispose,this[Ru]=e.noDisposeOnSet||!1,this[Lu]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[qe]=e||1/0,It(this)}get max(){return this[qe]}set allowStale(e){this[Pt]=!!e}get allowStale(){return this[Pt]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Me]=e,It(this)}get maxAge(){return this[Me]}set lengthCalculator(e){typeof e!="function"&&(e=Tn),e!==this[st]&&(this[st]=e,this[Se]=0,this[Q].forEach(t=>{t.length=this[st](t.value,t.key),this[Se]+=t.length})),It(this)}get lengthCalculator(){return this[st]}get length(){return this[Se]}get itemCount(){return this[Q].length}rforEach(e,t){t=t||this;for(let r=this[Q].tail;r!==null;){let n=r.prev;xu(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[Q].head;r!==null;){let n=r.next;xu(this,e,r,t),r=n}}keys(){return this[Q].toArray().map(e=>e.key)}values(){return this[Q].toArray().map(e=>e.value)}reset(){this[ye]&&this[Q]&&this[Q].length&&this[Q].forEach(e=>this[ye](e.key,e.value)),this[be]=new Map,this[Q]=new If,this[Se]=0}dump(){return this[Q].map(e=>Br(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Q]}set(e,t,r){if(r=r||this[Me],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let n=r?Date.now():0,i=this[st](t,e);if(this[be].has(e)){if(i>this[qe])return nt(this,this[be].get(e)),!1;let a=this[be].get(e).value;return this[ye]&&(this[Ru]||this[ye](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[Se]+=i-a.length,a.length=i,this.get(e),It(this),!0}let o=new An(e,t,i,n,r);return o.length>this[qe]?(this[ye]&&this[ye](e,t),!1):(this[Se]+=o.length,this[Q].unshift(o),this[be].set(e,this[Q].head),It(this),!0)}has(e){if(!this[be].has(e))return!1;let t=this[be].get(e).value;return!Br(this,t)}get(e){return On(this,e,!0)}peek(e){return On(this,e,!1)}pop(){let e=this[Q].tail;return e?(nt(this,e),e.value):null}del(e){nt(this,this[be].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],i=n.e||0;if(i===0)this.set(n.k,n.v);else{let o=i-t;o>0&&this.set(n.k,n.v,o)}}}prune(){this[be].forEach((e,t)=>On(this,t,!1))}},On=(s,e,t)=>{let r=s[be].get(e);if(r){let n=r.value;if(Br(s,n)){if(nt(s,r),!s[Pt])return}else t&&(s[Lu]&&(r.value.now=Date.now()),s[Q].unshiftNode(r));return n.value}},Br=(s,e)=>{if(!e||!e.maxAge&&!s[Me])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:s[Me]&&t>s[Me]},It=s=>{if(s[Se]>s[qe])for(let e=s[Q].tail;s[Se]>s[qe]&&e!==null;){let t=e.prev;nt(s,e),e=t}},nt=(s,e)=>{if(e){let t=e.value;s[ye]&&s[ye](t.key,t.value),s[Se]-=t.length,s[be].delete(t.key),s[Q].removeNode(e)}},An=class{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}},xu=(s,e,t,r)=>{let n=t.value;Br(s,n)&&(nt(s,t),s[Pt]||(n=void 0)),n&&e.call(r,n.value,n.key,s)};Tu.exports=Cn});var de=f((qb,Pu)=>{var Ve=class{constructor(e,t){if(t=wf(t),e instanceof Ve)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Ve(e.raw,t);if(e instanceof In)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(n=>!Au(n[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&$f(n[0])){this.set=[n];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&Mf)|(this.options.loose&&Vf))+":"+e,n=Cu.get(r);if(n)return n;let i=this.options.loose,o=i?ie[se.HYPHENRANGELOOSE]:ie[se.HYPHENRANGE];e=e.replace(o,Wf(this.options.includePrerelease)),X("hyphen replace",e),e=e.replace(ie[se.COMPARATORTRIM],Df),X("comparator trim",e),e=e.replace(ie[se.TILDETRIM],Ff),X("tilde trim",e),e=e.replace(ie[se.CARETTRIM],qf),X("caret trim",e);let c=e.split(" ").map(p=>jf(p,this.options)).join(" ").split(/\s+/).map(p=>Yf(p,this.options));i&&(c=c.filter(p=>(X("loose invalid filter",p,this.options),!!p.match(ie[se.COMPARATORLOOSE])))),X("range list",c);let a=new Map,u=c.map(p=>new In(p,this.options));for(let p of u){if(Au(p))return[p];a.set(p.value,p)}a.size>1&&a.has("")&&a.delete("");let l=[...a.values()];return Cu.set(r,l),l}intersects(e,t){if(!(e instanceof Ve))throw new TypeError("a Range is required");return this.set.some(r=>Iu(r,t)&&e.set.some(n=>Iu(n,t)&&r.every(i=>n.every(o=>i.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Nf(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Jf(this.set[t],e,this.options))return!0;return!1}};Pu.exports=Ve;var Pf=Ou(),Cu=new Pf({max:1e3}),wf=Fr(),In=wt(),X=Ct(),Nf=te(),{safeRe:ie,t:se,comparatorTrimReplace:Df,tildeTrimReplace:Ff,caretTrimReplace:qf}=tt(),{FLAG_INCLUDE_PRERELEASE:Mf,FLAG_LOOSE:Vf}=Ot(),Au=s=>s.value==="<0.0.0-0",$f=s=>s.value==="",Iu=(s,e)=>{let t=!0,r=s.slice(),n=r.pop();for(;t&&r.length;)t=r.every(i=>n.intersects(i,e)),n=r.pop();return t},jf=(s,e)=>(X("comp",s,e),s=Hf(s,e),X("caret",s),s=kf(s,e),X("tildes",s),s=Gf(s,e),X("xrange",s),s=zf(s,e),X("stars",s),s),ne=s=>!s||s.toLowerCase()==="x"||s==="*",kf=(s,e)=>s.trim().split(/\s+/).map(t=>Uf(t,e)).join(" "),Uf=(s,e)=>{let t=e.loose?ie[se.TILDELOOSE]:ie[se.TILDE];return s.replace(t,(r,n,i,o,c)=>{X("tilde",s,r,n,i,o,c);let a;return ne(n)?a="":ne(i)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:ne(o)?a=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:c?(X("replaceTilde pr",c),a=`>=${n}.${i}.${o}-${c} <${n}.${+i+1}.0-0`):a=`>=${n}.${i}.${o} <${n}.${+i+1}.0-0`,X("tilde return",a),a})},Hf=(s,e)=>s.trim().split(/\s+/).map(t=>Bf(t,e)).join(" "),Bf=(s,e)=>{X("caret",s,e);let t=e.loose?ie[se.CARETLOOSE]:ie[se.CARET],r=e.includePrerelease?"-0":"";return s.replace(t,(n,i,o,c,a)=>{X("caret",s,n,i,o,c,a);let u;return ne(i)?u="":ne(o)?u=`>=${i}.0.0${r} <${+i+1}.0.0-0`:ne(c)?i==="0"?u=`>=${i}.${o}.0${r} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${r} <${+i+1}.0.0-0`:a?(X("replaceCaret pr",a),i==="0"?o==="0"?u=`>=${i}.${o}.${c}-${a} <${i}.${o}.${+c+1}-0`:u=`>=${i}.${o}.${c}-${a} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${c}-${a} <${+i+1}.0.0-0`):(X("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${c}${r} <${i}.${o}.${+c+1}-0`:u=`>=${i}.${o}.${c}${r} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${c} <${+i+1}.0.0-0`),X("caret return",u),u})},Gf=(s,e)=>(X("replaceXRanges",s,e),s.split(/\s+/).map(t=>Xf(t,e)).join(" ")),Xf=(s,e)=>{s=s.trim();let t=e.loose?ie[se.XRANGELOOSE]:ie[se.XRANGE];return s.replace(t,(r,n,i,o,c,a)=>{X("xRange",s,r,n,i,o,c,a);let u=ne(i),l=u||ne(o),p=l||ne(c),h=p;return n==="="&&h&&(n=""),a=e.includePrerelease?"-0":"",u?n===">"||n==="<"?r="<0.0.0-0":r="*":n&&h?(l&&(o=0),c=0,n===">"?(n=">=",l?(i=+i+1,o=0,c=0):(o=+o+1,c=0)):n==="<="&&(n="<",l?i=+i+1:o=+o+1),n==="<"&&(a="-0"),r=`${n+i}.${o}.${c}${a}`):l?r=`>=${i}.0.0${a} <${+i+1}.0.0-0`:p&&(r=`>=${i}.${o}.0${a} <${i}.${+o+1}.0-0`),X("xRange return",r),r})},zf=(s,e)=>(X("replaceStars",s,e),s.trim().replace(ie[se.STAR],"")),Yf=(s,e)=>(X("replaceGTE0",s,e),s.trim().replace(ie[e.includePrerelease?se.GTE0PRE:se.GTE0],"")),Wf=s=>(e,t,r,n,i,o,c,a,u,l,p,h,d)=>(ne(r)?t="":ne(n)?t=`>=${r}.0.0${s?"-0":""}`:ne(i)?t=`>=${r}.${n}.0${s?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${s?"-0":""}`,ne(u)?a="":ne(l)?a=`<${+u+1}.0.0-0`:ne(p)?a=`<${u}.${+l+1}.0-0`:h?a=`<=${u}.${l}.${p}-${h}`:s?a=`<${u}.${l}.${+p+1}-0`:a=`<=${a}`,`${t} ${a}`.trim()),Jf=(s,e,t)=>{for(let r=0;r<s.length;r++)if(!s[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<s.length;r++)if(X(s[r].semver),s[r].semver!==In.ANY&&s[r].semver.prerelease.length>0){let n=s[r].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var wt=f((Mb,Mu)=>{var Nt=Symbol("SemVer ANY"),it=class{static get ANY(){return Nt}constructor(e,t){if(t=wu(t),e instanceof it){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),wn("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Nt?this.value="":this.value=this.operator+this.semver.version,wn("comp",this)}parse(e){let t=this.options.loose?Nu[Du.COMPARATORLOOSE]:Nu[Du.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new Fu(r[2],this.options.loose):this.semver=Nt}toString(){return this.value}test(e){if(wn("Comparator.test",e,this.options.loose),this.semver===Nt||e===Nt)return!0;if(typeof e=="string")try{e=new Fu(e,this.options)}catch{return!1}return Pn(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof it))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new qu(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new qu(this.value,t).test(e.semver):(t=wu(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Pn(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Pn(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Mu.exports=it;var wu=Fr(),{safeRe:Nu,t:Du}=tt(),Pn=Ln(),wn=Ct(),Fu=te(),qu=de()});var Dt=f((Vb,Vu)=>{var Kf=de(),Qf=(s,e,t)=>{try{e=new Kf(e,t)}catch{return!1}return e.test(s)};Vu.exports=Qf});var ju=f(($b,$u)=>{var Zf=de(),ed=(s,e)=>new Zf(s,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));$u.exports=ed});var Uu=f((jb,ku)=>{var td=te(),rd=de(),sd=(s,e,t)=>{let r=null,n=null,i=null;try{i=new rd(e,t)}catch{return null}return s.forEach(o=>{i.test(o)&&(!r||n.compare(o)===-1)&&(r=o,n=new td(r,t))}),r};ku.exports=sd});var Bu=f((kb,Hu)=>{var nd=te(),id=de(),od=(s,e,t)=>{let r=null,n=null,i=null;try{i=new id(e,t)}catch{return null}return s.forEach(o=>{i.test(o)&&(!r||n.compare(o)===1)&&(r=o,n=new nd(r,t))}),r};Hu.exports=od});var zu=f((Ub,Xu)=>{var Nn=te(),ad=de(),Gu=At(),ud=(s,e)=>{s=new ad(s,e);let t=new Nn("0.0.0");if(s.test(t)||(t=new Nn("0.0.0-0"),s.test(t)))return t;t=null;for(let r=0;r<s.set.length;++r){let n=s.set[r],i=null;n.forEach(o=>{let c=new Nn(o.semver.version);switch(o.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!i||Gu(c,i))&&(i=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Gu(t,i))&&(t=i)}return t&&s.test(t)?t:null};Xu.exports=ud});var Wu=f((Hb,Yu)=>{var cd=de(),ld=(s,e)=>{try{return new cd(s,e).range||"*"}catch{return null}};Yu.exports=ld});var Gr=f((Bb,Zu)=>{var pd=te(),Qu=wt(),{ANY:hd}=Qu,fd=de(),dd=Dt(),Ju=At(),Ku=$r(),gd=kr(),md=jr(),bd=(s,e,t,r)=>{s=new pd(s,r),e=new fd(e,r);let n,i,o,c,a;switch(t){case">":n=Ju,i=gd,o=Ku,c=">",a=">=";break;case"<":n=Ku,i=md,o=Ju,c="<",a="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(dd(s,e,r))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],p=null,h=null;if(l.forEach(d=>{d.semver===hd&&(d=new Qu(">=0.0.0")),p=p||d,h=h||d,n(d.semver,p.semver,r)?p=d:o(d.semver,h.semver,r)&&(h=d)}),p.operator===c||p.operator===a||(!h.operator||h.operator===c)&&i(s,h.semver))return!1;if(h.operator===a&&o(s,h.semver))return!1}return!0};Zu.exports=bd});var tc=f((Gb,ec)=>{var Ed=Gr(),vd=(s,e,t)=>Ed(s,e,">",t);ec.exports=vd});var sc=f((Xb,rc)=>{var _d=Gr(),yd=(s,e,t)=>_d(s,e,"<",t);rc.exports=yd});var oc=f((zb,ic)=>{var nc=de(),Sd=(s,e,t)=>(s=new nc(s,t),e=new nc(e,t),s.intersects(e,t));ic.exports=Sd});var uc=f((Yb,ac)=>{var Rd=Dt(),xd=fe();ac.exports=(s,e,t)=>{let r=[],n=null,i=null,o=s.sort((l,p)=>xd(l,p,t));for(let l of o)Rd(l,e,t)?(i=l,n||(n=l)):(i&&r.push([n,i]),i=null,n=null);n&&r.push([n,null]);let c=[];for(let[l,p]of r)l===p?c.push(l):!p&&l===o[0]?c.push("*"):p?l===o[0]?c.push(`<=${p}`):c.push(`${l} - ${p}`):c.push(`>=${l}`);let a=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return a.length<u.length?a:e}});var dc=f((Wb,fc)=>{var cc=de(),Fn=wt(),{ANY:Dn}=Fn,Ft=Dt(),qn=fe(),Ld=(s,e,t={})=>{if(s===e)return!0;s=new cc(s,t),e=new cc(e,t);let r=!1;e:for(let n of s.set){for(let i of e.set){let o=Od(n,i,t);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},Td=[new Fn(">=0.0.0-0")],lc=[new Fn(">=0.0.0")],Od=(s,e,t)=>{if(s===e)return!0;if(s.length===1&&s[0].semver===Dn){if(e.length===1&&e[0].semver===Dn)return!0;t.includePrerelease?s=Td:s=lc}if(e.length===1&&e[0].semver===Dn){if(t.includePrerelease)return!0;e=lc}let r=new Set,n,i;for(let d of s)d.operator===">"||d.operator===">="?n=pc(n,d,t):d.operator==="<"||d.operator==="<="?i=hc(i,d,t):r.add(d.semver);if(r.size>1)return null;let o;if(n&&i){if(o=qn(n.semver,i.semver,t),o>0)return null;if(o===0&&(n.operator!==">="||i.operator!=="<="))return null}for(let d of r){if(n&&!Ft(d,String(n),t)||i&&!Ft(d,String(i),t))return null;for(let g of e)if(!Ft(d,String(g),t))return!1;return!0}let c,a,u,l,p=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,h=n&&!t.includePrerelease&&n.semver.prerelease.length?n.semver:!1;p&&p.prerelease.length===1&&i.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let d of e){if(l=l||d.operator===">"||d.operator===">=",u=u||d.operator==="<"||d.operator==="<=",n){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(c=pc(n,d,t),c===d&&c!==n)return!1}else if(n.operator===">="&&!Ft(n.semver,String(d),t))return!1}if(i){if(p&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===p.major&&d.semver.minor===p.minor&&d.semver.patch===p.patch&&(p=!1),d.operator==="<"||d.operator==="<="){if(a=hc(i,d,t),a===d&&a!==i)return!1}else if(i.operator==="<="&&!Ft(i.semver,String(d),t))return!1}if(!d.operator&&(i||n)&&o!==0)return!1}return!(n&&u&&!i&&o!==0||i&&l&&!n&&o!==0||h||p)},pc=(s,e,t)=>{if(!s)return e;let r=qn(s.semver,e.semver,t);return r>0?s:r<0||e.operator===">"&&s.operator===">="?e:s},hc=(s,e,t)=>{if(!s)return e;let r=qn(s.semver,e.semver,t);return r<0?s:r>0||e.operator==="<"&&s.operator==="<="?e:s};fc.exports=Ld});var Ec=f((Jb,bc)=>{var Mn=tt(),gc=Ot(),Cd=te(),mc=Sn(),Ad=De(),Id=Fa(),Pd=Ma(),wd=ja(),Nd=Ha(),Dd=Ga(),Fd=za(),qd=Wa(),Md=Ka(),Vd=fe(),$d=tu(),jd=su(),kd=Vr(),Ud=au(),Hd=cu(),Bd=At(),Gd=$r(),Xd=Rn(),zd=xn(),Yd=jr(),Wd=kr(),Jd=Ln(),Kd=Eu(),Qd=wt(),Zd=de(),eg=Dt(),tg=ju(),rg=Uu(),sg=Bu(),ng=zu(),ig=Wu(),og=Gr(),ag=tc(),ug=sc(),cg=oc(),lg=uc(),pg=dc();bc.exports={parse:Ad,valid:Id,clean:Pd,inc:wd,diff:Nd,major:Dd,minor:Fd,patch:qd,prerelease:Md,compare:Vd,rcompare:$d,compareLoose:jd,compareBuild:kd,sort:Ud,rsort:Hd,gt:Bd,lt:Gd,eq:Xd,neq:zd,gte:Yd,lte:Wd,cmp:Jd,coerce:Kd,Comparator:Qd,Range:Zd,satisfies:eg,toComparators:tg,maxSatisfying:rg,minSatisfying:sg,minVersion:ng,validRange:ig,outside:og,gtr:ag,ltr:ug,intersects:cg,simplifyRange:lg,subset:pg,SemVer:Cd,re:Mn.re,src:Mn.src,tokens:Mn.t,SEMVER_SPEC_VERSION:gc.SEMVER_SPEC_VERSION,RELEASE_TYPES:gc.RELEASE_TYPES,compareIdentifiers:mc.compareIdentifiers,rcompareIdentifiers:mc.rcompareIdentifiers}});var vc=f(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.CliVersionStatus=ot.CliStatusEnum=void 0;var hg=require("child_process"),Te=Ec(),Oe;(function(s){s[s.SFv2=1]="SFv2",s[s.outdatedSFDXVersion=2]="outdatedSFDXVersion",s[s.onlySFv1=3]="onlySFv1",s[s.cliNotInstalled=4]="cliNotInstalled",s[s.bothSFDXAndSFInstalled=5]="bothSFDXAndSFInstalled",s[s.SFDXv7Valid=6]="SFDXv7Valid"})(Oe||(ot.CliStatusEnum=Oe={}));var Vn=class{getCliVersion(e){try{return(0,hg.execSync)(`${e?"sfdx":"sf"} --version`).toString()}catch{return"No CLI"}}parseCliVersion(e){let r=/(?:sfdx-cli\/|@salesforce\/cli\/)(\d+\.\d+\.\d+)/.exec(e);return r?r[1]:"0.0.0"}validateCliInstallationAndVersion(e,t){if(Te.satisfies(e,"0.0.0")&&Te.satisfies(t,"0.0.0"))return Oe.cliNotInstalled;if(Te.satisfies(e,"0.0.0")&&Te.satisfies(t,"1.x"))return Oe.onlySFv1;if(Te.satisfies(t,"2.x")&&!Te.satisfies(e,t))return Oe.bothSFDXAndSFInstalled;let r="7.193.2";return Te.satisfies(t,"<2.0.0")?Te.satisfies(e,`<${r}`)?Oe.outdatedSFDXVersion:Oe.SFDXv7Valid:Oe.SFv2}};ot.CliVersionStatus=Vn});var yc=f(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.CliVersionStatus=Y.CliStatusEnum=Y.SfCommandBuilder=Y.OrgDisplay=Y.GlobalCliEnvironment=Y.ConfigGet=Y.CommandOutput=Y.CommandBuilder=Y.CliCommandExecutor=Y.CliCommandExecution=void 0;var fg=en();Object.defineProperty(Y,"CliCommandExecution",{enumerable:!0,get:function(){return fg.CliCommandExecution}});var dg=Or();Object.defineProperty(Y,"CliCommandExecutor",{enumerable:!0,get:function(){return dg.CliCommandExecutor}});var gg=gn();Object.defineProperty(Y,"CommandBuilder",{enumerable:!0,get:function(){return gg.CommandBuilder}});var mg=Ir();Object.defineProperty(Y,"CommandOutput",{enumerable:!0,get:function(){return mg.CommandOutput}});var bg=va();Object.defineProperty(Y,"ConfigGet",{enumerable:!0,get:function(){return bg.ConfigGet}});var Eg=hn();Object.defineProperty(Y,"GlobalCliEnvironment",{enumerable:!0,get:function(){return Eg.GlobalCliEnvironment}});var vg=_a();Object.defineProperty(Y,"OrgDisplay",{enumerable:!0,get:function(){return vg.OrgDisplay}});var _g=wr();Object.defineProperty(Y,"SfCommandBuilder",{enumerable:!0,get:function(){return _g.SfCommandBuilder}});var _c=vc();Object.defineProperty(Y,"CliStatusEnum",{enumerable:!0,get:function(){return _c.CliStatusEnum}});Object.defineProperty(Y,"CliVersionStatus",{enumerable:!0,get:function(){return _c.CliVersionStatus}})});var Sc=f(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.extractJsonObject=void 0;var yg=s=>{let e=s.substring(s.indexOf("{"),s.lastIndexOf("}")+1);return JSON.parse(e)};Xr.extractJsonObject=yg});var Rc=f(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.ensureCurrentWorkingDirIsProjectPath=void 0;var Sg=require("fs"),Rg=s=>{s&&process.cwd()!==s&&Sg.existsSync(s)&&process.chdir(s)};zr.ensureCurrentWorkingDirIsProjectPath=Rg});var xc=f(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.ensureCurrentWorkingDirIsProjectPath=at.extractJsonObject=void 0;var xg=Sc();Object.defineProperty(at,"extractJsonObject",{enumerable:!0,get:function(){return xg.extractJsonObject}});var Lg=Rc();Object.defineProperty(at,"ensureCurrentWorkingDirIsProjectPath",{enumerable:!0,get:function(){return Lg.ensureCurrentWorkingDirIsProjectPath}})});var Lc=f(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.Localization=void 0;var $n=class{constructor(e){this.delegate=e}localize(e,...t){return this.delegate.localize(e,...t)}};Yr.Localization=$n});var Tc=f(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.Message=void 0;var Tg=require("util"),Og=et(),jn=class{constructor(e,t){this.messages=e,this.delegate=t}localize(e,...t){let r=this.getLabel(e);if(!r)return console.warn(`Missing label for key: ${e}`),r=`${Og.MISSING_LABEL_MSG} ${e}`,t.length>=1&&t.forEach(i=>{r+=` (${i})`}),r;let n=t;if(t.length>=1){let i=r.split("%s").length-1;return t.length!==i&&(console.log(`Arguments do not match for label '${e}', got ${t.length} but want ${i}`),t.length>i&&(n=t.slice(0,-(t.length-i)))),(0,Tg.format)(r,...n)}return r}getLabel(e){return this.messages[e]?this.messages[e]:this.delegate?this.delegate.messages[e]:void 0}};Wr.Message=jn});var Oc=f(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.Message=ut.Localization=void 0;var Cg=Lc();Object.defineProperty(ut,"Localization",{enumerable:!0,get:function(){return Cg.Localization}});var Ag=Tc();Object.defineProperty(ut,"Message",{enumerable:!0,get:function(){return Ag.Message}})});var Cc=f(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.BaseCommand=void 0;var kn=class{constructor(e){this.queryString=e}getQueryString(){return this.queryString}};Jr.BaseCommand=kn});var Ic=f(Ac=>{(()=>{var s={46:(i,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(c,a,{signal:u}={}){return new Promise((l,p)=>{function h(){u?.removeEventListener("abort",h),c.removeListener(a,d),c.removeListener("error",g)}function d(...E){h(),l(E)}function g(E){h(),p(E)}u?.addEventListener("abort",h),c.on(a,d),c.on("error",g)})}},54:function(i,o,c){"use strict";var a=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};let u=c(361),l=a(c(374)),p=a(c(304)),h=l.default("agent-base");function d(){let{stack:E}=new Error;return typeof E=="string"&&E.split(`
`).some(N=>N.indexOf("(https.js:")!==-1||N.indexOf("node:https:")!==-1)}function g(E,N){return new g.Agent(E,N)}(function(E){class N extends u.EventEmitter{constructor(O,_){super();let v=_;typeof O=="function"?this.callback=O:O&&(v=O),this.timeout=null,v&&typeof v.timeout=="number"&&(this.timeout=v.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:d()?443:80}set defaultPort(O){this.explicitDefaultPort=O}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:d()?"https:":"http:"}set protocol(O){this.explicitProtocol=O}callback(O,_,v){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(O,_){let v=Object.assign({},_);typeof v.secureEndpoint!="boolean"&&(v.secureEndpoint=d()),v.host==null&&(v.host="localhost"),v.port==null&&(v.port=v.secureEndpoint?443:80),v.protocol==null&&(v.protocol=v.secureEndpoint?"https:":"http:"),v.host&&v.path&&delete v.path,delete v.agent,delete v.hostname,delete v._defaultAgent,delete v.defaultPort,delete v.createConnection,O._last=!0,O.shouldKeepAlive=!1;let I=!1,F=null,C=v.timeout||this.timeout,b=S=>{O._hadError||(O.emit("error",S),O._hadError=!0)},m=()=>{F=null,I=!0;let S=new Error(`A "socket" was not created for HTTP request before ${C}ms`);S.code="ETIMEOUT",b(S)},y=S=>{I||(F!==null&&(clearTimeout(F),F=null),b(S))},P=S=>{if(I)return;if(F!=null&&(clearTimeout(F),F=null),T=S,Boolean(T)&&typeof T.addRequest=="function")return h("Callback returned another Agent instance %o",S.constructor.name),void S.addRequest(O,v);var T;if(S)return S.once("free",()=>{this.freeSocket(S,v)}),void O.onSocket(S);let w=new Error(`no Duplex stream was returned to agent-base for \`${O.method} ${O.path}\``);b(w)};if(typeof this.callback=="function"){this.promisifiedCallback||(this.callback.length>=3?(h("Converting legacy callback function to promise"),this.promisifiedCallback=p.default(this.callback)):this.promisifiedCallback=this.callback),typeof C=="number"&&C>0&&(F=setTimeout(m,C)),"port"in v&&typeof v.port!="number"&&(v.port=Number(v.port));try{h("Resolving socket for %o request: %o",v.protocol,`${O.method} ${O.path}`),Promise.resolve(this.promisifiedCallback(O,v)).then(P,y)}catch(S){Promise.reject(S).catch(y)}}else b(new Error("`callback` is not defined"))}freeSocket(O,_){h("Freeing socket %o %o",O.constructor.name,_),O.destroy()}destroy(){h("Destroying agent %o",this.constructor.name)}}E.Agent=N,E.prototype=E.Agent.prototype})(g||(g={})),i.exports=g},304:(i,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(c){return function(a,u){return new Promise((l,p)=>{c.call(this,a,u,(h,d)=>{h?p(h):l(d)})})}}},370:function(i,o,c){"use strict";var a=this&&this.__awaiter||function(O,_,v,I){return new(v||(v=Promise))(function(F,C){function b(P){try{y(I.next(P))}catch(S){C(S)}}function m(P){try{y(I.throw(P))}catch(S){C(S)}}function y(P){var S;P.done?F(P.value):(S=P.value,S instanceof v?S:new v(function(T){T(S)})).then(b,m)}y((I=I.apply(O,_||[])).next())})},u=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(o,"__esModule",{value:!0});let l=u(c(808)),p=u(c(404)),h=u(c(310)),d=u(c(374)),g=u(c(46)),E=c(54),N=(0,d.default)("http-proxy-agent");class M extends E.Agent{constructor(_){let v;if(v=typeof _=="string"?h.default.parse(_):_,!v)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");N("Creating new HttpProxyAgent instance: %o",v),super(v);let I=Object.assign({},v);var F;this.secureProxy=v.secureProxy||typeof(F=I.protocol)=="string"&&/^https:?$/i.test(F),I.host=I.hostname||I.host,typeof I.port=="string"&&(I.port=parseInt(I.port,10)),!I.port&&I.host&&(I.port=this.secureProxy?443:80),I.host&&I.path&&(delete I.path,delete I.pathname),this.proxy=I}callback(_,v){return a(this,void 0,void 0,function*(){let{proxy:I,secureProxy:F}=this,C=h.default.parse(_.path),b;if(C.protocol||(C.protocol="http:"),C.hostname||(C.hostname=v.hostname||v.host||null),C.port==null&&(v.port,1)&&(C.port=String(v.port)),C.port==="80"&&(C.port=""),_.path=h.default.format(C),I.auth&&_.setHeader("Proxy-Authorization",`Basic ${Buffer.from(I.auth).toString("base64")}`),F?(N("Creating `tls.Socket`: %o",I),b=p.default.connect(I)):(N("Creating `net.Socket`: %o",I),b=l.default.connect(I)),_._header){let m,y;N("Regenerating stored HTTP header string for request"),_._header=null,_._implicitHeader(),_.output&&_.output.length>0?(N("Patching connection write() output buffer with updated header"),m=_.output[0],y=m.indexOf(`\r
\r
`)+4,_.output[0]=_._header+m.substring(y),N("Output buffer: %o",_.output)):_.outputData&&_.outputData.length>0&&(N("Patching connection write() output buffer with updated header"),m=_.outputData[0].data,y=m.indexOf(`\r
\r
`)+4,_.outputData[0].data=_._header+m.substring(y),N("Output buffer: %o",_.outputData[0].data))}return yield(0,g.default)(b,"connect"),b})}}o.default=M},201:function(i,o,c){"use strict";let a=(this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}})(c(370));function u(l){return new a.default(l)}(function(l){l.HttpProxyAgent=a.default,l.prototype=a.default.prototype})(u||(u={})),i.exports=u},146:function(i,o,c){"use strict";var a=this&&this.__awaiter||function(v,I,F,C){return new(F||(F=Promise))(function(b,m){function y(T){try{S(C.next(T))}catch(w){m(w)}}function P(T){try{S(C.throw(T))}catch(w){m(w)}}function S(T){var w;T.done?b(T.value):(w=T.value,w instanceof F?w:new F(function(q){q(w)})).then(y,P)}S((C=C.apply(v,I||[])).next())})},u=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(o,"__esModule",{value:!0});let l=u(c(808)),p=u(c(404)),h=u(c(310)),d=u(c(491)),g=u(c(374)),E=c(54),N=u(c(829)),M=g.default("https-proxy-agent:agent");class O extends E.Agent{constructor(I){let F;if(F=typeof I=="string"?h.default.parse(I):I,!F)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");M("creating new HttpsProxyAgent instance: %o",F),super(F);let C=Object.assign({},F);var b;this.secureProxy=F.secureProxy||typeof(b=C.protocol)=="string"&&/^https:?$/i.test(b),C.host=C.hostname||C.host,typeof C.port=="string"&&(C.port=parseInt(C.port,10)),!C.port&&C.host&&(C.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in C)&&(C.ALPNProtocols=["http 1.1"]),C.host&&C.path&&(delete C.path,delete C.pathname),this.proxy=C}callback(I,F){return a(this,void 0,void 0,function*(){let{proxy:C,secureProxy:b}=this,m;b?(M("Creating `tls.Socket`: %o",C),m=p.default.connect(C)):(M("Creating `net.Socket`: %o",C),m=l.default.connect(C));let y=Object.assign({},C.headers),P=`CONNECT ${F.host}:${F.port} HTTP/1.1\r
`;C.auth&&(y["Proxy-Authorization"]=`Basic ${Buffer.from(C.auth).toString("base64")}`);let{host:S,port:T,secureEndpoint:w}=F;(function(V,G){return Boolean(!G&&V===80||G&&V===443)})(T,w)||(S+=`:${T}`),y.Host=S,y.Connection="close";for(let V of Object.keys(y))P+=`${V}: ${y[V]}\r
`;let q=N.default(m);m.write(`${P}\r
`);let{statusCode:K,buffered:re}=yield q;if(K===200){if(I.once("socket",_),F.secureEndpoint){M("Upgrading socket connection to TLS");let V=F.servername||F.host;return p.default.connect(Object.assign(Object.assign({},function(G,...k){let z={},Z;for(Z in G)k.includes(Z)||(z[Z]=G[Z]);return z}(F,"host","hostname","path","port")),{socket:m,servername:V}))}return m}m.destroy();let W=new l.default.Socket({writable:!1});return W.readable=!0,I.once("socket",V=>{M("replaying proxy buffer for failed request"),d.default(V.listenerCount("data")>0),V.push(re),V.push(null)}),W})}}function _(v){v.resume()}o.default=O},18:function(i,o,c){"use strict";let a=(this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}})(c(146));function u(l){return new a.default(l)}(function(l){l.HttpsProxyAgent=a.default,l.prototype=a.default.prototype})(u||(u={})),i.exports=u},829:function(i,o,c){"use strict";var a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(o,"__esModule",{value:!0});let u=a(c(374)).default("https-proxy-agent:parse-proxy-response");o.default=function(l){return new Promise((p,h)=>{let d=0,g=[];function E(){let O=l.read();O?function(_){g.push(_),d+=_.length;let v=Buffer.concat(g,d);if(v.indexOf(`\r
\r
`)===-1)return u("have not received end of HTTP headers yet..."),void E();let I=v.toString("ascii",0,v.indexOf(`\r
`)),F=+I.split(" ")[1];u("got proxy server response: %o",I),p({statusCode:F,buffered:v})}(O):l.once("readable",E)}function N(O){u("onclose had error %o",O)}function M(){u("onend")}l.on("error",function O(_){l.removeListener("end",M),l.removeListener("error",O),l.removeListener("close",N),l.removeListener("readable",E),u("onerror %o",_),h(_)}),l.on("close",N),l.on("end",M),E()})}},539:function(i,o,c){"use strict";var a,u=this&&this.__extends||(a=function(b,m){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,P){y.__proto__=P}||function(y,P){for(var S in P)Object.prototype.hasOwnProperty.call(P,S)&&(y[S]=P[S])},a(b,m)},function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function y(){this.constructor=b}a(b,m),b.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}),l=this&&this.__assign||function(){return l=Object.assign||function(b){for(var m,y=1,P=arguments.length;y<P;y++)for(var S in m=arguments[y])Object.prototype.hasOwnProperty.call(m,S)&&(b[S]=m[S]);return b},l.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.getErrorStatusDescription=o.xhr=o.configure=void 0;var p=c(685),h=c(687),d=c(310),g=c(472),E=c(796),N=c(201),M=c(18);if(process.env.VSCODE_NLS_CONFIG){var O=process.env.VSCODE_NLS_CONFIG;g.config(JSON.parse(O))}var _=g.loadMessageBundle(),v=void 0,I=!0;function F(b){var m;return new Promise(function(y,P){var S=(0,d.parse)(b.url),T={hostname:S.hostname,agent:!!b.agent&&b.agent,port:S.port?parseInt(S.port):S.protocol==="https:"?443:80,path:S.path,method:b.type||"GET",headers:b.headers,rejectUnauthorized:typeof b.strictSSL!="boolean"||b.strictSSL};b.user&&b.password&&(T.auth=b.user+":"+b.password);var w=function(q){if(q.statusCode>=300&&q.statusCode<400&&b.followRedirects&&b.followRedirects>0&&q.headers.location){var K=q.headers.location;K.startsWith("/")&&(K=(0,d.format)({protocol:S.protocol,hostname:S.hostname,port:S.port,pathname:K})),y(F(function(re){for(var W=[],V=1;V<arguments.length;V++)W[V-1]=arguments[V];return W.forEach(function(G){return Object.keys(G).forEach(function(k){return re[k]=G[k]})}),re}({},b,{url:K,followRedirects:b.followRedirects-1})))}else y({req:m,res:q})};(m=S.protocol==="https:"?h.request(T,w):p.request(T,w)).on("error",P),b.timeout&&m.setTimeout(b.timeout),b.data&&m.write(b.data),m.end(),b.token&&(b.token.isCancellationRequested&&m.destroy(new C),b.token.onCancellationRequested(function(){m.destroy(new C)}))})}o.configure=function(b,m){v=b,I=m},o.xhr=function(b){return typeof(b=l({},b)).strictSSL!="boolean"&&(b.strictSSL=I),b.agent||(b.agent=function(m,y){y===void 0&&(y={});var P=(0,d.parse)(m),S=y.proxyUrl||function(q){return q.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:q.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(P);if(!S)return null;var T=(0,d.parse)(S);if(!/^https?:$/.test(T.protocol))return null;var w={host:T.hostname,port:Number(T.port),auth:T.auth,rejectUnauthorized:typeof y.strictSSL!="boolean"||y.strictSSL,protocol:T.protocol};return P.protocol==="http:"?N(w):M(w)}(b.url,{proxyUrl:v,strictSSL:I})),typeof b.followRedirects!="number"&&(b.followRedirects=5),F(b).then(function(m){return new Promise(function(y,P){var S,T,w=m.res,q=w,K=!1,re=w.headers&&w.headers["content-encoding"];if(re&&(S=b.type,T=m.res.statusCode,!(S==="HEAD"||T>=100&&T<200||T===204||T===304))){var W={flush:E.constants.Z_SYNC_FLUSH,finishFlush:E.constants.Z_SYNC_FLUSH};if(re==="gzip"){var V=E.createGunzip(W);w.pipe(V),q=V}else if(re==="deflate"){var G=E.createInflate(W);w.pipe(G),q=G}}var k=[];q.on("data",function(z){return k.push(z)}),q.on("end",function(){if(!K){if(K=!0,b.followRedirects>0&&(w.statusCode>=300&&w.statusCode<=303||w.statusCode===307)){var z=w.headers.location;if(z.startsWith("/")){var Z=(0,d.parse)(b.url);z=(0,d.format)({protocol:Z.protocol,hostname:Z.hostname,port:Z.port,pathname:z})}if(z){var ns={type:b.type,url:z,user:b.user,password:b.password,headers:b.headers,timeout:b.timeout,followRedirects:b.followRedirects-1,data:b.data,token:b.token};return void(0,o.xhr)(ns).then(y,P)}}var Et=Buffer.concat(k),Be={responseText:Et.toString(),body:Et,status:w.statusCode,headers:w.headers||{}};w.statusCode>=200&&w.statusCode<300||w.statusCode===1223?y(Be):P(Be)}}),q.on("error",function(z){var Z;Z=C.is(z)?z:{responseText:_("error","Unable to access {0}. Error: {1}",b.url,z.message),body:Buffer.concat(k),status:500,headers:{}},K=!0,P(Z)}),b.token&&(b.token.isCancellationRequested&&q.destroy(new C),b.token.onCancellationRequested(function(){q.destroy(new C)}))})},function(m){var y;return y=C.is(m)?m:{responseText:b.agent?_("error.cannot.connect.proxy","Unable to connect to {0} through a proxy. Error: {1}",b.url,m.message):_("error.cannot.connect","Unable to connect to {0}. Error: {1}",b.url,m.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(y)})},o.getErrorStatusDescription=function(b){if(!(b<400))switch(b){case 400:return _("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return _("status.401","Unauthorized. The server is refusing to respond.");case 403:return _("status.403","Forbidden. The server is refusing to respond.");case 404:return _("status.404","Not Found. The requested location could not be found.");case 405:return _("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return _("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return _("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return _("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return _("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return _("status.410","Gone. The requested page is no longer available.");case 411:return _("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return _("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return _("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return _("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return _("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return _("status.500","Internal Server Error.");case 501:return _("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 502:return _("status.502","Bad Gateway. The upstream server did not respond.");case 503:return _("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return _("status.416","HTTP status code {0}",b)}};var C=function(b){function m(){var y=b.call(this,"The user aborted a request")||this;return y.name="AbortError",Object.setPrototypeOf(y,m.prototype),y}return u(m,b),m.is=function(y){return y instanceof m},m}(Error)},800:(i,o,c)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.config=o.loadMessageBundle=o.localize=o.format=o.setPseudo=o.isPseudo=o.isDefined=o.BundleFormat=o.MessageFormat=void 0;var a,u,l,p=c(926);function h(g){return g!==void 0}function d(g,E){return o.isPseudo&&(g="\uFF3B"+g.replace(/[aouei]/g,"$&$&")+"\uFF3D"),E.length===0?g:g.replace(/\{(\d+)\}/g,function(N,M){var O=M[0],_=E[O],v=N;return typeof _=="string"?v=_:typeof _!="number"&&typeof _!="boolean"&&_!=null||(v=String(_)),v})}(l=o.MessageFormat||(o.MessageFormat={})).file="file",l.bundle="bundle",l.both="both",(u=o.BundleFormat||(o.BundleFormat={})).standalone="standalone",u.languagePack="languagePack",function(g){g.is=function(E){var N=E;return N&&h(N.key)&&h(N.comment)}}(a||(a={})),o.isDefined=h,o.isPseudo=!1,o.setPseudo=function(g){o.isPseudo=g},o.format=d,o.localize=function(g,E){for(var N=[],M=2;M<arguments.length;M++)N[M-2]=arguments[M];return d(E,N)},o.loadMessageBundle=function(g){return(0,p.default)().loadMessageBundle(g)},o.config=function(g){return(0,p.default)().config(g)}},926:(i,o)=>{"use strict";var c;function a(){if(c===void 0)throw new Error("No runtime abstraction layer installed");return c}Object.defineProperty(o,"__esModule",{value:!0}),function(u){u.install=function(l){if(l===void 0)throw new Error("No runtime abstraction layer provided");c=l}}(a||(a={})),o.default=a},472:(i,o,c)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.config=o.loadMessageBundle=o.BundleFormat=o.MessageFormat=void 0;var a=c(17),u=c(147),l=c(926),p=c(800),h=c(800);Object.defineProperty(o,"MessageFormat",{enumerable:!0,get:function(){return h.MessageFormat}}),Object.defineProperty(o,"BundleFormat",{enumerable:!0,get:function(){return h.BundleFormat}});var d,g,E=Object.prototype.toString;function N(m){return E.call(m)==="[object Number]"}function M(m){return E.call(m)==="[object String]"}function O(m){return JSON.parse(u.readFileSync(m,"utf8"))}function _(m){return function(y,P){for(var S=[],T=2;T<arguments.length;T++)S[T-2]=arguments[T];return N(y)?y>=m.length?void console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack)):(0,p.format)(m[y],S):M(P)?(console.warn("Message ".concat(P," didn't get externalized correctly.")),(0,p.format)(P,S)):void console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}function v(m,y){return d[m]=y,y}function I(m){try{return function(y){var P=O(a.join(y,"nls.metadata.json")),S=Object.create(null);for(var T in P){var w=P[T];S[T]=w.messages}return S}(m)}catch(y){return void console.log("Generating default bundle from meta data failed.",y)}}function F(m,y){var P;if(g.languagePackSupport===!0&&g.cacheRoot!==void 0&&g.languagePackId!==void 0&&g.translationsConfigFile!==void 0&&g.translationsConfig!==void 0)try{P=function(T,w){var q,K,re,W=a.join(g.cacheRoot,"".concat(T.id,"-").concat(T.hash,".json")),V=!1,G=!1;try{return q=JSON.parse(u.readFileSync(W,{encoding:"utf8",flag:"r"})),K=W,re=new Date,u.utimes(K,re,re,function(){}),q}catch(k){if(k.code==="ENOENT")G=!0;else{if(!(k instanceof SyntaxError))throw k;console.log("Syntax error parsing message bundle: ".concat(k.message,".")),u.unlink(W,function(z){z&&console.error("Deleting corrupted bundle ".concat(W," failed."))}),V=!0}}if(q=function(k,z){var Z=g.translationsConfig[k.id];if(Z){var ns=O(Z).contents,Et=O(a.join(z,"nls.metadata.json")),Be=Object.create(null);for(var Bt in Et){var Gt=Et[Bt],Bn=ns["".concat(k.outDir,"/").concat(Bt)];if(Bn){for(var Gn=[],Xt=0;Xt<Gt.keys.length;Xt++){var is=Gt.keys[Xt],os=Bn[M(is)?is:is.key];os===void 0&&(os=Gt.messages[Xt]),Gn.push(os)}Be[Bt]=Gn}else Be[Bt]=Gt.messages}return Be}}(T,w),!q||V)return q;if(G)try{u.writeFileSync(W,JSON.stringify(q),{encoding:"utf8",flag:"wx"})}catch(k){if(k.code==="EEXIST")return q;throw k}return q}(m,y)}catch(T){console.log("Load or create bundle failed ",T)}if(!P){if(g.languagePackSupport)return I(y);var S=function(T){for(var w=g.language;w;){var q=a.join(T,"nls.bundle.".concat(w,".json"));if(u.existsSync(q))return q;var K=w.lastIndexOf("-");w=K>0?w.substring(0,K):void 0}if(w===void 0&&(q=a.join(T,"nls.bundle.json"),u.existsSync(q)))return q}(y);if(S)try{return O(S)}catch(T){console.log("Loading in the box message bundle failed.",T)}P=I(y)}return P}function C(m){if(!m)return p.localize;var y=a.extname(m);if(y&&(m=m.substr(0,m.length-y.length)),g.messageFormat===p.MessageFormat.both||g.messageFormat===p.MessageFormat.bundle){var P=function(V){for(var G,k=a.dirname(V);G=a.join(k,"nls.metadata.header.json"),!u.existsSync(G);){var z=a.dirname(k);if(z===k){G=void 0;break}k=z}return G}(m);if(P){var S=a.dirname(P),T=d[S];if(T===void 0)try{var w=JSON.parse(u.readFileSync(P,"utf8"));try{var q=F(w,S);T=v(S,q?{header:w,nlsBundle:q}:null)}catch(V){console.error("Failed to load nls bundle",V),T=v(S,null)}}catch(V){console.error("Failed to read header file",V),T=v(S,null)}if(T){var K=m.substr(S.length+1).replace(/\\/g,"/"),re=T.nlsBundle[K];return re===void 0?(console.error("Messages for file ".concat(m," not found. See console for details.")),function(){return"Messages not found."}):_(re)}}}if(g.messageFormat===p.MessageFormat.both||g.messageFormat===p.MessageFormat.file)try{var W=O(function(V){var G;if(!(g.cacheLanguageResolution&&G)){if(p.isPseudo||!g.language)G=".nls.json";else for(var k=g.language;k;){var z=".nls."+k+".json";if(u.existsSync(V+z)){G=z;break}var Z=k.lastIndexOf("-");Z>0?k=k.substring(0,Z):(G=".nls.json",k=null)}g.cacheLanguageResolution}return V+G}(m));return Array.isArray(W)?_(W):(0,p.isDefined)(W.messages)&&(0,p.isDefined)(W.keys)?_(W.messages):(console.error("String bundle '".concat(m,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(V){V.code!=="ENOENT"&&console.error("Failed to load single file bundle",V)}return console.error("Failed to load message bundle for file ".concat(m)),function(){return"Failed to load message bundle. See console for details."}}function b(m){return m&&(M(m.locale)&&(g.locale=m.locale.toLowerCase(),g.language=g.locale,d=Object.create(null)),m.messageFormat!==void 0&&(g.messageFormat=m.messageFormat),m.bundleFormat===p.BundleFormat.standalone&&g.languagePackSupport===!0&&(g.languagePackSupport=!1)),(0,p.setPseudo)(g.locale==="pseudo"),C}(function(){if(g={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:p.MessageFormat.bundle},M(process.env.VSCODE_NLS_CONFIG))try{var m=JSON.parse(process.env.VSCODE_NLS_CONFIG),y=void 0;if(m.availableLanguages){var P=m.availableLanguages["*"];M(P)&&(y=P)}if(M(m.locale)&&(g.locale=m.locale.toLowerCase()),y===void 0?g.language=g.locale:y!=="en"&&(g.language=y),function(T){return T===!0||T===!1}(m._languagePackSupport)&&(g.languagePackSupport=m._languagePackSupport),M(m._cacheRoot)&&(g.cacheRoot=m._cacheRoot),M(m._languagePackId)&&(g.languagePackId=m._languagePackId),M(m._translationsConfigFile)){g.translationsConfigFile=m._translationsConfigFile;try{g.translationsConfig=O(g.translationsConfigFile)}catch{if(m._corruptedFile){var S=a.dirname(m._corruptedFile);u.exists(S,function(w){w&&u.writeFile(m._corruptedFile,"corrupted","utf8",function(q){console.error(q)})})}}}}catch{}(0,p.setPseudo)(g.locale==="pseudo"),d=Object.create(null)})(),o.loadMessageBundle=C,o.config=b,l.default.install(Object.freeze({loadMessageBundle:C,config:b}))},374:(i,o)=>{function c(){}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(a){return c}},491:i=>{"use strict";i.exports=require("assert")},361:i=>{"use strict";i.exports=require("events")},147:i=>{"use strict";i.exports=require("fs")},685:i=>{"use strict";i.exports=require("http")},687:i=>{"use strict";i.exports=require("https")},808:i=>{"use strict";i.exports=require("net")},17:i=>{"use strict";i.exports=require("path")},404:i=>{"use strict";i.exports=require("tls")},310:i=>{"use strict";i.exports=require("url")},796:i=>{"use strict";i.exports=require("zlib")}},e={},t=function i(o){var c=e[o];if(c!==void 0)return c.exports;var a=e[o]={exports:{}};return s[o].call(a.exports,a,a.exports,i),a.exports}(539),r=Ac;for(var n in t)r[n]=t[n];t.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})()});var wc=f(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.RequestService=ct.RestHttpMethodEnum=void 0;var Pc=Ic(),$e=et(),Un;(function(s){s.Delete="DELETE",s.Get="GET",s.Post="POST"})(Un||(ct.RestHttpMethodEnum=Un={}));var Hn=class{constructor(){this._proxyStrictSSL=!1,this._connectionTimeoutMs=$e.DEFAULT_CONNECTION_TIMEOUT_MS}getEnvVars(){let e=Object.assign({},process.env),t=this.proxyUrl;t&&(e[$e.ENV_HTTP_PROXY]=t,e[$e.ENV_HTTPS_PROXY]=t);let r=this.instanceUrl;r&&(e[$e.ENV_SF_ORG_INSTANCE_URL]=r);let n=this.accessToken;return n&&(e[$e.ENV_SF_TARGET_ORG]=n),e}get instanceUrl(){return this._instanceUrl}set instanceUrl(e){this._instanceUrl=e}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e}get proxyUrl(){return this._proxyUrl}set proxyUrl(e){this._proxyUrl=e}get proxyStrictSSL(){return this._proxyStrictSSL}set proxyStrictSSL(e){this._proxyStrictSSL=e}get proxyAuthorization(){return this._proxyAuthorization}set proxyAuthorization(e){this._proxyAuthorization=e}get connectionTimeoutMs(){return this._connectionTimeoutMs||$e.DEFAULT_CONNECTION_TIMEOUT_MS}set connectionTimeoutMs(e){this._connectionTimeoutMs=e}async execute(e,t=Un.Post){this.proxyUrl&&(0,Pc.configure)(this._proxyUrl,this._proxyStrictSSL);let r=[this.instanceUrl,e.getCommandUrl()],n=e.getQueryString(),i=n?r.join("/").concat("?",n):r.join("/"),o=e.getRequest(),c={type:t,url:i,timeout:this.connectionTimeoutMs,headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/json",Authorization:`OAuth ${this.accessToken}`,"Content-Length":o?String(Buffer.byteLength(o,"utf-8")):"0","Sforce-Call-Options":`client=${$e.CLIENT_ID}`},data:o};this.proxyAuthorization&&c.headers&&(c.headers["Proxy-Authorization"]=this.proxyAuthorization);try{let a=await this.sendRequest(c);return Promise.resolve(a.responseText)}catch(a){let u=a;return Promise.reject(u.responseText)}}async sendRequest(e){return(0,Pc.xhr)(e)}};ct.RequestService=Hn});var Dc=f(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.RestHttpMethodEnum=Ce.RequestService=Ce.BaseCommand=void 0;var Ig=Cc();Object.defineProperty(Ce,"BaseCommand",{enumerable:!0,get:function(){return Ig.BaseCommand}});var Nc=wc();Object.defineProperty(Ce,"RequestService",{enumerable:!0,get:function(){return Nc.RequestService}});Object.defineProperty(Ce,"RestHttpMethodEnum",{enumerable:!0,get:function(){return Nc.RestHttpMethodEnum}})});var qc=f(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0})});var Mc=f(je=>{"use strict";var Pg=je&&je.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),wg=je&&je.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Pg(e,s,t)};Object.defineProperty(je,"__esModule",{value:!0});wg(qc(),je)});var qt=f(pe=>{"use strict";var Ng=pe&&pe.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),ke=pe&&pe.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ng(e,s,t)};Object.defineProperty(pe,"__esModule",{value:!0});ke(qt(),pe);ke(yc(),pe);ke(et(),pe);ke(xc(),pe);ke(Oc(),pe);ke(Dc(),pe);ke(Mc(),pe)});var Uc=f((kc,Kr)=>{(function(s){if(typeof Kr=="object"&&typeof Kr.exports=="object"){var e=s(require,kc);e!==void 0&&(Kr.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],s)})(function(s,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function t(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()}function r(a){return encodeURIComponent(a).replace(/[!'()*]/g,t)}function n(a){return a.replace(/[#?]/,t)}var i=function(){function a(){this._scheme=a._empty,this._authority=a._empty,this._path=a._empty,this._query=a._empty,this._fragment=a._empty,this._formatted=null,this._fsPath=null}return a.isUri=function(u){return u instanceof a?!0:u?typeof u.authority=="string"&&typeof u.fragment=="string"&&typeof u.path=="string"&&typeof u.query=="string"&&typeof u.scheme=="string":!1},Object.defineProperty(a.prototype,"scheme",{get:function(){return this._scheme},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"authority",{get:function(){return this._authority},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"query",{get:function(){return this._query},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fragment",{get:function(){return this._fragment},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fsPath",{get:function(){if(!this._fsPath){var u;this._authority&&this._path&&this.scheme==="file"?u="//"+this._authority+this._path:a._driveLetterPath.test(this._path)?u=this._path[1].toLowerCase()+this._path.substr(2):u=this._path,o&&(u=u.replace(/\//g,"\\")),this._fsPath=u}return this._fsPath},enumerable:!0,configurable:!0}),a.prototype.with=function(u){if(!u)return this;var l=u.scheme,p=u.authority,h=u.path,d=u.query,g=u.fragment;if(l===void 0?l=this.scheme:l===null&&(l=""),p===void 0?p=this.authority:p===null&&(p=""),h===void 0?h=this.path:h===null&&(h=""),d===void 0?d=this.query:d===null&&(d=""),g===void 0?g=this.fragment:g===null&&(g=""),l===this.scheme&&p===this.authority&&h===this.path&&d===this.query&&g===this.fragment)return this;var E=new a;return E._scheme=l,E._authority=p,E._path=h,E._query=d,E._fragment=g,a._validate(E),E},a.parse=function(u){var l=new a,p=a._parseComponents(u);return l._scheme=p.scheme,l._authority=decodeURIComponent(p.authority),l._path=decodeURIComponent(p.path),l._query=decodeURIComponent(p.query),l._fragment=decodeURIComponent(p.fragment),a._validate(l),l},a.file=function(u){var l=new a;if(l._scheme="file",o&&(u=u.replace(/\\/g,a._slash)),u[0]===a._slash&&u[0]===u[1]){var p=u.indexOf(a._slash,2);p===-1?l._authority=u.substring(2):(l._authority=u.substring(2,p),l._path=u.substring(p))}else l._path=u;return l._path[0]!==a._slash&&(l._path=a._slash+l._path),a._validate(l),l},a._parseComponents=function(u){var l={scheme:a._empty,authority:a._empty,path:a._empty,query:a._empty,fragment:a._empty},p=a._regexp.exec(u);return p&&(l.scheme=p[2]||l.scheme,l.authority=p[4]||l.authority,l.path=p[5]||l.path,l.query=p[7]||l.query,l.fragment=p[9]||l.fragment),l},a.from=function(u){return new a().with(u)},a._validate=function(u){if(u.scheme&&!a._schemePattern.test(u.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(u.path){if(u.authority){if(!a._singleSlashStart.test(u.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a._doubleSlashStart.test(u.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}},a.prototype.toString=function(u){return u===void 0&&(u=!1),u?a._asFormatted(this,!0):(this._formatted||(this._formatted=a._asFormatted(this,!1)),this._formatted)},a._asFormatted=function(u,l){var p=l?n:r,h=[],d=u.scheme,g=u.authority,E=u.path,N=u.query,M=u.fragment;if(d&&h.push(d,":"),(g||d==="file")&&h.push("//"),g){g=g.toLowerCase();var O=g.indexOf(":");O===-1?h.push(p(g)):h.push(p(g.substr(0,O)),g.substr(O))}if(E){var _=a._upperCaseDrive.exec(E);_&&(_[1]?E="/"+_[2].toLowerCase()+E.substr(3):E=_[2].toLowerCase()+E.substr(2));for(var v=0;;){var O=E.indexOf(a._slash,v);if(O===-1){h.push(p(E.substring(v)));break}h.push(p(E.substring(v,O)),a._slash),v=O+1}}return N&&h.push("?",p(N)),M&&h.push("#",p(M)),h.join(a._empty)},a.prototype.toJSON=function(){var u={fsPath:this.fsPath,external:this.toString(),$mid:1};return this.path&&(u.path=this.path),this.scheme&&(u.scheme=this.scheme),this.authority&&(u.authority=this.authority),this.query&&(u.query=this.query),this.fragment&&(u.fragment=this.fragment),u},a.revive=function(u){var l=new a;return l._scheme=u.scheme||a._empty,l._authority=u.authority||a._empty,l._path=u.path||a._empty,l._query=u.query||a._empty,l._fragment=u.fragment||a._empty,l._fsPath=u.fsPath,l._formatted=u.external,a._validate(l),l},a}();i._empty="",i._slash="/",i._regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,i._driveLetterPath=/^\/[a-zA-z]:/,i._upperCaseDrive=/^(\/)?([A-Z]:)/,i._schemePattern=/^\w[\w\d+.-]*$/,i._singleSlashStart=/^\//,i._doubleSlashStart=/^\/\//,e.default=i;var o;if(typeof process=="object")o=process.platform==="win32";else if(typeof navigator=="object"){var c=navigator.userAgent;o=c.indexOf("Windows")>=0}})});var Vg={};nl(Vg,{ApexDebugStackFrameInfo:()=>Ue,ApexReplayDebug:()=>kt,ApexVariable:()=>Ut,ApexVariableContainer:()=>B,SCOPE_TYPES:()=>Qc,ScopeContainer:()=>bt,Step:()=>Kc,VariableContainer:()=>Ht});module.exports=il(Vg);var Jc=require("os"),U=Ee(yt());var me=class{constructor(){this.lineNumberMapping=new Map;this.typerefMapping=new Map}setValidLines(e,t){this.lineNumberMapping=e,this.typerefMapping=t}static getInstance(){return me.instance||(me.instance=new me),me.instance}static setInstance(e){me.instance=e}hasLineNumberMapping(){return this.lineNumberMapping&&this.lineNumberMapping.size>0}getLineNumberMapping(){return this.lineNumberMapping}getTyperefMapping(){return this.typerefMapping}canSetLineBreakpoint(e,t){return this.lineNumberMapping.has(e)&&this.lineNumberMapping.get(e).indexOf(t)!==-1}createMappingsFromLineBreakpointInfo(e){this.lineNumberMapping.clear(),this.typerefMapping.clear();for(let t of e)this.lineNumberMapping.has(t.uri)||this.lineNumberMapping.set(t.uri,[]),this.lineNumberMapping.set(t.uri,this.lineNumberMapping.get(t.uri).concat(t.lines)),this.typerefMapping.set(t.typeref,t.uri)}returnLinesForLoggingFromBreakpointArgs(e){return e.map(t=>t.line).join(",")}getTopLevelTyperefForUri(e){let t="";return this.typerefMapping.forEach((r,n)=>{if(r===e&&n.indexOf("$")===-1){t=n;return}}),t}};var Xe=me.getInstance();var oi="0x";var nr="CODE_UNIT_STARTED",ir="CODE_UNIT_FINISHED",or="CONSTRUCTOR_ENTRY",ar="CONSTRUCTOR_EXIT",ai="Execute Anonymous",ui="HEAP_DUMP",ci="METHOD_ENTRY",li="METHOD_EXIT",pi="STATEMENT_EXECUTE",hi="USER_DEBUG",ur="VF_APEX_CALL_START",cr="VF_APEX_CALL_END",fi="VARIABLE_SCOPE_BEGIN",di="VARIABLE_ASSIGNMENT",ze="execute_anonymous_apex";var gi="sendMetricError",mi="sendMetricLaunch";var bi="services/data/v43.0/tooling/sobjects";var St="__sfdc_trigger/",Vs="Trigger.",Ei="blob",$s="boolean",vi="date",_i="datetime",yi="decimal",Si="double",Ri="id",xi="integer",Li="long",ve="string",Ti="time",js="String",ks="KeyValuePair",Ye="key",We="value";var lr=class{constructor(e){this.logContext=e}replaceVariablesWithHeapDump(){let e=this.logContext.getTopFrame();e&&this.replaceFrameVariablesWithHeapDump(e)}replaceFrameVariablesWithHeapDump(e){let t=this.logContext.getHeapDumpForThisLocation(e.name,e.line);if(t&&t.getOverlaySuccessResult()){let r=t.getOverlaySuccessResult(),n=this.logContext.getFrameHandler().get(e.id);this.logContext.getRefsMap().clear(),this.logContext.getVariableHandler().reset(),this.createStringRefsFromHeapdump(r);for(let i of r.HeapDump.extents)if(!this.isPrimitiveType(i.typeName))for(let o of i.extent){let c=o.address,a=new B("","",i.typeName,c);this.updateLeafReferenceContainer(a,o,i.collectionType),this.logContext.getRefsMap().set(c,a)}for(let i of r.HeapDump.extents)for(let o of i.extent){let c=o.symbols&&o.symbols.length>0?o.symbols[0]:void 0,a=c?this.logContext.getUtil().substringUpToLastPeriod(c):void 0;if(c&&n.locals.has(c)){let u=n.locals.get(c);u.type=i.typeName;let l=this.logContext.getRefsMap().get(o.address);if(l)if(l.type===ve)u.value=l.value;else{let p=this.createVariableFromReference(c,l,new Map,new Array);p&&n.locals.set(u.name,p)}else u.value=this.createStringFromExtentValue(o.value.value)}else if(c&&a&&this.logContext.getStaticVariablesClassMap().has(a)){let u=this.logContext.getStaticVariablesClassMap().get(a),l=this.logContext.getUtil().substringFromLastPeriod(c);if(u&&u.has(l)){let p=u.get(l);p.type=i.typeName;let h=this.logContext.getRefsMap().get(o.address);if(h)if(h.type===ve)p.value=h.value;else{let d=this.createVariableFromReference(c,h,new Map,new Array);d&&u.set(p.name,d)}else p.value=this.createStringFromExtentValue(o.value.value)}}}if(this.logContext.isRunningApexTrigger()){for(let i of r.HeapDump.extents)if(this.isTriggerExtent(i)){for(let o of i.extent)if(o.symbols&&o.symbols.length>0){for(let c of o.symbols)if(c&&c.startsWith(Vs)){let a=this.logContext.getRefsMap().get(o.address);if(a){let u=this.createVariableFromReference(c,a,new Map,new Array);u&&n.globals.set(c,u)}else n.globals.set(c,new B(c,this.createStringFromExtentValue(o.value.value),i.typeName))}}}}}}createStringRefsFromHeapdump(e){let t=this.logContext.getRefsMap();for(let r of e.HeapDump.extents)if(r.typeName.toLowerCase()===ve)for(let n of r.extent){t.has(n.address)||t.set(n.address,new B("",n.value.value,js,n.address));let i=t.get(n.address);i.type=js,i.value=`'${n.value.value}'`}}isAddress(e){return typeof e=="string"&&e.startsWith(oi)}isTriggerExtent(e){return!!((e.typeName.toLowerCase()===$s||this.isCollectionType(e.typeName))&&e.count>0&&e.extent[0].symbols!==null&&e.extent[0].symbols.length>0&&e.extent[0].symbols[0].startsWith(Vs))}copyReferenceContainer(e,t,r=!0){let n=new B(t,e.value,e.type,e.ref);return n.variables=e.variables,this.isPrimitiveType(n.type)||(r?n.variablesRef=this.logContext.getVariableHandler().create(n):n.variablesRef=e.variablesRef),n}createStringFromVarContainer(e,t){if(!e.ref||e.type.toLowerCase()===ve)return e.value;if(e.ref){if(t.has(e.ref))return"already output";t.add(e.ref)}let r="";try{let n=e.type.toLowerCase().startsWith("list<")||e.type.toLowerCase().startsWith("set<"),i=this.isCollectionType(e.type)?"":`${e.type}:`;r=n?"(":`${i}{`;let o=!0;for(let c of Array.from(e.variables.entries())){let a=c[1];o||(r+=", "),a.ref?r+=this.createStringFromVarContainer(a,t):r+=n?a.value:`${a.name}=${a.value}`,o=!1}r+=n?")":"}"}finally{e.ref&&t.delete(e.ref)}return r}isPrimitiveType(e){let t=e.toLocaleLowerCase();return t===Ei||t===$s||t===vi||t===_i||t===yi||t===Si||t===Ri||t===xi||t===Li||t===ve||t===Ti}isCollectionType(e){return e.toLocaleLowerCase().startsWith("map<")||e.toLocaleLowerCase().startsWith("list<")||e.toLocaleLowerCase().startsWith("set<")}updateLeafReferenceContainer(e,t,r){let n="";r&&(n=r);let i=!1;if(this.isCollectionType(e.type))if(t.value.entry){let o=0,c=this.getKeyTypeForMap(e.type,r||"");for(let a of t.value.entry){let u=this.isAddress(a.keyDisplayValue),l=this.isAddress(a.value.value),p=`${Ye}${o.toString()}_${We}${o.toString()}`,h=new B(p,"",ks),d=new B(Ye,"",c);if(u){let E=this.logContext.getRefsMap().get(a.keyDisplayValue);E&&E.type.toLowerCase()===ve?(u=!1,d.value=E.value):(i=!0,d.ref=a.keyDisplayValue)}else d.value=a.keyDisplayValue.toString();let g=new B(We,"",n);if(l){let E=this.logContext.getRefsMap().get(a.value.value);E&&E.type.toLowerCase()===ve?(l=!1,g.value=E.value):(i=!0,g.ref=a.value.value)}else g.value=this.createStringFromExtentValue(a.value.value);h.variables.set(d.name,d),h.variables.set(g.name,g),!u&&!l&&(h.name=d.value,h.value=g.value),e.variables.set(p,h),o++}}else{let o=t.value.value;for(let c=0;c<o.length;c++)if(this.isAddress(o[c].value)){let a=o[c].value,u=this.logContext.getRefsMap().get(o[c].value);u&&u.type.toLowerCase()===ve?a=u.value:i=!0,e.variables.set(c.toString(),new B(c.toString(),a,n,o[c].value))}else e.variables.set(c.toString(),new B(c.toString(),this.createStringFromExtentValue(o[c].value),n))}else for(let o of t.value.entry)if(this.isAddress(o.value.value)){let a=o.value.value,u=this.logContext.getRefsMap().get(o.value.value);u&&u.type.toLowerCase()===ve?a=u.value:i=!0,e.variables.set(o.keyDisplayValue,new B(o.keyDisplayValue,a,"",o.value.value))}else e.variables.set(o.keyDisplayValue,new B(o.keyDisplayValue,this.createStringFromExtentValue(o.value.value),""));i||(e.value=this.createStringFromVarContainer(e,new Set))}createStringFromExtentValue(e){return e===void 0?"undefined":e===null?"null":e.toString()}createVariableFromReference(e,t,r,n){if(!!t.ref){if(r.has(t.ref)){let i=r.get(t.ref);if(i!==null)if(i.name!==e){let o=this.copyReferenceContainer(i,e,!1);return n.push(o),o}else return i;return}try{let i=this.copyReferenceContainer(t,e);r.set(t.ref,i);for(let o of Array.from(i.variables.entries())){let c=o[0],a=o[1];if(a.type===ks){let u=a.variables.get(Ye),l=u.value;if(u&&u.ref){let d=this.logContext.getRefsMap().get(u.ref);if(d){let g=this.createVariableFromReference(Ye,d,r,n);g&&(l=g.value,a.variables.set(Ye,g))}else u.value=u.ref,u.ref=void 0}let p=a.variables.get(We),h=p.value;if(p&&p.ref){let d=this.logContext.getRefsMap().get(p.ref);if(d){let g=this.createVariableFromReference(We,d,r,n);g&&(h=g.value,a.variables.set(We,g))}else p.value=p.ref,p.ref=void 0}a.name=l,a.value=h,a.variablesRef=this.logContext.getVariableHandler().create(a)}else{if(!a.ref)continue;let u=this.logContext.getRefsMap().get(a.ref);if(u){let l=this.createVariableFromReference(c,u,r,n);l&&i.variables.set(c,l)}else a.value=a.ref,a.ref=void 0}i.value=this.createStringFromVarContainer(i,new Set)}return i}finally{r.delete(t.ref),r.size===0&&n.forEach(i=>{let o=i;o.value=this.createStringFromVarContainer(o,new Set)})}}}getKeyTypeForMap(e,t){let r=","+t;return e.substring(e.indexOf("<")+1,e.lastIndexOf(r))}};var mt=Ee(qt()),zc=Ee(require("path"));var Vc=Ee(qt());var Mt=class extends Vc.BaseCommand{constructor(t){super(void 0);this.commandName="ApexExecutionOverlayResult";this.heapdumpKey=t}getCommandUrl(){return[bi,this.commandName,this.heapdumpKey].join("/")}getRequest(){}};var oe=Ee(qt());var $c={session_language_server_error_text:"Apex language server could not provide information about valid breakpoints.",session_started_text:"Apex Replay Debugger session started for log file %s.",session_terminated_text:"Apex Replay Debugger session terminated.",no_log_file_text:"The log file either is missing or does not have any log lines in it.",incorrect_log_levels_text:"The log must be generated with log categories Apex code at the FINEST level and Visualforce at the FINER level.",unable_to_retrieve_org_info:"Unable to retrieve OrgInfo",heap_dump_error:"Problems were encountered while retrieving heap dump information. Message=%s, Error code=%s, Heap dump information=%s",heap_dump_error_wrap_up_text:"Problems were encountered while retrieving heap dump information. See the messages above this one for details. Detailed heap dump variable information is unavailable for the specified line or lines.",fetching_heap_dump:"Retrieving heap dump from server. Heap dump information=%s",malformed_log_line:"Encountered a malformed HEAP_DUMP log line, skipping. Log line number=%d, log line='%s'.",reconcile_heapdump_error:'Problems were encountered while using a heap dump: %s. Use Tooling API to delete the ApexExecutionOverlayResult record with the ID %s: From a terminal, run "sf data:delete:record -t -s ApexExecutionOverlayResult -i %s".'};var jc={session_language_server_error_text:"Apex \u8A00\u8A9E\u30B5\u30FC\u30D0\u306F\u6709\u52B9\u306A\u30D6\u30EC\u30FC\u30AF\u30DD\u30A4\u30F3\u30C8\u306B\u95A2\u3059\u308B\u60C5\u5831\u3092\u63D0\u4F9B\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",session_started_text:"Apex Replay Debugger \u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u30ED\u30B0\u30D5\u30A1\u30A4\u30EB %s \u3067\u958B\u59CB\u3057\u307E\u3057\u305F\u3002",session_terminated_text:"Apex Replay Debugger \u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002",no_log_file_text:"\u30ED\u30B0\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u304B\u3001\u30D5\u30A1\u30A4\u30EB\u306B\u30ED\u30B0\u306E\u884C\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u305B\u3093\u3002",incorrect_log_levels_text:"\u30ED\u30B0\u306F\u3001\u30ED\u30B0\u30AB\u30C6\u30B4\u30EA\u3092 Apex \u304C FINEST \u30EC\u30D9\u30EB\u306B\u3001Visualforce \u304C FINER \u30EC\u30D9\u30EB\u3067\u751F\u6210\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002",unable_to_retrieve_org_info:"OrgInfo \u306E\u53D6\u5F97\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",heap_dump_error:"\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u30E1\u30C3\u30BB\u30FC\u30B8=%s, \u30A8\u30E9\u30FC\u30B3\u30FC\u30C9=%s, \u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831=%s",heap_dump_error_wrap_up_text:"\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001\u4E0A\u8A18\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u6307\u5B9A\u3055\u308C\u305F\u884C\u306B\u3064\u3044\u3066\u3001\u8A73\u7D30\u306A\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u5909\u6570\u306E\u60C5\u5831\u304C\u4F7F\u7528\u3067\u304D\u307E\u305B\u3093\u3002",fetching_heap_dump:"\u30B5\u30FC\u30D0\u304B\u3089\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3057\u3066\u3044\u307E\u3059\u3002\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831=%s",malformed_log_line:"\u4E0D\u6B63\u306A HEAP_DUMP \u306E\u30ED\u30B0\u306E\u884C\u304C\u898B\u3064\u304B\u308A\u307E\u3057\u305F\u3002\u3053\u306E\u884C\u3092\u30B9\u30AD\u30C3\u30D7\u3057\u307E\u3059\u3002\u30ED\u30B0\u306E\u884C\u756A\u53F7=%d\u3001\u30ED\u30B0\u306E\u884C='%s'",reconcile_heapdump_error:'\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F: %s\u3002 Tooling API \u3092\u4F7F\u7528\u3057\u3066 ApexExecutionOverlayResult \u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u306E\u30EC\u30B3\u30FC\u30C9 (ID %s) \u3092\u524A\u9664\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u30BF\u30FC\u30DF\u30CA\u30EB\u304B\u3089\u3001"sf data:delete:record -t -s ApexExecutionOverlayResult -i %s" \u3092\u5B9F\u884C\u3057\u3066\u304F\u3060\u3055\u3044\u3002'};function Dg(s){function e(r){return r===oe.DEFAULT_LOCALE?`${oe.BASE_FILE_NAME}.${oe.BASE_FILE_EXTENSION}`:`${oe.BASE_FILE_NAME}.${r}.${oe.BASE_FILE_EXTENSION}`}let t=new oe.Message($c);if(s&&s.locale&&s.locale!==oe.DEFAULT_LOCALE){if(s.locale==="ja")return new oe.Message(jc,t);console.error(`Cannot find ${s.locale}, defaulting to en`)}return t}var ae=new oe.Localization(Dg(process.env.VSCODE_NLS_CONFIG?JSON.parse(process.env.VSCODE_NLS_CONFIG):void 0));var Hc=require("path"),Qr=Ee(yt()),Bc=Ee(Uc());var Ae=class{static computeFrameName(e){let t=e[e.length-1],r=" invoke\\((.*)\\)",n="";switch(e[1]){case nr:case ir:t.startsWith(St)?n=t.substring(St.length):n=t;break;case or:case ar:t.lastIndexOf(".")>=0?n=t+"."+t.substr(t.lastIndexOf(".")+1):t.lastIndexOf("/")>=0?n=t+"."+t.substring(t.lastIndexOf("/")+1):n=t+"."+t;break;case ur:case cr:n=t;let i=e[e.length-2].match(r);i!=null&&i.length>=2&&(n+="."+i[1],i[1].endsWith(")")||(n+="()"));break;default:n=t}return n}static isExtraneousVFGetterOrSetterLogLine(e){let t=" get\\((.*)\\)",r=" set\\((.*)\\)";return!(e.match(t)==null&&e.match(r)==null)}};var lt=class{constructor(e){this._signature=e[e.length-1],this._frameName=Ae.computeFrameName(e)}};var pt=class extends lt{constructor(e){super(e)}handle(e){let t=e.getUriFromSignature(this._signature),r=new Ue(e.getFrames().length,this._signature),n=e.getFrameHandler().create(r),i=this._signature.indexOf(".")>-1?this._signature.substring(0,this._signature.lastIndexOf(".")):this._signature;return e.getStaticVariablesClassMap().has(i)?r.statics=e.getStaticVariablesClassMap().get(i):e.getStaticVariablesClassMap().set(i,r.statics),e.getFrames().push(new Qr.StackFrame(n,this._frameName,t?new Qr.Source((0,Hc.basename)(t),Bc.default.parse(t).fsPath):void 0,void 0)),!1}};var ht=class extends lt{constructor(e){super(e)}handle(e){for(;e.hasFrames();){let t=e.getTopFrame();if(t&&(e.getFrames().pop(),t.name===this._frameName||t.name.startsWith(this._frameName)))break}return!1}};var Zr=Ee(yt()),ft=class{handle(e){let t=e.getLogFileName();return e.getFrames().push(new Zr.StackFrame(0,"",new Zr.Source(t,e.getLogFilePath()),e.getLogLinePosition()+1)),!0}};var Ie=class{handle(e){return!1}};var Vt=class{constructor(e){this.line=parseInt(e[e.length-1],10)}handle(e){let t=e.getTopFrame();return t&&(t.line=t.name===ze?e.getExecAnonScriptLocationInDebugLog(this.line):this.line),!0}};var Gc=require("os");var Xc=Ee(yt()),dt=class{constructor(e){this.line=parseInt(e[2],10),this.message=e[e.length-1]}getMessage(){return this.message}handle(e){this.lookAheadAndAppend(e);let t=e.getTopFrame();return t&&e.getSession().warnToDebugConsole(this.message,t.source instanceof Xc.Source?t.source:void 0,t.name===ze?e.getExecAnonScriptLocationInDebugLog(this.line):this.line),!1}lookAheadAndAppend(e){for(let t=e.getLogLinePosition()+1;t<e.getLogLines().length;t++){let r=e.getLogLines()[t];if(r.split("|").length>=3)break;this.message=`${this.message}${Gc.EOL}${r}`,e.incrementLogLinePosition()}}};var $t=class{constructor(e){this.fields=e}handle(e){let t=e.getTopFrame();if(t){let r=t.id,n=e.getFrameHandler().get(r),i=this.fields[3],o=this.fields[4],c=this.fields[6]==="true",a=e.getUtil().substringUpToLastPeriod(i);a&&!e.getStaticVariablesClassMap().has(a)&&e.getStaticVariablesClassMap().set(a,new Map);let u=e.getStaticVariablesClassMap().get(a);if(c){let l=e.getUtil().substringFromLastPeriod(i);u.set(l,new B(l,"null",o))}else n.locals.has(i)||n.locals.set(i,new B(i,"null",o))}return!1}};var jt=class{constructor(e){this.fields=e}handle(e){let t=e.getTopFrame();if(t){let r=t.id,n=e.getFrameHandler().get(r),i=this.fields[3],o=this.fields[3].split("."),c=i.indexOf(".")>-1?i.substring(0,i.lastIndexOf(".")):"",a=o.length>0?o[o.length-1]:i,u=this.fields[4].replace(/^"/,"'").replace(/"$/,"'"),l;this.fields.length===6&&(l=this.fields[5]);let p=e.getRefsMap(),h,d,g=!1;if(e.getStaticVariablesClassMap().has(c)?(d=e.getStaticVariablesClassMap().get(c),h=d.get(a)):c!=="this"&&n.locals.has(a)?(d=n.locals,h=d.get(a)):i.indexOf(".")!==-1&&(g=!0),l){p.has(l)||e.getRefsMap().set(l,new B("","","",l));let E=p.get(l);if(g)if(u==="{}")E.variables.set(a,new B(a,u,""));else if(u.indexOf("{")===0){let N=new B(a,"","");E.variables.set(a,N),N.variablesRef=e.getVariableHandler().create(N),this.parseJSONAndPopulate(u,N,e)}else if(p.has(u)){let N=p.get(u),M=this.copyReferenceContainer(N,a,e);E.variables.set(a,M)}else if(E.variables.has(a)){let N=E.variables.get(a);N.value=u}else E.variables.set(a,new B(a,u,""));else u.indexOf("{")===0?this.parseJSONAndPopulate(u,E,e):E.variables.set(a,new B(a,u,""));h&&this.isNotCollection(h)&&h.name!=="this"||h&&h.name==="this"&&!h.ref?(h.ref=l,h.value="",h.variables=E.variables,E.type=h.type,u==="{}"&&(h.value=u),h.variablesRef===0&&(h.value="",h.variablesRef=e.getVariableHandler().create(h))):h&&h.name!=="this"&&(h.value=u)}else h&&(h.value=u)}return!1}isNotCollection(e){return!e.type.startsWith("Map<")&&!e.type.startsWith("List<")&&!e.type.startsWith("Set<")}parseJSONAndPopulate(e,t,r){try{e=r.getUtil().surroundBlobsWithQuotes(e);let n=JSON.parse(e);Object.keys(n).forEach(i=>{let o=r.getRefsMap().get(String(n[i]));if(o){let c=this.copyReferenceContainer(o,i,r);t.variables.set(i,c)}else{let c=n[i];typeof c=="string"?(c="'"+c+"'",c=r.getUtil().removeQuotesFromBlob(c)):c=`${c}`,t.variables.set(i,new B(i,c,""))}})}catch{t.value=e,t.variablesRef=0,t.variables.clear()}}copyReferenceContainer(e,t,r){let n=new B(t,e.value,e.type,e.ref);return n.variables=e.variables,n.variablesRef=r.getVariableHandler().create(n),n}};var gt=class{constructor(e){this.START_HANDLE=1e3;this._handleMap=new Map;this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){let t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}copy(){let e=Object.assign(Object.create(Object.getPrototypeOf(this)));return e.START_HANDLE=this.START_HANDLE,e._nextHandle=this._nextHandle,e._handleMap=new Map,this._handleMap.forEach((t,r)=>{t.copy!=="undefined"&&e._handleMap.set(r,t.copy())}),e}};var es=class{constructor(e,t,r,n){this.toString=()=>`HeapDumpId: ${this.heapDumpId}, ClassName: ${this.className}, Namespace: ${this.namespace}, Line: ${this.line}`;this.heapDumpId=e,this.className=t,this.namespace=r,this.line=n}getHeapDumpId(){return this.heapDumpId}getClassName(){return this.className}getNamespace(){return this.namespace}getLine(){return this.line}getOverlaySuccessResult(){return this.overlaySuccessResut}setOverlaySuccessResult(e){this.overlaySuccessResut=e}};var rs=Ee(require("fs")),ts=class{getFileSize(e){try{return rs.statSync(e).size}catch{return 0}}readLogFile(e){try{return rs.readFileSync(e,"utf-8").trim().split(/\r?\n/)}catch{return[]}}stripBrackets(e){return e.replace("[","").replace("]","")}substringUpToLastPeriod(e){return e.substring(0,e.lastIndexOf("."))}substringFromLastPeriod(e){let t=e.split(".");return t.length>1?t[t.length-1]:e}surroundBlobsWithQuotes(e){return e.replace(/(BLOB\(\d+ bytes\))/g,'"$1"')}removeQuotesFromBlob(e){return e.replace(/'(BLOB\(\d+ bytes\))'/g,"$1")}};var ss=class{constructor(e,t){this.util=new ts;this.logLines=[];this.frameHandles=new gt;this.staticVariablesClassMap=new Map;this.refsMap=new Map;this.variableHandles=new gt;this.stackFrameInfos=[];this.logLinePosition=-1;this.execAnonMapping=new Map;this.apexHeapDumps=[];this.lastSeenHeapDumpClass="";this.lastSeenHeapDumpLine=-1;this.backupStackFrameInfos=this.stackFrameInfos;this.backupFrameHandles=this.frameHandles;this.backupRefsMap=this.refsMap;this.backupStaticVariablesClassMap=this.staticVariablesClassMap;this.backupVariableHandles=this.variableHandles;this.launchArgs=e,this.session=t,this.logLines=this.util.readLogFile(e.logFile),this.logSize=this.util.getFileSize(e.logFile)}getUtil(){return this.util}getLaunchArgs(){return this.launchArgs}getSession(){return this.session}getLogLines(){return this.logLines}getLogSize(){return this.logSize}hasLogLines(){return this.logLines&&this.logLines.length>0&&this.logLinePosition<this.logLines.length}meetsLogLevelRequirements(){return this.logLines&&this.logLines.length>0&&this.logLines[0].match(/(\d{2}.*APEX_CODE,FINEST;.*VISUALFORCE,FINER;.*|\d{2}.*APEX_CODE,FINEST;.*VISUALFORCE,FINEST;.*)/)!==null}getHeapDumps(){return this.apexHeapDumps}hasHeapDump(){return this.apexHeapDumps.length>0}getHeapDumpForThisLocation(e,t){for(let r of this.apexHeapDumps)if(e.includes(r.getClassName())&&t===r.getLine())return r}hasHeapDumpForTopFrame(){let e=this.getTopFrame();if(e){let t=this.getHeapDumpForThisLocation(e.name,e.line);if(t&&e.name.includes(this.lastSeenHeapDumpClass)&&e.line===this.lastSeenHeapDumpLine)return t.getHeapDumpId()}}resetLastSeenHeapDumpLogLine(){this.lastSeenHeapDumpClass="",this.lastSeenHeapDumpLine=-1}isRunningApexTrigger(){return!!this.getTopFrame()?.source?.name?.toLowerCase().endsWith(".trigger")}copyStateForHeapDump(){this.backupStackFrameInfos=JSON.parse(JSON.stringify(this.stackFrameInfos)),this.backupFrameHandles=this.frameHandles.copy(),this.backupRefsMap=new Map,this.backupVariableHandles=new gt,this.cloneStaticVariablesClassMap();for(let e of this.backupStackFrameInfos){let t=this.backupFrameHandles.get(e.id);this.copyVariableContainers(t.locals),this.copyVariableContainers(t.statics)}}copyVariableContainers(e){e.forEach((t,r)=>{let n=t;if(n.ref){this.backupRefsMap.set(n.ref,n);let i=this.backupVariableHandles.create(n);n.variablesRef=i,this.copyVariableContainers(n.variables)}})}cloneStaticVariablesClassMap(){this.backupStaticVariablesClassMap=new Map,this.staticVariablesClassMap.forEach((e,t)=>{let r=e,n=new Map;r.forEach((i,o)=>{let c=i;n.set(o,c.copy())}),this.backupStaticVariablesClassMap.set(t,n)})}revertStateAfterHeapDump(){this.staticVariablesClassMap=this.backupStaticVariablesClassMap,this.stackFrameInfos=this.backupStackFrameInfos,this.frameHandles=this.backupFrameHandles,this.refsMap=this.backupRefsMap,this.variableHandles=this.backupVariableHandles}scanLogForHeapDumpLines(){let e=RegExp(/\|HEAP_DUMP\|/);return this.logLines.forEach((t,r)=>{if(e.test(t)){let n=t.split("|");if(n.length>=7){let i=new es(n[3],n[4],n[5],Number(n[6]));this.apexHeapDumps.push(i)}else this.session.printToDebugConsole(ae.localize("malformed_log_line",r+1,t))}}),this.apexHeapDumps.length>0}async fetchOverlayResultsForApexHeapDumps(e){let t=!0;try{let r=await new mt.OrgDisplay().getOrgInfo(e),n=new mt.RequestService;n.instanceUrl=r.instanceUrl,n.accessToken=r.accessToken;for(let i of this.apexHeapDumps){this.session.printToDebugConsole(ae.localize("fetching_heap_dump",i.toString()));let o=new Mt(i.getHeapDumpId()),c,a;if(await n.execute(o,mt.RestHttpMethodEnum.Get).then(u=>{a=u},u=>{c=u}),a)i.setOverlaySuccessResult(JSON.parse(a));else if(c)try{t=!1;let u=JSON.parse(c),l=ae.localize("heap_dump_error",u[0].message,u[0].errorCode,i.toString());this.session.errorToDebugConsole(l)}catch(u){let l=`${u}. ${c}. ${i.toString()}`;this.session.errorToDebugConsole(l)}}}catch(r){t=!1;let n=JSON.parse(r),i=`${ae.localize("unable_to_retrieve_org_info")} : ${n.message}`;this.session.errorToDebugConsole(i)}return t}getLogFileName(){return zc.basename(this.launchArgs.logFile)}getLogFilePath(){return this.launchArgs.logFile}getLogLinePosition(){return this.logLinePosition}incrementLogLinePosition(){this.logLinePosition+=1}getFrames(){return this.stackFrameInfos}getNumOfFrames(){return this.stackFrameInfos.length}getTopFrame(){if(this.stackFrameInfos.length>0)return this.stackFrameInfos[this.stackFrameInfos.length-1]}getRefsMap(){return this.refsMap}getStaticVariablesClassMap(){return this.staticVariablesClassMap}getFrameHandler(){return this.frameHandles}getVariableHandler(){return this.variableHandles}setState(e){this.state=e}hasState(){return this.state!==void 0}getExecAnonScriptLocationInDebugLog(e){return this.execAnonMapping.get(e)||0}getExecAnonScriptMapping(){return this.execAnonMapping}getUriFromSignature(e){if(e===ze)return this.getLogFilePath();let t=e.endsWith(")")?e.substring(0,e.substring(0,e.indexOf("(")).lastIndexOf(".")):e,r=Xe.getTyperefMapping(),n="";return r.forEach((i,o)=>{let c="";if(o.startsWith(St)?c=o:c=o.replace("/",".").replace("$","."),c===t){n=i;return}}),n}hasFrames(){return this.stackFrameInfos&&this.stackFrameInfos.length>0}updateFrames(){for(this.hasHeapDump()&&this.revertStateAfterHeapDump(),this.state instanceof ft&&this.stackFrameInfos.pop();++this.logLinePosition<this.logLines.length;){let e=this.logLines[this.logLinePosition];if(e&&(this.setState(this.parseLogEvent(e)),this.session.shouldTraceLogFile()&&!(this.state instanceof dt)&&this.session.printToDebugConsole(e),this.state&&this.state.handle(this)))break}}parseLogEvent(e){if(this.state===void 0)return new ft;e.startsWith(ai)&&this.execAnonMapping.set(this.execAnonMapping.size+1,this.logLinePosition+1);let t=e.split("|");if(t.length>=3)switch(t[1]){case nr:case or:case ci:return new pt(t);case ur:return Ae.isExtraneousVFGetterOrSetterLogLine(t[t.length-2])?new Ie:new pt(t);case ir:case ar:case li:return new ht(t);case fi:return new $t(t);case di:return new jt(t);case cr:return Ae.isExtraneousVFGetterOrSetterLogLine(t[t.length-2])?new Ie:new ht(t);case pi:if(e.match(/.*\|.*\|\[\d{1,}\]/))return t[2]=this.util.stripBrackets(t[2]),new Vt(t);break;case hi:if(e.match(/.*\|.*\|\[\d{1,}\]\|.*\|.*/))return t[2]=this.util.stripBrackets(t[2]),new dt(t);break;case ui:if(e.match(/.+\|HEAP_DUMP|\[\d+\]|.+\|.+\|\d+/)){let r=e.split("|");this.lastSeenHeapDumpClass=r[4],this.lastSeenHeapDumpLine=Number(r[6])}break;default:return new Ie}return new Ie}};var Yc="all",Fg="protocol",qg="logfile",Mg="launch",Wc="breakpoints",Kc=(n=>(n[n.Over=0]="Over",n[n.In=1]="In",n[n.Out=2]="Out",n[n.Run=3]="Run",n))(Kc||{}),Ut=class extends U.Variable{constructor(t,r,n,i=0,o){super(t,r,i);this.type=n,this.apexRef=o,this.evaluateName=r}},Ue=class{constructor(e,t){this.frameNumber=e,this.signature=t,this.statics=new Map,this.locals=new Map,this.globals=new Map}copy(){let e=new Ue(this.frameNumber,this.signature);return this.statics.forEach((t,r)=>{e.statics.set(r,t.copy())}),this.locals.forEach((t,r)=>{e.locals.set(r,t.copy())}),e}},Qc=(r=>(r.LOCAL="local",r.STATIC="static",r.GLOBAL="global",r))(Qc||{}),Ht=class{constructor(e=new Map){this.variables=e}getAllVariables(){let e=[];return this.variables.forEach(t=>{let r=t;e.push(new Ut(r.name,r.value,r.type,r.variablesRef))}),e}copy(){let e=Object.assign(Object.create(Object.getPrototypeOf(this)));return e.variables=new Map,this.variables.forEach((t,r)=>{e.variables.set(r,t.copy())}),e}},B=class extends Ht{constructor(t,r,n,i,o=0){super();this.name=t,this.value=r,this.type=n,this.ref=i,this.variablesRef=o}copy(){let t=super.copy();return t.name=this.name,t.value=this.value,t.type=this.type,t.ref=this.ref,t.variablesRef=this.variablesRef,t}},bt=class extends Ht{constructor(t,r){super(r);this.type=t}getAllVariables(){let t=[];return this.variables.forEach(r=>{let n=r;t.push(new Ut(n.name,n.value,n.type,n.variablesRef))}),t}},He=class extends U.LoggingDebugSession{constructor(){super("apex-replay-debug-adapter.log");this.trace=[];this.traceAll=!1;this.breakpoints=new Map;this.setDebuggerLinesStartAt1(!0),this.setDebuggerPathFormat("uri")}initializeRequest(t,r){this.initializedResponse=t,this.initializedResponse.body={supportsConfigurationDoneRequest:!0,supportsCompletionsRequest:!1,supportsConditionalBreakpoints:!0,supportsDelayedStackTraceLoading:!1,supportsEvaluateForHovers:!1,supportsExceptionInfoRequest:!1,supportsExceptionOptions:!1,supportsFunctionBreakpoints:!1,supportsHitConditionalBreakpoints:!1,supportsLoadedSourcesRequest:!1,supportsRestartFrame:!1,supportsSetVariable:!1,supportsStepBack:!1,supportsStepInTargetsRequest:!1},this.initializedResponse.success=!0,this.sendResponse(this.initializedResponse)}async launchRequest(t,r){let n=!1;r?.lineBreakpointInfo&&(n=!0,Xe.createMappingsFromLineBreakpointInfo(r.lineBreakpointInfo),delete r.lineBreakpointInfo),this.projectPath=r.projectPath,t.success=!1,this.setupLogger(r),this.log(Mg,`launchRequest: args=${JSON.stringify(r)}`),this.logContext=new ss(r,this),this.heapDumpService=new lr(this.logContext),this.logContext.hasLogLines()?this.logContext.meetsLogLevelRequirements()?n?(this.printToDebugConsole(ae.localize("session_started_text",this.logContext.getLogFileName())),this.projectPath&&this.logContext.scanLogForHeapDumpLines()&&!await this.logContext.fetchOverlayResultsForApexHeapDumps(this.projectPath)&&(t.message=ae.localize("heap_dump_error_wrap_up_text"),this.errorToDebugConsole(ae.localize("heap_dump_error_wrap_up_text"))),t.success=!0):t.message=ae.localize("session_language_server_error_text"):t.message=ae.localize("incorrect_log_levels_text"):t.message=ae.localize("no_log_file_text"),this.sendResponse(t),this.sendEvent(new U.InitializedEvent),this.sendEvent(new U.Event(mi,{logSize:this.logContext.getLogSize(),error:{subject:t.message}}))}setupLogger(t){typeof t.trace=="boolean"?(this.trace=t.trace?[Yc]:[],this.traceAll=t.trace):typeof t.trace=="string"&&(this.trace=t.trace.split(",").map(r=>r.trim()),this.traceAll=this.trace.indexOf(Yc)>=0),this.trace?.indexOf(Fg)>=0?U.logger.setup(U.Logger.LogLevel.Verbose,!1):U.logger.setup(U.Logger.LogLevel.Stop,!1)}configurationDoneRequest(t,r){this.logContext.getLaunchArgs().stopOnEntry?(this.logContext.updateFrames(),this.sendEvent(new U.StoppedEvent("entry",He.THREAD_ID))):this.continueRequest({},{threadId:He.THREAD_ID})}disconnectRequest(t,r){this.printToDebugConsole(ae.localize("session_terminated_text")),t.success=!0,this.sendResponse(t)}threadsRequest(t){t.body={threads:[new U.Thread(He.THREAD_ID,"")]},t.success=!0,this.sendResponse(t)}stackTraceRequest(t,r){t.body={stackFrames:this.logContext.getFrames().slice().reverse()},t.success=!0,this.sendResponse(t)}async scopesRequest(t,r){let n=this.logContext.hasHeapDumpForTopFrame();if(n)try{this.logContext.copyStateForHeapDump(),this.heapDumpService.replaceVariablesWithHeapDump()}catch(c){this.sendEvent(new U.Event(gi,{subject:c.message,callstack:c.stack})),this.logContext.revertStateAfterHeapDump(),this.warnToDebugConsole(ae.localize("reconcile_heapdump_error",c,n,n))}finally{this.logContext.resetLastSeenHeapDumpLogLine()}t.success=!0;let i=this.logContext.getFrameHandler().get(r.frameId);if(!i){t.body={scopes:[]},this.sendResponse(t);return}let o=new Array;o.push(new U.Scope("Local",this.logContext.getVariableHandler().create(new bt("local",i.locals)),!1)),o.push(new U.Scope("Static",this.logContext.getVariableHandler().create(new bt("static",i.statics)),!1)),o.push(new U.Scope("Global",this.logContext.getVariableHandler().create(new bt("global",i.globals)),!1)),t.body={scopes:o},this.sendResponse(t)}async variablesRequest(t,r){t.success=!0;let n=this.logContext.getVariableHandler().get(r.variablesReference);t.body={variables:n?n.getAllVariables():[]},this.sendResponse(t)}evaluateRequest(t,r){t.body={result:r.expression,variablesReference:0},t.success=!0,this.sendResponse(t)}continueRequest(t,r){this.executeStep(t,3)}nextRequest(t,r){this.executeStep(t,0)}stepInRequest(t,r){this.executeStep(t,1)}stepOutRequest(t,r){this.executeStep(t,2)}executeStep(t,r){t.success=!0,this.sendResponse(t);let n=this.logContext.getNumOfFrames();for(;this.logContext.hasLogLines();){this.logContext.updateFrames();let i=this.logContext.getNumOfFrames();if(r===0&&i!==0&&i<=n||r===1&&i>=n||r===2&&i!==0&&i<n)return this.sendEvent(new U.StoppedEvent("step",He.THREAD_ID));if(this.shouldStopForBreakpoint())return}this.sendEvent(new U.TerminatedEvent)}shouldStopForBreakpoint(){let t=this.logContext.getTopFrame(),r=t?.source?.path??null,n=t?.line??null;if(r&&n){let i=this.convertClientPathToDebugger(r),o=this.convertClientLineToDebugger(n);if((this.breakpoints.get(i)??[]).includes(o))return this.sendEvent(new U.StoppedEvent("breakpoint",He.THREAD_ID)),!0}return!1}setBreakPointsRequest(t,r){if(t.body={breakpoints:[]},r.source.path&&r.breakpoints){let n=this.convertClientPathToDebugger(r.source.path);this.log(Wc,`setBreakPointsRequest: path=${r.source.path} uri=${n} lines=${Xe.returnLinesForLoggingFromBreakpointArgs(r.breakpoints)}`),this.breakpoints.set(n,[]);for(let i of r.breakpoints){let o=Xe.canSetLineBreakpoint(n,this.convertClientLineToDebugger(i.line));t.body.breakpoints.push({verified:o,source:r.source,line:i.line}),o&&this.breakpoints.get(n).push(this.convertClientLineToDebugger(i.line))}this.log(Wc,`setBreakPointsRequest: path=${r.source.path} verified lines=${this.breakpoints.get(n).join(",")}`)}t.success=!0,this.sendResponse(t)}log(t,r){this.trace&&(this.traceAll||this.trace.indexOf(t)>=0)&&this.printToDebugConsole(`${process.pid}: ${r}`)}shouldTraceLogFile(){return this.traceAll||this.trace.indexOf(qg)!==-1}printToDebugConsole(t,r,n,i="stdout"){if(t?.length!==0){let o=new U.OutputEvent(`${t}${Jc.EOL}`,i);o.body.source=r,o.body.line=n,o.body.column=0,this.sendEvent(o)}}warnToDebugConsole(t,r,n){this.printToDebugConsole(t,r,n,"console")}errorToDebugConsole(t,r,n){this.printToDebugConsole(t,r,n,"stderr")}},kt=He;kt.THREAD_ID=1;U.DebugSession.run(kt);0&&(module.exports={ApexDebugStackFrameInfo,ApexReplayDebug,ApexVariable,ApexVariableContainer,SCOPE_TYPES,ScopeContainer,Step,VariableContainer});
