"use strict";var Sy=Object.create;var Ci=Object.defineProperty;var Cy=Object.getOwnPropertyDescriptor;var Ty=Object.getOwnPropertyNames;var Oy=Object.getPrototypeOf,wy=Object.prototype.hasOwnProperty;var l=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Iy=(r,e)=>{for(var t in e)Ci(r,t,{get:e[t],enumerable:!0})},bf=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ty(e))!wy.call(r,s)&&s!==t&&Ci(r,s,{get:()=>e[s],enumerable:!(n=Cy(e,s))||n.enumerable});return r};var Bt=(r,e,t)=>(t=r!=null?Sy(Oy(r)):{},bf(e||!r||!r.__esModule?Ci(t,"default",{value:r,enumerable:!0}):t,r)),Ry=r=>bf(Ci({},"__esModule",{value:!0}),r);var Sf=l(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.SEND_METRIC_EVENT=J.TRIGGER_EXCEPTION_PREFIX=J.SALESFORCE_EXCEPTION_PREFIX=J.EXCEPTION_BREAKPOINT_BREAK_MODE_NEVER=J.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS=J.LIVESHARE_DEBUG_TYPE_REQUEST=J.LIST_EXCEPTION_BREAKPOINTS_REQUEST=J.EXCEPTION_BREAKPOINT_REQUEST=J.HOTSWAP_REQUEST=J.SHOW_MESSAGE_EVENT=J.DEFAULT_IDLE_WARN3_MS=J.DEFAULT_IDLE_WARN2_MS=J.DEFAULT_IDLE_WARN1_MS=J.DEFAULT_IDLE_TIMEOUT_MS=J.DEFAULT_LOCK_TIMEOUT_MS=J.DEFAULT_STREAMING_TIMEOUT_MS=J.LIVESHARE_DEBUGGER_TYPE=J.DEBUGGER_TYPE=J.DEBUGGER_LAUNCH_TYPE=void 0;J.DEBUGGER_LAUNCH_TYPE="launch";J.DEBUGGER_TYPE="apex";J.LIVESHARE_DEBUGGER_TYPE="vslsShare";J.DEFAULT_STREAMING_TIMEOUT_MS=14400;J.DEFAULT_LOCK_TIMEOUT_MS=1e4;J.DEFAULT_IDLE_TIMEOUT_MS=12e5;J.DEFAULT_IDLE_WARN1_MS=6e5;J.DEFAULT_IDLE_WARN2_MS=9e5;J.DEFAULT_IDLE_WARN3_MS=108e4;J.SHOW_MESSAGE_EVENT="showMessage";J.HOTSWAP_REQUEST="hotswap";J.EXCEPTION_BREAKPOINT_REQUEST="exceptionBreakpoint";J.LIST_EXCEPTION_BREAKPOINTS_REQUEST="listExceptionBreakpoints";J.LIVESHARE_DEBUG_TYPE_REQUEST="debugType";J.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS="always";J.EXCEPTION_BREAKPOINT_BREAK_MODE_NEVER="never";J.SALESFORCE_EXCEPTION_PREFIX="com/salesforce/api/exception/";J.TRIGGER_EXCEPTION_PREFIX="__sfdc_trigger/";J.SEND_METRIC_EVENT="sendMetric"});var Wa=l(It=>{"use strict";var xy=It&&It.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Py=It&&It.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&xy(e,r,t)};Object.defineProperty(It,"__esModule",{value:!0});It.isMetric=It.VscodeDebuggerMessageType=void 0;Py(Sf(),It);var Cf;(function(r){r[r.Info=0]="Info",r[r.Warning=1]="Warning",r[r.Error=2]="Error"})(Cf||(It.VscodeDebuggerMessageType=Cf={}));var Ay=r=>!!r&&Object.keys(r).every(e=>["subject","type"].includes(e))&&Object.values(r).every(e=>typeof e=="string");It.isMetric=Ay});var bs=l(Of=>{"use strict";var Ny=typeof window<"u"&&window,Dy=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,Ly=typeof global<"u"&&global,Tf=Ny||Ly||Dy;Of.root=Tf;(function(){if(!Tf)throw new Error("RxJS could not find any global context (window, self, global)")})()});var Ti=l(wf=>{"use strict";function qy(r){return typeof r=="function"}wf.isFunction=qy});var Ya=l(If=>{"use strict";If.isArray=Array.isArray||function(r){return r&&typeof r.length=="number"}});var xf=l(Rf=>{"use strict";function ky(r){return r!=null&&typeof r=="object"}Rf.isObject=ky});var Oi=l(Pf=>{"use strict";Pf.errorObject={e:{}}});var za=l(Df=>{"use strict";var Af=Oi(),Nf;function jy(){try{return Nf.apply(this,arguments)}catch(r){return Af.errorObject.e=r,Af.errorObject}}function Fy(r){return Nf=r,jy}Df.tryCatch=Fy});var Lf=l(wi=>{"use strict";var My=wi&&wi.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Uy=function(r){My(e,r);function e(t){r.call(this),this.errors=t;var n=Error.call(this,t?t.length+` errors occurred during unsubscription:
  `+t.map(function(s,i){return i+1+") "+s.toString()}).join(`
  `):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return e}(Error);wi.UnsubscriptionError=Uy});var cn=l(jf=>{"use strict";var Gy=Ya(),$y=xf(),Hy=Ti(),qf=za(),an=Oi(),Ii=Lf(),By=function(){function r(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e=!1,t;if(!this.closed){var n=this,s=n._parent,i=n._parents,o=n._unsubscribe,a=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var c=-1,u=i?i.length:0;s;)s.remove(this),s=++c<u&&i[c]||null;if(Hy.isFunction(o)){var f=qf.tryCatch(o).call(this);f===an.errorObject&&(e=!0,t=t||(an.errorObject.e instanceof Ii.UnsubscriptionError?kf(an.errorObject.e.errors):[an.errorObject.e]))}if(Gy.isArray(a))for(c=-1,u=a.length;++c<u;){var d=a[c];if($y.isObject(d)){var f=qf.tryCatch(d.unsubscribe).call(d);if(f===an.errorObject){e=!0,t=t||[];var _=an.errorObject.e;_ instanceof Ii.UnsubscriptionError?t=t.concat(kf(_.errors)):t.push(_)}}}if(e)throw new Ii.UnsubscriptionError(t)}},r.prototype.add=function(e){if(!e||e===r.EMPTY)return r.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new r(e);case"object":if(t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(typeof t._addParent!="function"){var n=t;t=new r,t._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=this._subscriptions||(this._subscriptions=[]);return s.push(t),t._addParent(this),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},r.prototype._addParent=function(e){var t=this,n=t._parent,s=t._parents;!n||n===e?this._parent=e:s?s.indexOf(e)===-1&&s.push(e):this._parents=[e]},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();jf.Subscription=By;function kf(r){return r.reduce(function(e,t){return e.concat(t instanceof Ii.UnsubscriptionError?t.errors:t)},[])}});var Ka=l(Ff=>{"use strict";Ff.empty={closed:!0,next:function(r){},error:function(r){throw r},complete:function(){}}});var xi=l(Ri=>{"use strict";var Vy=bs(),Za=Vy.root.Symbol;Ri.rxSubscriber=typeof Za=="function"&&typeof Za.for=="function"?Za.for("rxSubscriber"):"@@rxSubscriber";Ri.$$rxSubscriber=Ri.rxSubscriber});var tc=l(Pi=>{"use strict";var Gf=Pi&&Pi.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Mf=Ti(),Xy=cn(),Ja=Ka(),Qa=xi(),ec=function(r){Gf(e,r);function e(t,n,s){switch(r.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Ja.empty;break;case 1:if(!t){this.destination=Ja.empty;break}if(typeof t=="object"){if(Wy(t)){var i=t[Qa.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new Uf(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new Uf(this,t,n,s);break}}return e.prototype[Qa.rxSubscriber]=function(){return this},e.create=function(t,n,s){var i=new e(t,n,s);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,n=t._parent,s=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=n,this._parents=s,this},e}(Xy.Subscription);Pi.Subscriber=ec;var Uf=function(r){Gf(e,r);function e(t,n,s,i){r.call(this),this._parentSubscriber=t;var o,a=this;Mf.isFunction(n)?o=n:n&&(o=n.next,s=n.error,i=n.complete,n!==Ja.empty&&(a=Object.create(n),Mf.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=s,this._complete=i}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber;if(this._error)n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)n.syncErrorValue=t,n.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),t}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var s=function(){return t._complete.call(t._context)};n.syncErrorThrowable?(this.__tryOrSetError(n,s),this.unsubscribe()):(this.__tryOrUnsub(s),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(s){throw this.unsubscribe(),s}},e.prototype.__tryOrSetError=function(t,n,s){try{n.call(this._context,s)}catch(i){return t.syncErrorValue=i,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(ec);function Wy(r){return r instanceof ec||"syncErrorThrowable"in r&&r[Qa.rxSubscriber]}});var Bf=l(Hf=>{"use strict";var rc=tc(),$f=xi(),Yy=Ka();function zy(r,e,t){if(r){if(r instanceof rc.Subscriber)return r;if(r[$f.rxSubscriber])return r[$f.rxSubscriber]()}return!r&&!e&&!t?new rc.Subscriber(Yy.empty):new rc.Subscriber(r,e,t)}Hf.toSubscriber=zy});var Xf=l(Ss=>{"use strict";var Ky=bs();function Vf(r){var e,t=r.Symbol;return typeof t=="function"?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}Ss.getSymbolObservable=Vf;Ss.observable=Vf(Ky.root);Ss.$$observable=Ss.observable});var Yf=l(Wf=>{"use strict";function Zy(){}Wf.noop=Zy});var Kf=l(nc=>{"use strict";var Jy=Yf();function Qy(){for(var r=[],e=0;e<arguments.length;e++)r[e-0]=arguments[e];return zf(r)}nc.pipe=Qy;function zf(r){return r?r.length===1?r[0]:function(t){return r.reduce(function(n,s){return s(n)},t)}:Jy.noop}nc.pipeFromArray=zf});var Vt=l(Zf=>{"use strict";var vt=bs(),eb=Bf(),tb=Xf(),rb=Kf(),nb=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var s=this.operator,i=eb.toSubscriber(e,t,n);if(s?s.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},r.prototype.forEach=function(e,t){var n=this;if(t||(vt.root.Rx&&vt.root.Rx.config&&vt.root.Rx.config.Promise?t=vt.root.Rx.config.Promise:vt.root.Promise&&(t=vt.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(s,i){var o;o=n.subscribe(function(a){if(o)try{e(a)}catch(c){i(c),o.unsubscribe()}else e(a)},i,s)})},r.prototype._subscribe=function(e){return this.source.subscribe(e)},r.prototype[tb.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.length===0?this:rb.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;if(e||(vt.root.Rx&&vt.root.Rx.config&&vt.root.Rx.config.Promise?e=vt.root.Rx.config.Promise:vt.root.Promise&&(e=vt.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(n,s){var i;t.subscribe(function(o){return i=o},function(o){return s(o)},function(){return n(i)})})},r.create=function(e){return new r(e)},r}();Zf.Observable=nb});var ic=l((IA,rh)=>{"use strict";var th=require("child_process"),Jf=th.spawn,sb=th.exec;rh.exports=function(r,e,t){if(typeof e=="function"&&t===void 0&&(t=e,e=void 0),r=parseInt(r),Number.isNaN(r)){if(t)return t(new Error("pid must be a number"));throw new Error("pid must be a number")}var n={},s={};switch(n[r]=[],s[r]=1,process.platform){case"win32":sb("taskkill /pid "+r+" /T /F",t);break;case"darwin":sc(r,n,s,function(i){return Jf("pgrep",["-P",i])},function(){Qf(n,e,t)});break;default:sc(r,n,s,function(i){return Jf("ps",["-o","pid","--no-headers","--ppid",i])},function(){Qf(n,e,t)});break}};function Qf(r,e,t){var n={};try{Object.keys(r).forEach(function(s){r[s].forEach(function(i){n[i]||(eh(i,e),n[i]=1)}),n[s]||(eh(s,e),n[s]=1)})}catch(s){if(t)return t(s);throw s}if(t)return t()}function eh(r,e){try{process.kill(parseInt(r,10),e)}catch(t){if(t.code!=="ESRCH")throw t}}function sc(r,e,t,n,s){var i=n(r),o="";i.stdout.on("data",function(u){var u=u.toString("ascii");o+=u});var a=function(c){if(delete t[r],c!=0){Object.keys(t).length==0&&s();return}o.match(/\d+/g).forEach(function(u){u=parseInt(u,10),e[r].push(u),e[u]=[],t[u]=1,sc(u,e,t,n,s)})};i.on("close",a)}});var ac=l(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.CliCommandExecution=Le.KILL_CODE=Le.CANCELLATION_INTERVAL=Le.NO_STDERR_ERROR=Le.NO_STDOUT_ERROR=Le.NO_PID_ERROR=void 0;var Cs=Vt(),ib=ic();Le.NO_PID_ERROR="No process associated with sfdx command.";Le.NO_STDOUT_ERROR="No stdout found for childProcess";Le.NO_STDERR_ERROR="No stderr found for childProcess";Le.CANCELLATION_INTERVAL=1e3;Le.KILL_CODE="SIGKILL";var oc=class{constructor(e,t,n){if(this.command=e,this.cancellationToken=n,!t.pid)throw new Error(Le.NO_PID_ERROR);this.childProcessPid=t.pid;let s;if(this.processExitSubject=Cs.Observable.fromEvent(t,"exit"),this.processExitSubject.subscribe(()=>{s&&s.unsubscribe()}),this.processErrorSubject=Cs.Observable.fromEvent(t,"error"),this.processErrorSubject.subscribe(()=>{s&&s.unsubscribe()}),!t.stdout)throw new Error(Le.NO_STDOUT_ERROR);if(this.stdoutSubject=Cs.Observable.fromEvent(t.stdout,"data"),!t.stderr)throw new Error(Le.NO_STDERR_ERROR);this.stderrSubject=Cs.Observable.fromEvent(t.stderr,"data"),n&&(s=Cs.Observable.interval(Le.CANCELLATION_INTERVAL).subscribe(async()=>{if(n.isCancellationRequested)try{await this.killExecution()}catch(o){console.log(o)}}))}async killExecution(e=Le.KILL_CODE){return ob(this.childProcessPid,e)}};Le.CliCommandExecution=oc;var ob=(r,e)=>new Promise((t,n)=>{ib(r,e,s=>{s&&n(s),t()})})});var ah=l((xA,oh)=>{oh.exports=ih;ih.sync=cb;var nh=require("fs");function ab(r,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var n=0;n<t.length;n++){var s=t[n].toLowerCase();if(s&&r.substr(-s.length).toLowerCase()===s)return!0}return!1}function sh(r,e,t){return!r.isSymbolicLink()&&!r.isFile()?!1:ab(e,t)}function ih(r,e,t){nh.stat(r,function(n,s){t(n,n?!1:sh(s,r,e))})}function cb(r,e){return sh(nh.statSync(r),r,e)}});var hh=l((PA,fh)=>{fh.exports=uh;uh.sync=ub;var ch=require("fs");function uh(r,e,t){ch.stat(r,function(n,s){t(n,n?!1:lh(s,e))})}function ub(r,e){return lh(ch.statSync(r),e)}function lh(r,e){return r.isFile()&&lb(r,e)}function lb(r,e){var t=r.mode,n=r.uid,s=r.gid,i=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),o=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),f=a|c,d=t&u||t&c&&s===o||t&a&&n===i||t&f&&i===0;return d}});var ph=l((NA,dh)=>{var AA=require("fs"),Ai;process.platform==="win32"||global.TESTING_WINDOWS?Ai=ah():Ai=hh();dh.exports=cc;cc.sync=fb;function cc(r,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,s){cc(r,e||{},function(i,o){i?s(i):n(o)})})}Ai(r,e||{},function(n,s){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,s=!1),t(n,s)})}function fb(r,e){try{return Ai.sync(r,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var bh=l((DA,yh)=>{var un=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",gh=require("path"),hb=un?";":":",vh=ph(),_h=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),mh=(r,e)=>{let t=e.colon||hb,n=r.match(/\//)||un&&r.match(/\\/)?[""]:[...un?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(t)],s=un?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=un?s.split(t):[""];return un&&r.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:s}},Eh=(r,e,t)=>{typeof e=="function"&&(t=e,e={}),e||(e={});let{pathEnv:n,pathExt:s,pathExtExe:i}=mh(r,e),o=[],a=u=>new Promise((f,d)=>{if(u===n.length)return e.all&&o.length?f(o):d(_h(r));let _=n[u],m=/^".*"$/.test(_)?_.slice(1,-1):_,y=gh.join(m,r),P=!m&&/^\.[\\\/]/.test(r)?r.slice(0,2)+y:y;f(c(P,u,0))}),c=(u,f,d)=>new Promise((_,m)=>{if(d===s.length)return _(a(f+1));let y=s[d];vh(u+y,{pathExt:i},(P,M)=>{if(!P&&M)if(e.all)o.push(u+y);else return _(u+y);return _(c(u,f,d+1))})});return t?a(0).then(u=>t(null,u),t):a(0)},db=(r,e)=>{e=e||{};let{pathEnv:t,pathExt:n,pathExtExe:s}=mh(r,e),i=[];for(let o=0;o<t.length;o++){let a=t[o],c=/^".*"$/.test(a)?a.slice(1,-1):a,u=gh.join(c,r),f=!c&&/^\.[\\\/]/.test(r)?r.slice(0,2)+u:u;for(let d=0;d<n.length;d++){let _=f+n[d];try{if(vh.sync(_,{pathExt:s}))if(e.all)i.push(_);else return _}catch{}}}if(e.all&&i.length)return i;if(e.nothrow)return null;throw _h(r)};yh.exports=Eh;Eh.sync=db});var Ch=l((LA,uc)=>{"use strict";var Sh=(r={})=>{let e=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};uc.exports=Sh;uc.exports.default=Sh});var Ih=l((qA,wh)=>{"use strict";var Th=require("path"),pb=bh(),gb=Ch();function Oh(r,e){let t=r.options.env||process.env,n=process.cwd(),s=r.options.cwd!=null,i=s&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(r.options.cwd)}catch{}let o;try{o=pb.sync(r.command,{path:t[gb({env:t})],pathExt:e?Th.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return o&&(o=Th.resolve(s?r.options.cwd:"",o)),o}function vb(r){return Oh(r)||Oh(r,!0)}wh.exports=vb});var Rh=l((kA,fc)=>{"use strict";var lc=/([()\][%!^"`<>&|;, *?])/g;function _b(r){return r=r.replace(lc,"^$1"),r}function mb(r,e){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(lc,"^$1"),e&&(r=r.replace(lc,"^$1")),r}fc.exports.command=_b;fc.exports.argument=mb});var Ph=l((jA,xh)=>{"use strict";xh.exports=/^#!(.*)/});var Nh=l((FA,Ah)=>{"use strict";var Eb=Ph();Ah.exports=(r="")=>{let e=r.match(Eb);if(!e)return null;let[t,n]=e[0].replace(/#! ?/,"").split(" "),s=t.split("/").pop();return s==="env"?n:n?`${s} ${n}`:s}});var Lh=l((MA,Dh)=>{"use strict";var hc=require("fs"),yb=Nh();function bb(r){let t=Buffer.alloc(150),n;try{n=hc.openSync(r,"r"),hc.readSync(n,t,0,150,0),hc.closeSync(n)}catch{}return yb(t.toString())}Dh.exports=bb});var Fh=l((UA,jh)=>{"use strict";var Sb=require("path"),qh=Ih(),kh=Rh(),Cb=Lh(),Tb=process.platform==="win32",Ob=/\.(?:com|exe)$/i,wb=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Ib(r){r.file=qh(r);let e=r.file&&Cb(r.file);return e?(r.args.unshift(r.file),r.command=e,qh(r)):r.file}function Rb(r){if(!Tb)return r;let e=Ib(r),t=!Ob.test(e);if(r.options.forceShell||t){let n=wb.test(e);r.command=Sb.normalize(r.command),r.command=kh.command(r.command),r.args=r.args.map(i=>kh.argument(i,n));let s=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${s}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function xb(r,e,t){e&&!Array.isArray(e)&&(t=e,e=null),e=e?e.slice(0):[],t=Object.assign({},t);let n={command:r,args:e,options:t,file:void 0,original:{command:r,args:e}};return t.shell?n:Rb(n)}jh.exports=xb});var Gh=l((GA,Uh)=>{"use strict";var dc=process.platform==="win32";function pc(r,e){return Object.assign(new Error(`${e} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${r.command}`,path:r.command,spawnargs:r.args})}function Pb(r,e){if(!dc)return;let t=r.emit;r.emit=function(n,s){if(n==="exit"){let i=Mh(s,e,"spawn");if(i)return t.call(r,"error",i)}return t.apply(r,arguments)}}function Mh(r,e){return dc&&r===1&&!e.file?pc(e.original,"spawn"):null}function Ab(r,e){return dc&&r===1&&!e.file?pc(e.original,"spawnSync"):null}Uh.exports={hookChildProcess:Pb,verifyENOENT:Mh,verifyENOENTSync:Ab,notFoundError:pc}});var _c=l(($A,ln)=>{"use strict";var $h=require("child_process"),gc=Fh(),vc=Gh();function Hh(r,e,t){let n=gc(r,e,t),s=$h.spawn(n.command,n.args,n.options);return vc.hookChildProcess(s,n),s}function Nb(r,e,t){let n=gc(r,e,t),s=$h.spawnSync(n.command,n.args,n.options);return s.error=s.error||vc.verifyENOENTSync(s.status,n),s}ln.exports=Hh;ln.exports.spawn=Hh;ln.exports.sync=Nb;ln.exports._parse=gc;ln.exports._enoent=vc});var Xh=l(Ni=>{"use strict";var Db=Ni&&Ni.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Lb=Vt(),qb=za(),kb=Ti(),Bh=Oi(),jb=cn(),Vh=Object.prototype.toString;function Fb(r){return!!r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function Mb(r){return!!r&&typeof r.on=="function"&&typeof r.off=="function"}function Ub(r){return!!r&&Vh.call(r)==="[object NodeList]"}function Gb(r){return!!r&&Vh.call(r)==="[object HTMLCollection]"}function $b(r){return!!r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}var Hb=function(r){Db(e,r);function e(t,n,s,i){r.call(this),this.sourceObj=t,this.eventName=n,this.selector=s,this.options=i}return e.create=function(t,n,s,i){return kb.isFunction(s)&&(i=s,s=void 0),new e(t,n,i,s)},e.setupSubscription=function(t,n,s,i,o){var a;if(Ub(t)||Gb(t))for(var c=0,u=t.length;c<u;c++)e.setupSubscription(t[c],n,s,i,o);else if($b(t)){var f=t;t.addEventListener(n,s,o),a=function(){return f.removeEventListener(n,s,o)}}else if(Mb(t)){var d=t;t.on(n,s),a=function(){return d.off(n,s)}}else if(Fb(t)){var _=t;t.addListener(n,s),a=function(){return _.removeListener(n,s)}}else throw new TypeError("Invalid event target");i.add(new jb.Subscription(a))},e.prototype._subscribe=function(t){var n=this.sourceObj,s=this.eventName,i=this.options,o=this.selector,a=o?function(){for(var c=[],u=0;u<arguments.length;u++)c[u-0]=arguments[u];var f=qb.tryCatch(o).apply(void 0,c);f===Bh.errorObject?t.error(Bh.errorObject.e):t.next(f)}:function(c){return t.next(c)};e.setupSubscription(n,s,a,t,i)},e}(Lb.Observable);Ni.FromEventObservable=Hb});var Yh=l(Wh=>{"use strict";var Bb=Xh();Wh.fromEvent=Bb.FromEventObservable.create});var Di=l(()=>{"use strict";var Vb=Vt(),Xb=Yh();Vb.Observable.fromEvent=Xb.fromEvent});var Kh=l(zh=>{"use strict";var Wb=Ya();function Yb(r){return!Wb.isArray(r)&&r-parseFloat(r)+1>=0}zh.isNumeric=Yb});var Zh=l(Li=>{"use strict";var zb=Li&&Li.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Kb=cn(),Zb=function(r){zb(e,r);function e(t,n){r.call(this)}return e.prototype.schedule=function(t,n){return n===void 0&&(n=0),this},e}(Kb.Subscription);Li.Action=Zb});var Qh=l(qi=>{"use strict";var Jb=qi&&qi.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Jh=bs(),Qb=Zh(),eS=function(r){Jb(e,r);function e(t,n){r.call(this,t,n),this.scheduler=t,this.pending=!1,this.work=n}return e.prototype.schedule=function(t,n){if(n===void 0&&(n=0),this.closed)return this;this.state=t,this.pending=!0;var s=this.id,i=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(i,s,n)),this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this},e.prototype.requestAsyncId=function(t,n,s){return s===void 0&&(s=0),Jh.root.setInterval(t.flush.bind(t,this),s)},e.prototype.recycleAsyncId=function(t,n,s){return s===void 0&&(s=0),s!==null&&this.delay===s&&this.pending===!1?n:Jh.root.clearInterval(n)&&void 0||void 0},e.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(t,n);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,n){var s=!1,i=void 0;try{this.work(t)}catch(o){s=!0,i=!!o&&o||new Error(o)}if(s)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,n=this.scheduler,s=n.actions,i=s.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&s.splice(i,1),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null},e}(Qb.Action);qi.AsyncAction=eS});var td=l(ed=>{"use strict";var tS=function(){function r(e,t){t===void 0&&(t=r.now),this.SchedulerAction=e,this.now=t}return r.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},r.now=Date.now?Date.now:function(){return+new Date},r}();ed.Scheduler=tS});var rd=l(ki=>{"use strict";var rS=ki&&ki.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},nS=td(),sS=function(r){rS(e,r);function e(){r.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return e.prototype.flush=function(t){var n=this.actions;if(this.active){n.push(t);return}var s;this.active=!0;do if(s=t.execute(t.state,t.delay))break;while(t=n.shift());if(this.active=!1,s){for(;t=n.shift();)t.unsubscribe();throw s}},e}(nS.Scheduler);ki.AsyncScheduler=sS});var sd=l(nd=>{"use strict";var iS=Qh(),oS=rd();nd.async=new oS.AsyncScheduler(iS.AsyncAction)});var id=l(ji=>{"use strict";var aS=ji&&ji.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},cS=Kh(),uS=Vt(),mc=sd(),lS=function(r){aS(e,r);function e(t,n){t===void 0&&(t=0),n===void 0&&(n=mc.async),r.call(this),this.period=t,this.scheduler=n,(!cS.isNumeric(t)||t<0)&&(this.period=0),(!n||typeof n.schedule!="function")&&(this.scheduler=mc.async)}return e.create=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=mc.async),new e(t,n)},e.dispatch=function(t){var n=t.index,s=t.subscriber,i=t.period;s.next(n),!s.closed&&(t.index+=1,this.schedule(t,i))},e.prototype._subscribe=function(t){var n=0,s=this.period,i=this.scheduler;t.add(i.schedule(e.dispatch,s,{index:n,subscriber:t,period:s}))},e}(uS.Observable);ji.IntervalObservable=lS});var ad=l(od=>{"use strict";var fS=id();od.interval=fS.IntervalObservable.create});var Ec=l(()=>{"use strict";var hS=Vt(),dS=ad();hS.Observable.interval=dS.interval});var cd=l(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.TELEMETRY_HEADER=ce.SF_CONFIG_ISV_DEBUGGER_URL=ce.SF_CONFIG_ISV_DEBUGGER_SID=ce.SF_COMMAND=ce.MISSING_LABEL_MSG=ce.LOCALE_JA=ce.DEFAULT_LOCALE=ce.BASE_FILE_EXTENSION=ce.BASE_FILE_NAME=ce.ENV_SF_ORG_INSTANCE_URL=ce.ENV_HTTPS_PROXY=ce.ENV_HTTP_PROXY=ce.ENV_SF_TARGET_ORG=ce.DEFAULT_CONNECTION_TIMEOUT_MS=ce.CLIENT_ID=void 0;ce.CLIENT_ID="sfdx-vscode";ce.DEFAULT_CONNECTION_TIMEOUT_MS=2e4;ce.ENV_SF_TARGET_ORG="SF_TARGET_ORG";ce.ENV_HTTP_PROXY="HTTP_PROXY";ce.ENV_HTTPS_PROXY="HTTPS_PROXY";ce.ENV_SF_ORG_INSTANCE_URL="SF_ORG_INSTANCE_URL";ce.BASE_FILE_NAME="i18n";ce.BASE_FILE_EXTENSION="js";ce.DEFAULT_LOCALE="en";ce.LOCALE_JA="ja";ce.MISSING_LABEL_MSG="!!! MISSING LABEL !!!";ce.SF_COMMAND="sf";ce.SF_CONFIG_ISV_DEBUGGER_SID="org-isv-debugger-sid";ce.SF_CONFIG_ISV_DEBUGGER_URL="org-isv-debugger-url";ce.TELEMETRY_HEADER="salesforce-vscode-extensions"});var fn=l(Sr=>{"use strict";var pS=Sr&&Sr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),gS=Sr&&Sr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&pS(e,r,t)};Object.defineProperty(Sr,"__esModule",{value:!0});gS(cd(),Sr)});var yc=l(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.GlobalCliEnvironment=void 0;var Fi=class{};Mi.GlobalCliEnvironment=Fi;Fi.environmentVariables=new Map});var Gi=l(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.CliCommandExecutor=void 0;var vS=_c();Di();Ec();var _S=fn(),mS=ac(),ES=yc(),Ts=class{static patchEnv(e,t){let n=Object.create(null);return Object.assign(n,process.env),t.forEach((s,i)=>{n[i]=s}),n&&(n.SFDX_TOOL=_S.TELEMETRY_HEADER),typeof e.env<"u"&&Object.assign(n,e.env),e.env=n,e}constructor(e,t,n=!0){this.command=e,this.options=n?Ts.patchEnv(t,ES.GlobalCliEnvironment.environmentVariables):t}execute(e){let t=vS(this.command.command,this.command.args,this.options);return new mS.CliCommandExecution(this.command,t,e)}};Ui.CliCommandExecutor=Ts});var ud=l($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.Command=void 0;var bc=class{constructor(e){this.command=e.command,this.description=e.description,this.args=e.args,this.logName=e.logName}toString(){return this.description?this.description:`${this.command} ${this.args.join(" ")}`}toCommand(){return`${this.command} ${this.args.join(" ")}`}};$i.Command=bc});var Cc=l(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.CommandBuilder=ur.JSON_FLAG=void 0;var yS=ud();ur.JSON_FLAG="--json";var Sc=class{constructor(e){this.args=[],this.command=e}withDescription(e){return this.description=e,this}withArg(e){return e===ur.JSON_FLAG?this.withJson():this.args.push(e),this}withFlag(e,t){return this.args.push(e,t),this}withJson(){return this.args.push(ur.JSON_FLAG),this}withLogName(e){return this.logName=e,this}build(){return new yS.Command(this)}};ur.CommandBuilder=Sc});var Bi=l(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.CommandOutput=void 0;var Tc=class{constructor(){this.stdoutBuffer="",this.stderrBuffer=""}async getCmdResult(e){return e.stdoutSubject.subscribe(t=>{this.stdoutBuffer+=t.toString()}),e.stderrSubject.subscribe(t=>{this.stderrBuffer+=t.toString()}),new Promise((t,n)=>{e.processExitSubject.subscribe(s=>s!==void 0&&String(s)==="0"?t(this.stdoutBuffer):n(this.stderrBuffer||this.stdoutBuffer))})}};Hi.CommandOutput=Tc});var Xi=l(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.SfCommandBuilder=void 0;var bS=fn(),SS=Cc(),Oc=class extends SS.CommandBuilder{constructor(){super(bS.SF_COMMAND)}};Vi.SfCommandBuilder=Oc});var ld=l(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.ConfigGet=void 0;var CS=Gi(),TS=Bi(),OS=Xi(),wc=class{async getConfig(e,...t){let n=new OS.SfCommandBuilder().withArg("config:get");t.forEach(a=>n.withArg(a));let s=new CS.CliCommandExecutor(n.withJson().build(),{cwd:e}).execute(),o=await new TS.CommandOutput().getCmdResult(s);try{let a=new Map;return JSON.parse(o).result.forEach(u=>a.set(u.key,u.value)),Promise.resolve(a)}catch(a){return Promise.reject(a)}}};Wi.ConfigGet=wc});var fd=l(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.OrgDisplay=void 0;var wS=Gi(),IS=Bi(),RS=Xi(),Ic=class{async getOrgInfo(e){let t=new wS.CliCommandExecutor(new RS.SfCommandBuilder().withArg("org:display").withJson().build(),{cwd:e}).execute(),s=await new IS.CommandOutput().getCmdResult(t);try{let i=JSON.parse(s).result;return Promise.resolve(i)}catch{return Promise.reject(s)}}};Yi.OrgDisplay=Ic});var Os=l((dN,hd)=>{var xS="2.0.0",PS=Number.MAX_SAFE_INTEGER||9007199254740991,AS=16,NS=256-6,DS=["major","premajor","minor","preminor","patch","prepatch","prerelease"];hd.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:AS,MAX_SAFE_BUILD_LENGTH:NS,MAX_SAFE_INTEGER:PS,RELEASE_TYPES:DS,SEMVER_SPEC_VERSION:xS,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ws=l((pN,dd)=>{var LS=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};dd.exports=LS});var hn=l((Xt,pd)=>{var{MAX_SAFE_COMPONENT_LENGTH:Rc,MAX_SAFE_BUILD_LENGTH:qS,MAX_LENGTH:kS}=Os(),jS=ws();Xt=pd.exports={};var FS=Xt.re=[],MS=Xt.safeRe=[],A=Xt.src=[],N=Xt.t={},US=0,xc="[a-zA-Z0-9-]",GS=[["\\s",1],["\\d",kS],[xc,qS]],$S=r=>{for(let[e,t]of GS)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},K=(r,e,t)=>{let n=$S(e),s=US++;jS(r,s,e),N[r]=s,A[s]=e,FS[s]=new RegExp(e,t?"g":void 0),MS[s]=new RegExp(n,t?"g":void 0)};K("NUMERICIDENTIFIER","0|[1-9]\\d*");K("NUMERICIDENTIFIERLOOSE","\\d+");K("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${xc}*`);K("MAINVERSION",`(${A[N.NUMERICIDENTIFIER]})\\.(${A[N.NUMERICIDENTIFIER]})\\.(${A[N.NUMERICIDENTIFIER]})`);K("MAINVERSIONLOOSE",`(${A[N.NUMERICIDENTIFIERLOOSE]})\\.(${A[N.NUMERICIDENTIFIERLOOSE]})\\.(${A[N.NUMERICIDENTIFIERLOOSE]})`);K("PRERELEASEIDENTIFIER",`(?:${A[N.NUMERICIDENTIFIER]}|${A[N.NONNUMERICIDENTIFIER]})`);K("PRERELEASEIDENTIFIERLOOSE",`(?:${A[N.NUMERICIDENTIFIERLOOSE]}|${A[N.NONNUMERICIDENTIFIER]})`);K("PRERELEASE",`(?:-(${A[N.PRERELEASEIDENTIFIER]}(?:\\.${A[N.PRERELEASEIDENTIFIER]})*))`);K("PRERELEASELOOSE",`(?:-?(${A[N.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${A[N.PRERELEASEIDENTIFIERLOOSE]})*))`);K("BUILDIDENTIFIER",`${xc}+`);K("BUILD",`(?:\\+(${A[N.BUILDIDENTIFIER]}(?:\\.${A[N.BUILDIDENTIFIER]})*))`);K("FULLPLAIN",`v?${A[N.MAINVERSION]}${A[N.PRERELEASE]}?${A[N.BUILD]}?`);K("FULL",`^${A[N.FULLPLAIN]}$`);K("LOOSEPLAIN",`[v=\\s]*${A[N.MAINVERSIONLOOSE]}${A[N.PRERELEASELOOSE]}?${A[N.BUILD]}?`);K("LOOSE",`^${A[N.LOOSEPLAIN]}$`);K("GTLT","((?:<|>)?=?)");K("XRANGEIDENTIFIERLOOSE",`${A[N.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);K("XRANGEIDENTIFIER",`${A[N.NUMERICIDENTIFIER]}|x|X|\\*`);K("XRANGEPLAIN",`[v=\\s]*(${A[N.XRANGEIDENTIFIER]})(?:\\.(${A[N.XRANGEIDENTIFIER]})(?:\\.(${A[N.XRANGEIDENTIFIER]})(?:${A[N.PRERELEASE]})?${A[N.BUILD]}?)?)?`);K("XRANGEPLAINLOOSE",`[v=\\s]*(${A[N.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[N.XRANGEIDENTIFIERLOOSE]})(?:\\.(${A[N.XRANGEIDENTIFIERLOOSE]})(?:${A[N.PRERELEASELOOSE]})?${A[N.BUILD]}?)?)?`);K("XRANGE",`^${A[N.GTLT]}\\s*${A[N.XRANGEPLAIN]}$`);K("XRANGELOOSE",`^${A[N.GTLT]}\\s*${A[N.XRANGEPLAINLOOSE]}$`);K("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Rc}})(?:\\.(\\d{1,${Rc}}))?(?:\\.(\\d{1,${Rc}}))?`);K("COERCE",`${A[N.COERCEPLAIN]}(?:$|[^\\d])`);K("COERCEFULL",A[N.COERCEPLAIN]+`(?:${A[N.PRERELEASE]})?(?:${A[N.BUILD]})?(?:$|[^\\d])`);K("COERCERTL",A[N.COERCE],!0);K("COERCERTLFULL",A[N.COERCEFULL],!0);K("LONETILDE","(?:~>?)");K("TILDETRIM",`(\\s*)${A[N.LONETILDE]}\\s+`,!0);Xt.tildeTrimReplace="$1~";K("TILDE",`^${A[N.LONETILDE]}${A[N.XRANGEPLAIN]}$`);K("TILDELOOSE",`^${A[N.LONETILDE]}${A[N.XRANGEPLAINLOOSE]}$`);K("LONECARET","(?:\\^)");K("CARETTRIM",`(\\s*)${A[N.LONECARET]}\\s+`,!0);Xt.caretTrimReplace="$1^";K("CARET",`^${A[N.LONECARET]}${A[N.XRANGEPLAIN]}$`);K("CARETLOOSE",`^${A[N.LONECARET]}${A[N.XRANGEPLAINLOOSE]}$`);K("COMPARATORLOOSE",`^${A[N.GTLT]}\\s*(${A[N.LOOSEPLAIN]})$|^$`);K("COMPARATOR",`^${A[N.GTLT]}\\s*(${A[N.FULLPLAIN]})$|^$`);K("COMPARATORTRIM",`(\\s*)${A[N.GTLT]}\\s*(${A[N.LOOSEPLAIN]}|${A[N.XRANGEPLAIN]})`,!0);Xt.comparatorTrimReplace="$1$2$3";K("HYPHENRANGE",`^\\s*(${A[N.XRANGEPLAIN]})\\s+-\\s+(${A[N.XRANGEPLAIN]})\\s*$`);K("HYPHENRANGELOOSE",`^\\s*(${A[N.XRANGEPLAINLOOSE]})\\s+-\\s+(${A[N.XRANGEPLAINLOOSE]})\\s*$`);K("STAR","(<|>)?=?\\s*\\*");K("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");K("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var zi=l((gN,gd)=>{var HS=Object.freeze({loose:!0}),BS=Object.freeze({}),VS=r=>r?typeof r!="object"?HS:r:BS;gd.exports=VS});var Pc=l((vN,md)=>{var vd=/^[0-9]+$/,_d=(r,e)=>{let t=vd.test(r),n=vd.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},XS=(r,e)=>_d(e,r);md.exports={compareIdentifiers:_d,rcompareIdentifiers:XS}});var $e=l((_N,Sd)=>{var Ki=ws(),{MAX_LENGTH:Ed,MAX_SAFE_INTEGER:Zi}=Os(),{safeRe:yd,t:bd}=hn(),WS=zi(),{compareIdentifiers:dn}=Pc(),ut=class{constructor(e,t){if(t=WS(t),e instanceof ut){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Ed)throw new TypeError(`version is longer than ${Ed} characters`);Ki("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?yd[bd.LOOSE]:yd[bd.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Zi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Zi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Zi||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Zi)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ki("SemVer.compare",this.version,this.options,e),!(e instanceof ut)){if(typeof e=="string"&&e===this.version)return 0;e=new ut(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ut||(e=new ut(e,this.options)),dn(this.major,e.major)||dn(this.minor,e.minor)||dn(this.patch,e.patch)}comparePre(e){if(e instanceof ut||(e=new ut(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=e.prerelease[t];if(Ki("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return dn(n,s)}while(++t)}compareBuild(e){e instanceof ut||(e=new ut(e,this.options));let t=0;do{let n=this.build[t],s=e.build[t];if(Ki("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return dn(n,s)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),dn(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Sd.exports=ut});var Cr=l((mN,Td)=>{var Cd=$e(),YS=(r,e,t=!1)=>{if(r instanceof Cd)return r;try{return new Cd(r,e)}catch(n){if(!t)return null;throw n}};Td.exports=YS});var wd=l((EN,Od)=>{var zS=Cr(),KS=(r,e)=>{let t=zS(r,e);return t?t.version:null};Od.exports=KS});var Rd=l((yN,Id)=>{var ZS=Cr(),JS=(r,e)=>{let t=ZS(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Id.exports=JS});var Ad=l((bN,Pd)=>{var xd=$e(),QS=(r,e,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new xd(r instanceof xd?r.version:r,t).inc(e,n,s).version}catch{return null}};Pd.exports=QS});var Ld=l((SN,Dd)=>{var Nd=Cr(),eC=(r,e)=>{let t=Nd(r,null,!0),n=Nd(e,null,!0),s=t.compare(n);if(s===0)return null;let i=s>0,o=i?t:n,a=i?n:t,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let f=c?"pre":"";return t.major!==n.major?f+"major":t.minor!==n.minor?f+"minor":t.patch!==n.patch?f+"patch":"prerelease"};Dd.exports=eC});var kd=l((CN,qd)=>{var tC=$e(),rC=(r,e)=>new tC(r,e).major;qd.exports=rC});var Fd=l((TN,jd)=>{var nC=$e(),sC=(r,e)=>new nC(r,e).minor;jd.exports=sC});var Ud=l((ON,Md)=>{var iC=$e(),oC=(r,e)=>new iC(r,e).patch;Md.exports=oC});var $d=l((wN,Gd)=>{var aC=Cr(),cC=(r,e)=>{let t=aC(r,e);return t&&t.prerelease.length?t.prerelease:null};Gd.exports=cC});var _t=l((IN,Bd)=>{var Hd=$e(),uC=(r,e,t)=>new Hd(r,t).compare(new Hd(e,t));Bd.exports=uC});var Xd=l((RN,Vd)=>{var lC=_t(),fC=(r,e,t)=>lC(e,r,t);Vd.exports=fC});var Yd=l((xN,Wd)=>{var hC=_t(),dC=(r,e)=>hC(r,e,!0);Wd.exports=dC});var Ji=l((PN,Kd)=>{var zd=$e(),pC=(r,e,t)=>{let n=new zd(r,t),s=new zd(e,t);return n.compare(s)||n.compareBuild(s)};Kd.exports=pC});var Jd=l((AN,Zd)=>{var gC=Ji(),vC=(r,e)=>r.sort((t,n)=>gC(t,n,e));Zd.exports=vC});var ep=l((NN,Qd)=>{var _C=Ji(),mC=(r,e)=>r.sort((t,n)=>_C(n,t,e));Qd.exports=mC});var Is=l((DN,tp)=>{var EC=_t(),yC=(r,e,t)=>EC(r,e,t)>0;tp.exports=yC});var Qi=l((LN,rp)=>{var bC=_t(),SC=(r,e,t)=>bC(r,e,t)<0;rp.exports=SC});var Ac=l((qN,np)=>{var CC=_t(),TC=(r,e,t)=>CC(r,e,t)===0;np.exports=TC});var Nc=l((kN,sp)=>{var OC=_t(),wC=(r,e,t)=>OC(r,e,t)!==0;sp.exports=wC});var eo=l((jN,ip)=>{var IC=_t(),RC=(r,e,t)=>IC(r,e,t)>=0;ip.exports=RC});var to=l((FN,op)=>{var xC=_t(),PC=(r,e,t)=>xC(r,e,t)<=0;op.exports=PC});var Dc=l((MN,ap)=>{var AC=Ac(),NC=Nc(),DC=Is(),LC=eo(),qC=Qi(),kC=to(),jC=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return AC(r,t,n);case"!=":return NC(r,t,n);case">":return DC(r,t,n);case">=":return LC(r,t,n);case"<":return qC(r,t,n);case"<=":return kC(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};ap.exports=jC});var up=l((UN,cp)=>{var FC=$e(),MC=Cr(),{safeRe:ro,t:no}=hn(),UC=(r,e)=>{if(r instanceof FC)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?ro[no.COERCEFULL]:ro[no.COERCE]);else{let c=e.includePrerelease?ro[no.COERCERTLFULL]:ro[no.COERCERTL],u;for(;(u=c.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(t===null)return null;let n=t[2],s=t[3]||"0",i=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return MC(`${n}.${s}.${i}${o}${a}`,e)};cp.exports=UC});var fp=l((GN,lp)=>{"use strict";lp.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var dp=l(($N,hp)=>{"use strict";hp.exports=ue;ue.Node=Tr;ue.create=ue;function ue(r){var e=this;if(e instanceof ue||(e=new ue),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}ue.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};ue.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};ue.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};ue.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)$C(this,arguments[r]);return this.length};ue.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)HC(this,arguments[r]);return this.length};ue.prototype.pop=function(){if(!!this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};ue.prototype.shift=function(){if(!!this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};ue.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};ue.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};ue.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};ue.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};ue.prototype.map=function(r,e){e=e||this;for(var t=new ue,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};ue.prototype.mapReverse=function(r,e){e=e||this;for(var t=new ue,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};ue.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)t=r(t,n.value,s),n=n.next;return t};ue.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)t=r(t,n.value,s),n=n.prev;return t};ue.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};ue.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};ue.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new ue;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(;s!==null&&n<e;n++,s=s.next)t.push(s.value);return t};ue.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new ue;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,s=this.tail;s!==null&&n>e;n--)s=s.prev;for(;s!==null&&n>r;n--,s=s.prev)t.push(s.value);return t};ue.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(var i=[],n=0;s&&n<e;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<t.length;n++)s=GC(this,s,t[n]);return i};ue.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function GC(r,e,t){var n=e===r.head?new Tr(t,null,e,r):new Tr(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function $C(r,e){r.tail=new Tr(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function HC(r,e){r.head=new Tr(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Tr(r,e,t,n){if(!(this instanceof Tr))return new Tr(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{fp()(ue)}catch{}});var mp=l((HN,_p)=>{"use strict";var BC=dp(),Or=Symbol("max"),Yt=Symbol("length"),pn=Symbol("lengthCalculator"),xs=Symbol("allowStale"),wr=Symbol("maxAge"),Wt=Symbol("dispose"),pp=Symbol("noDisposeOnSet"),qe=Symbol("lruList"),Rt=Symbol("cache"),vp=Symbol("updateAgeOnGet"),Lc=()=>1,kc=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[Or]=e.max||1/0,n=e.length||Lc;if(this[pn]=typeof n!="function"?Lc:n,this[xs]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[wr]=e.maxAge||0,this[Wt]=e.dispose,this[pp]=e.noDisposeOnSet||!1,this[vp]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Or]=e||1/0,Rs(this)}get max(){return this[Or]}set allowStale(e){this[xs]=!!e}get allowStale(){return this[xs]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[wr]=e,Rs(this)}get maxAge(){return this[wr]}set lengthCalculator(e){typeof e!="function"&&(e=Lc),e!==this[pn]&&(this[pn]=e,this[Yt]=0,this[qe].forEach(t=>{t.length=this[pn](t.value,t.key),this[Yt]+=t.length})),Rs(this)}get lengthCalculator(){return this[pn]}get length(){return this[Yt]}get itemCount(){return this[qe].length}rforEach(e,t){t=t||this;for(let n=this[qe].tail;n!==null;){let s=n.prev;gp(this,e,n,t),n=s}}forEach(e,t){t=t||this;for(let n=this[qe].head;n!==null;){let s=n.next;gp(this,e,n,t),n=s}}keys(){return this[qe].toArray().map(e=>e.key)}values(){return this[qe].toArray().map(e=>e.value)}reset(){this[Wt]&&this[qe]&&this[qe].length&&this[qe].forEach(e=>this[Wt](e.key,e.value)),this[Rt]=new Map,this[qe]=new BC,this[Yt]=0}dump(){return this[qe].map(e=>so(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[qe]}set(e,t,n){if(n=n||this[wr],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let s=n?Date.now():0,i=this[pn](t,e);if(this[Rt].has(e)){if(i>this[Or])return gn(this,this[Rt].get(e)),!1;let c=this[Rt].get(e).value;return this[Wt]&&(this[pp]||this[Wt](e,c.value)),c.now=s,c.maxAge=n,c.value=t,this[Yt]+=i-c.length,c.length=i,this.get(e),Rs(this),!0}let o=new jc(e,t,i,s,n);return o.length>this[Or]?(this[Wt]&&this[Wt](e,t),!1):(this[Yt]+=o.length,this[qe].unshift(o),this[Rt].set(e,this[qe].head),Rs(this),!0)}has(e){if(!this[Rt].has(e))return!1;let t=this[Rt].get(e).value;return!so(this,t)}get(e){return qc(this,e,!0)}peek(e){return qc(this,e,!1)}pop(){let e=this[qe].tail;return e?(gn(this,e),e.value):null}del(e){gn(this,this[Rt].get(e))}load(e){this.reset();let t=Date.now();for(let n=e.length-1;n>=0;n--){let s=e[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{let o=i-t;o>0&&this.set(s.k,s.v,o)}}}prune(){this[Rt].forEach((e,t)=>qc(this,t,!1))}},qc=(r,e,t)=>{let n=r[Rt].get(e);if(n){let s=n.value;if(so(r,s)){if(gn(r,n),!r[xs])return}else t&&(r[vp]&&(n.value.now=Date.now()),r[qe].unshiftNode(n));return s.value}},so=(r,e)=>{if(!e||!e.maxAge&&!r[wr])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[wr]&&t>r[wr]},Rs=r=>{if(r[Yt]>r[Or])for(let e=r[qe].tail;r[Yt]>r[Or]&&e!==null;){let t=e.prev;gn(r,e),e=t}},gn=(r,e)=>{if(e){let t=e.value;r[Wt]&&r[Wt](t.key,t.value),r[Yt]-=t.length,r[Rt].delete(t.key),r[qe].removeNode(e)}},jc=class{constructor(e,t,n,s,i){this.key=e,this.value=t,this.length=n,this.now=s,this.maxAge=i||0}},gp=(r,e,t,n)=>{let s=t.value;so(r,s)&&(gn(r,t),r[xs]||(s=void 0)),s&&e.call(n,s.value,s.key,r)};_p.exports=kc});var mt=l((BN,Sp)=>{var Ir=class{constructor(e,t){if(t=XC(t),e instanceof Ir)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Ir(e.raw,t);if(e instanceof Fc)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!yp(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&QC(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&ZC)|(this.options.loose&&JC))+":"+e,s=Ep.get(n);if(s)return s;let i=this.options.loose,o=i?it[We.HYPHENRANGELOOSE]:it[We.HYPHENRANGE];e=e.replace(o,uT(this.options.includePrerelease)),be("hyphen replace",e),e=e.replace(it[We.COMPARATORTRIM],YC),be("comparator trim",e),e=e.replace(it[We.TILDETRIM],zC),be("tilde trim",e),e=e.replace(it[We.CARETTRIM],KC),be("caret trim",e);let a=e.split(" ").map(d=>eT(d,this.options)).join(" ").split(/\s+/).map(d=>cT(d,this.options));i&&(a=a.filter(d=>(be("loose invalid filter",d,this.options),!!d.match(it[We.COMPARATORLOOSE])))),be("range list",a);let c=new Map,u=a.map(d=>new Fc(d,this.options));for(let d of u){if(yp(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let f=[...c.values()];return Ep.set(n,f),f}intersects(e,t){if(!(e instanceof Ir))throw new TypeError("a Range is required");return this.set.some(n=>bp(n,t)&&e.set.some(s=>bp(s,t)&&n.every(i=>s.every(o=>i.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new WC(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(lT(this.set[t],e,this.options))return!0;return!1}};Sp.exports=Ir;var VC=mp(),Ep=new VC({max:1e3}),XC=zi(),Fc=Ps(),be=ws(),WC=$e(),{safeRe:it,t:We,comparatorTrimReplace:YC,tildeTrimReplace:zC,caretTrimReplace:KC}=hn(),{FLAG_INCLUDE_PRERELEASE:ZC,FLAG_LOOSE:JC}=Os(),yp=r=>r.value==="<0.0.0-0",QC=r=>r.value==="",bp=(r,e)=>{let t=!0,n=r.slice(),s=n.pop();for(;t&&n.length;)t=n.every(i=>s.intersects(i,e)),s=n.pop();return t},eT=(r,e)=>(be("comp",r,e),r=nT(r,e),be("caret",r),r=tT(r,e),be("tildes",r),r=iT(r,e),be("xrange",r),r=aT(r,e),be("stars",r),r),Ye=r=>!r||r.toLowerCase()==="x"||r==="*",tT=(r,e)=>r.trim().split(/\s+/).map(t=>rT(t,e)).join(" "),rT=(r,e)=>{let t=e.loose?it[We.TILDELOOSE]:it[We.TILDE];return r.replace(t,(n,s,i,o,a)=>{be("tilde",r,n,s,i,o,a);let c;return Ye(s)?c="":Ye(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:Ye(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(be("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,be("tilde return",c),c})},nT=(r,e)=>r.trim().split(/\s+/).map(t=>sT(t,e)).join(" "),sT=(r,e)=>{be("caret",r,e);let t=e.loose?it[We.CARETLOOSE]:it[We.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(s,i,o,a,c)=>{be("caret",r,s,i,o,a,c);let u;return Ye(i)?u="":Ye(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:Ye(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(be("replaceCaret pr",c),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(be("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),be("caret return",u),u})},iT=(r,e)=>(be("replaceXRanges",r,e),r.split(/\s+/).map(t=>oT(t,e)).join(" ")),oT=(r,e)=>{r=r.trim();let t=e.loose?it[We.XRANGELOOSE]:it[We.XRANGE];return r.replace(t,(n,s,i,o,a,c)=>{be("xRange",r,n,s,i,o,a,c);let u=Ye(i),f=u||Ye(o),d=f||Ye(a),_=d;return s==="="&&_&&(s=""),c=e.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&_?(f&&(o=0),a=0,s===">"?(s=">=",f?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",f?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):f?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),be("xRange return",n),n})},aT=(r,e)=>(be("replaceStars",r,e),r.trim().replace(it[We.STAR],"")),cT=(r,e)=>(be("replaceGTE0",r,e),r.trim().replace(it[e.includePrerelease?We.GTE0PRE:We.GTE0],"")),uT=r=>(e,t,n,s,i,o,a,c,u,f,d,_,m)=>(Ye(n)?t="":Ye(s)?t=`>=${n}.0.0${r?"-0":""}`:Ye(i)?t=`>=${n}.${s}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,Ye(u)?c="":Ye(f)?c=`<${+u+1}.0.0-0`:Ye(d)?c=`<${u}.${+f+1}.0-0`:_?c=`<=${u}.${f}.${d}-${_}`:r?c=`<${u}.${f}.${+d+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),lT=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(be(r[n].semver),r[n].semver!==Fc.ANY&&r[n].semver.prerelease.length>0){let s=r[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var Ps=l((VN,Rp)=>{var As=Symbol("SemVer ANY"),vn=class{static get ANY(){return As}constructor(e,t){if(t=Cp(t),e instanceof vn){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Uc("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===As?this.value="":this.value=this.operator+this.semver.version,Uc("comp",this)}parse(e){let t=this.options.loose?Tp[Op.COMPARATORLOOSE]:Tp[Op.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new wp(n[2],this.options.loose):this.semver=As}toString(){return this.value}test(e){if(Uc("Comparator.test",e,this.options.loose),this.semver===As||e===As)return!0;if(typeof e=="string")try{e=new wp(e,this.options)}catch{return!1}return Mc(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof vn))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Ip(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new Ip(this.value,t).test(e.semver):(t=Cp(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Mc(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Mc(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Rp.exports=vn;var Cp=zi(),{safeRe:Tp,t:Op}=hn(),Mc=Dc(),Uc=ws(),wp=$e(),Ip=mt()});var Ns=l((XN,xp)=>{var fT=mt(),hT=(r,e,t)=>{try{e=new fT(e,t)}catch{return!1}return e.test(r)};xp.exports=hT});var Ap=l((WN,Pp)=>{var dT=mt(),pT=(r,e)=>new dT(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));Pp.exports=pT});var Dp=l((YN,Np)=>{var gT=$e(),vT=mt(),_T=(r,e,t)=>{let n=null,s=null,i=null;try{i=new vT(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new gT(n,t))}),n};Np.exports=_T});var qp=l((zN,Lp)=>{var mT=$e(),ET=mt(),yT=(r,e,t)=>{let n=null,s=null,i=null;try{i=new ET(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new mT(n,t))}),n};Lp.exports=yT});var Fp=l((KN,jp)=>{var Gc=$e(),bT=mt(),kp=Is(),ST=(r,e)=>{r=new bT(r,e);let t=new Gc("0.0.0");if(r.test(t)||(t=new Gc("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let s=r.set[n],i=null;s.forEach(o=>{let a=new Gc(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||kp(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||kp(t,i))&&(t=i)}return t&&r.test(t)?t:null};jp.exports=ST});var Up=l((ZN,Mp)=>{var CT=mt(),TT=(r,e)=>{try{return new CT(r,e).range||"*"}catch{return null}};Mp.exports=TT});var io=l((JN,Bp)=>{var OT=$e(),Hp=Ps(),{ANY:wT}=Hp,IT=mt(),RT=Ns(),Gp=Is(),$p=Qi(),xT=to(),PT=eo(),AT=(r,e,t,n)=>{r=new OT(r,n),e=new IT(e,n);let s,i,o,a,c;switch(t){case">":s=Gp,i=xT,o=$p,a=">",c=">=";break;case"<":s=$p,i=PT,o=Gp,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(RT(r,e,n))return!1;for(let u=0;u<e.set.length;++u){let f=e.set[u],d=null,_=null;if(f.forEach(m=>{m.semver===wT&&(m=new Hp(">=0.0.0")),d=d||m,_=_||m,s(m.semver,d.semver,n)?d=m:o(m.semver,_.semver,n)&&(_=m)}),d.operator===a||d.operator===c||(!_.operator||_.operator===a)&&i(r,_.semver))return!1;if(_.operator===c&&o(r,_.semver))return!1}return!0};Bp.exports=AT});var Xp=l((QN,Vp)=>{var NT=io(),DT=(r,e,t)=>NT(r,e,">",t);Vp.exports=DT});var Yp=l((eD,Wp)=>{var LT=io(),qT=(r,e,t)=>LT(r,e,"<",t);Wp.exports=qT});var Zp=l((tD,Kp)=>{var zp=mt(),kT=(r,e,t)=>(r=new zp(r,t),e=new zp(e,t),r.intersects(e,t));Kp.exports=kT});var Qp=l((rD,Jp)=>{var jT=Ns(),FT=_t();Jp.exports=(r,e,t)=>{let n=[],s=null,i=null,o=r.sort((f,d)=>FT(f,d,t));for(let f of o)jT(f,e,t)?(i=f,s||(s=f)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[f,d]of n)f===d?a.push(f):!d&&f===o[0]?a.push("*"):d?f===o[0]?a.push(`<=${d}`):a.push(`${f} - ${d}`):a.push(`>=${f}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var ig=l((nD,sg)=>{var eg=mt(),Hc=Ps(),{ANY:$c}=Hc,Ds=Ns(),Bc=_t(),MT=(r,e,t={})=>{if(r===e)return!0;r=new eg(r,t),e=new eg(e,t);let n=!1;e:for(let s of r.set){for(let i of e.set){let o=GT(s,i,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},UT=[new Hc(">=0.0.0-0")],tg=[new Hc(">=0.0.0")],GT=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===$c){if(e.length===1&&e[0].semver===$c)return!0;t.includePrerelease?r=UT:r=tg}if(e.length===1&&e[0].semver===$c){if(t.includePrerelease)return!0;e=tg}let n=new Set,s,i;for(let m of r)m.operator===">"||m.operator===">="?s=rg(s,m,t):m.operator==="<"||m.operator==="<="?i=ng(i,m,t):n.add(m.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Bc(s.semver,i.semver,t),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let m of n){if(s&&!Ds(m,String(s),t)||i&&!Ds(m,String(i),t))return null;for(let y of e)if(!Ds(m,String(y),t))return!1;return!0}let a,c,u,f,d=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,_=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let m of e){if(f=f||m.operator===">"||m.operator===">=",u=u||m.operator==="<"||m.operator==="<=",s){if(_&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===_.major&&m.semver.minor===_.minor&&m.semver.patch===_.patch&&(_=!1),m.operator===">"||m.operator===">="){if(a=rg(s,m,t),a===m&&a!==s)return!1}else if(s.operator===">="&&!Ds(s.semver,String(m),t))return!1}if(i){if(d&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===d.major&&m.semver.minor===d.minor&&m.semver.patch===d.patch&&(d=!1),m.operator==="<"||m.operator==="<="){if(c=ng(i,m,t),c===m&&c!==i)return!1}else if(i.operator==="<="&&!Ds(i.semver,String(m),t))return!1}if(!m.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&f&&!s&&o!==0||_||d)},rg=(r,e,t)=>{if(!r)return e;let n=Bc(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},ng=(r,e,t)=>{if(!r)return e;let n=Bc(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};sg.exports=MT});var ug=l((sD,cg)=>{var Vc=hn(),og=Os(),$T=$e(),ag=Pc(),HT=Cr(),BT=wd(),VT=Rd(),XT=Ad(),WT=Ld(),YT=kd(),zT=Fd(),KT=Ud(),ZT=$d(),JT=_t(),QT=Xd(),eO=Yd(),tO=Ji(),rO=Jd(),nO=ep(),sO=Is(),iO=Qi(),oO=Ac(),aO=Nc(),cO=eo(),uO=to(),lO=Dc(),fO=up(),hO=Ps(),dO=mt(),pO=Ns(),gO=Ap(),vO=Dp(),_O=qp(),mO=Fp(),EO=Up(),yO=io(),bO=Xp(),SO=Yp(),CO=Zp(),TO=Qp(),OO=ig();cg.exports={parse:HT,valid:BT,clean:VT,inc:XT,diff:WT,major:YT,minor:zT,patch:KT,prerelease:ZT,compare:JT,rcompare:QT,compareLoose:eO,compareBuild:tO,sort:rO,rsort:nO,gt:sO,lt:iO,eq:oO,neq:aO,gte:cO,lte:uO,cmp:lO,coerce:fO,Comparator:hO,Range:dO,satisfies:pO,toComparators:gO,maxSatisfying:vO,minSatisfying:_O,minVersion:mO,validRange:EO,outside:yO,gtr:bO,ltr:SO,intersects:CO,simplifyRange:TO,subset:OO,SemVer:$T,re:Vc.re,src:Vc.src,tokens:Vc.t,SEMVER_SPEC_VERSION:og.SEMVER_SPEC_VERSION,RELEASE_TYPES:og.RELEASE_TYPES,compareIdentifiers:ag.compareIdentifiers,rcompareIdentifiers:ag.rcompareIdentifiers}});var lg=l(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.CliVersionStatus=_n.CliStatusEnum=void 0;var wO=require("child_process"),lr=ug(),fr;(function(r){r[r.SFv2=1]="SFv2",r[r.outdatedSFDXVersion=2]="outdatedSFDXVersion",r[r.onlySFv1=3]="onlySFv1",r[r.cliNotInstalled=4]="cliNotInstalled",r[r.bothSFDXAndSFInstalled=5]="bothSFDXAndSFInstalled",r[r.SFDXv7Valid=6]="SFDXv7Valid"})(fr||(_n.CliStatusEnum=fr={}));var Xc=class{getCliVersion(e){try{return(0,wO.execSync)(`${e?"sfdx":"sf"} --version`).toString()}catch{return"No CLI"}}parseCliVersion(e){let n=/(?:sfdx-cli\/|@salesforce\/cli\/)(\d+\.\d+\.\d+)/.exec(e);return n?n[1]:"0.0.0"}validateCliInstallationAndVersion(e,t){if(lr.satisfies(e,"0.0.0")&&lr.satisfies(t,"0.0.0"))return fr.cliNotInstalled;if(lr.satisfies(e,"0.0.0")&&lr.satisfies(t,"1.x"))return fr.onlySFv1;if(lr.satisfies(t,"2.x")&&!lr.satisfies(e,t))return fr.bothSFDXAndSFInstalled;let n="7.193.2";return lr.satisfies(t,"<2.0.0")?lr.satisfies(e,`<${n}`)?fr.outdatedSFDXVersion:fr.SFDXv7Valid:fr.SFv2}};_n.CliVersionStatus=Xc});var hg=l(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.CliVersionStatus=Re.CliStatusEnum=Re.SfCommandBuilder=Re.OrgDisplay=Re.GlobalCliEnvironment=Re.ConfigGet=Re.CommandOutput=Re.CommandBuilder=Re.CliCommandExecutor=Re.CliCommandExecution=void 0;var IO=ac();Object.defineProperty(Re,"CliCommandExecution",{enumerable:!0,get:function(){return IO.CliCommandExecution}});var RO=Gi();Object.defineProperty(Re,"CliCommandExecutor",{enumerable:!0,get:function(){return RO.CliCommandExecutor}});var xO=Cc();Object.defineProperty(Re,"CommandBuilder",{enumerable:!0,get:function(){return xO.CommandBuilder}});var PO=Bi();Object.defineProperty(Re,"CommandOutput",{enumerable:!0,get:function(){return PO.CommandOutput}});var AO=ld();Object.defineProperty(Re,"ConfigGet",{enumerable:!0,get:function(){return AO.ConfigGet}});var NO=yc();Object.defineProperty(Re,"GlobalCliEnvironment",{enumerable:!0,get:function(){return NO.GlobalCliEnvironment}});var DO=fd();Object.defineProperty(Re,"OrgDisplay",{enumerable:!0,get:function(){return DO.OrgDisplay}});var LO=Xi();Object.defineProperty(Re,"SfCommandBuilder",{enumerable:!0,get:function(){return LO.SfCommandBuilder}});var fg=lg();Object.defineProperty(Re,"CliStatusEnum",{enumerable:!0,get:function(){return fg.CliStatusEnum}});Object.defineProperty(Re,"CliVersionStatus",{enumerable:!0,get:function(){return fg.CliVersionStatus}})});var dg=l(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.extractJsonObject=void 0;var qO=r=>{let e=r.substring(r.indexOf("{"),r.lastIndexOf("}")+1);return JSON.parse(e)};oo.extractJsonObject=qO});var pg=l(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.ensureCurrentWorkingDirIsProjectPath=void 0;var kO=require("fs"),jO=r=>{r&&process.cwd()!==r&&kO.existsSync(r)&&process.chdir(r)};ao.ensureCurrentWorkingDirIsProjectPath=jO});var gg=l(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.ensureCurrentWorkingDirIsProjectPath=mn.extractJsonObject=void 0;var FO=dg();Object.defineProperty(mn,"extractJsonObject",{enumerable:!0,get:function(){return FO.extractJsonObject}});var MO=pg();Object.defineProperty(mn,"ensureCurrentWorkingDirIsProjectPath",{enumerable:!0,get:function(){return MO.ensureCurrentWorkingDirIsProjectPath}})});var vg=l(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.Localization=void 0;var Wc=class{constructor(e){this.delegate=e}localize(e,...t){return this.delegate.localize(e,...t)}};co.Localization=Wc});var _g=l(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.Message=void 0;var UO=require("util"),GO=fn(),Yc=class{constructor(e,t){this.messages=e,this.delegate=t}localize(e,...t){let n=this.getLabel(e);if(!n)return console.warn(`Missing label for key: ${e}`),n=`${GO.MISSING_LABEL_MSG} ${e}`,t.length>=1&&t.forEach(i=>{n+=` (${i})`}),n;let s=t;if(t.length>=1){let i=n.split("%s").length-1;return t.length!==i&&(console.log(`Arguments do not match for label '${e}', got ${t.length} but want ${i}`),t.length>i&&(s=t.slice(0,-(t.length-i)))),(0,UO.format)(n,...s)}return n}getLabel(e){return this.messages[e]?this.messages[e]:this.delegate?this.delegate.messages[e]:void 0}};uo.Message=Yc});var mg=l(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.Message=En.Localization=void 0;var $O=vg();Object.defineProperty(En,"Localization",{enumerable:!0,get:function(){return $O.Localization}});var HO=_g();Object.defineProperty(En,"Message",{enumerable:!0,get:function(){return HO.Message}})});var Eg=l(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.BaseCommand=void 0;var zc=class{constructor(e){this.queryString=e}getQueryString(){return this.queryString}};lo.BaseCommand=zc});var bg=l(yg=>{(()=>{var r={46:(i,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(a,c,{signal:u}={}){return new Promise((f,d)=>{function _(){u?.removeEventListener("abort",_),a.removeListener(c,m),a.removeListener("error",y)}function m(...P){_(),f(P)}function y(P){_(),d(P)}u?.addEventListener("abort",_),a.on(c,m),a.on("error",y)})}},54:function(i,o,a){"use strict";var c=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};let u=a(361),f=c(a(374)),d=c(a(304)),_=f.default("agent-base");function m(){let{stack:P}=new Error;return typeof P=="string"&&P.split(`
`).some(M=>M.indexOf("(https.js:")!==-1||M.indexOf("node:https:")!==-1)}function y(P,M){return new y.Agent(P,M)}(function(P){class M extends u.EventEmitter{constructor(L,O){super();let C=O;typeof L=="function"?this.callback=L:L&&(C=L),this.timeout=null,C&&typeof C.timeout=="number"&&(this.timeout=C.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:m()?443:80}set defaultPort(L){this.explicitDefaultPort=L}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:m()?"https:":"http:"}set protocol(L){this.explicitProtocol=L}callback(L,O,C){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(L,O){let C=Object.assign({},O);typeof C.secureEndpoint!="boolean"&&(C.secureEndpoint=m()),C.host==null&&(C.host="localhost"),C.port==null&&(C.port=C.secureEndpoint?443:80),C.protocol==null&&(C.protocol=C.secureEndpoint?"https:":"http:"),C.host&&C.path&&delete C.path,delete C.agent,delete C.hostname,delete C._defaultAgent,delete C.defaultPort,delete C.createConnection,L._last=!0,L.shouldKeepAlive=!1;let U=!1,B=null,q=C.timeout||this.timeout,S=I=>{L._hadError||(L.emit("error",I),L._hadError=!0)},E=()=>{B=null,U=!0;let I=new Error(`A "socket" was not created for HTTP request before ${q}ms`);I.code="ETIMEOUT",S(I)},w=I=>{U||(B!==null&&(clearTimeout(B),B=null),S(I))},G=I=>{if(U)return;if(B!=null&&(clearTimeout(B),B=null),D=I,Boolean(D)&&typeof D.addRequest=="function")return _("Callback returned another Agent instance %o",I.constructor.name),void I.addRequest(L,C);var D;if(I)return I.once("free",()=>{this.freeSocket(I,C)}),void L.onSocket(I);let H=new Error(`no Duplex stream was returned to agent-base for \`${L.method} ${L.path}\``);S(H)};if(typeof this.callback=="function"){this.promisifiedCallback||(this.callback.length>=3?(_("Converting legacy callback function to promise"),this.promisifiedCallback=d.default(this.callback)):this.promisifiedCallback=this.callback),typeof q=="number"&&q>0&&(B=setTimeout(E,q)),"port"in C&&typeof C.port!="number"&&(C.port=Number(C.port));try{_("Resolving socket for %o request: %o",C.protocol,`${L.method} ${L.path}`),Promise.resolve(this.promisifiedCallback(L,C)).then(G,w)}catch(I){Promise.reject(I).catch(w)}}else S(new Error("`callback` is not defined"))}freeSocket(L,O){_("Freeing socket %o %o",L.constructor.name,O),L.destroy()}destroy(){_("Destroying agent %o",this.constructor.name)}}P.Agent=M,P.prototype=P.Agent.prototype})(y||(y={})),i.exports=y},304:(i,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(a){return function(c,u){return new Promise((f,d)=>{a.call(this,c,u,(_,m)=>{_?d(_):f(m)})})}}},370:function(i,o,a){"use strict";var c=this&&this.__awaiter||function(L,O,C,U){return new(C||(C=Promise))(function(B,q){function S(G){try{w(U.next(G))}catch(I){q(I)}}function E(G){try{w(U.throw(G))}catch(I){q(I)}}function w(G){var I;G.done?B(G.value):(I=G.value,I instanceof C?I:new C(function(D){D(I)})).then(S,E)}w((U=U.apply(L,O||[])).next())})},u=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(o,"__esModule",{value:!0});let f=u(a(808)),d=u(a(404)),_=u(a(310)),m=u(a(374)),y=u(a(46)),P=a(54),M=(0,m.default)("http-proxy-agent");class W extends P.Agent{constructor(O){let C;if(C=typeof O=="string"?_.default.parse(O):O,!C)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");M("Creating new HttpProxyAgent instance: %o",C),super(C);let U=Object.assign({},C);var B;this.secureProxy=C.secureProxy||typeof(B=U.protocol)=="string"&&/^https:?$/i.test(B),U.host=U.hostname||U.host,typeof U.port=="string"&&(U.port=parseInt(U.port,10)),!U.port&&U.host&&(U.port=this.secureProxy?443:80),U.host&&U.path&&(delete U.path,delete U.pathname),this.proxy=U}callback(O,C){return c(this,void 0,void 0,function*(){let{proxy:U,secureProxy:B}=this,q=_.default.parse(O.path),S;if(q.protocol||(q.protocol="http:"),q.hostname||(q.hostname=C.hostname||C.host||null),q.port==null&&(C.port,1)&&(q.port=String(C.port)),q.port==="80"&&(q.port=""),O.path=_.default.format(q),U.auth&&O.setHeader("Proxy-Authorization",`Basic ${Buffer.from(U.auth).toString("base64")}`),B?(M("Creating `tls.Socket`: %o",U),S=d.default.connect(U)):(M("Creating `net.Socket`: %o",U),S=f.default.connect(U)),O._header){let E,w;M("Regenerating stored HTTP header string for request"),O._header=null,O._implicitHeader(),O.output&&O.output.length>0?(M("Patching connection write() output buffer with updated header"),E=O.output[0],w=E.indexOf(`\r
\r
`)+4,O.output[0]=O._header+E.substring(w),M("Output buffer: %o",O.output)):O.outputData&&O.outputData.length>0&&(M("Patching connection write() output buffer with updated header"),E=O.outputData[0].data,w=E.indexOf(`\r
\r
`)+4,O.outputData[0].data=O._header+E.substring(w),M("Output buffer: %o",O.outputData[0].data))}return yield(0,y.default)(S,"connect"),S})}}o.default=W},201:function(i,o,a){"use strict";let c=(this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}})(a(370));function u(f){return new c.default(f)}(function(f){f.HttpProxyAgent=c.default,f.prototype=c.default.prototype})(u||(u={})),i.exports=u},146:function(i,o,a){"use strict";var c=this&&this.__awaiter||function(C,U,B,q){return new(B||(B=Promise))(function(S,E){function w(D){try{I(q.next(D))}catch(H){E(H)}}function G(D){try{I(q.throw(D))}catch(H){E(H)}}function I(D){var H;D.done?S(D.value):(H=D.value,H instanceof B?H:new B(function(Z){Z(H)})).then(w,G)}I((q=q.apply(C,U||[])).next())})},u=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(o,"__esModule",{value:!0});let f=u(a(808)),d=u(a(404)),_=u(a(310)),m=u(a(491)),y=u(a(374)),P=a(54),M=u(a(829)),W=y.default("https-proxy-agent:agent");class L extends P.Agent{constructor(U){let B;if(B=typeof U=="string"?_.default.parse(U):U,!B)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");W("creating new HttpsProxyAgent instance: %o",B),super(B);let q=Object.assign({},B);var S;this.secureProxy=B.secureProxy||typeof(S=q.protocol)=="string"&&/^https:?$/i.test(S),q.host=q.hostname||q.host,typeof q.port=="string"&&(q.port=parseInt(q.port,10)),!q.port&&q.host&&(q.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in q)&&(q.ALPNProtocols=["http 1.1"]),q.host&&q.path&&(delete q.path,delete q.pathname),this.proxy=q}callback(U,B){return c(this,void 0,void 0,function*(){let{proxy:q,secureProxy:S}=this,E;S?(W("Creating `tls.Socket`: %o",q),E=d.default.connect(q)):(W("Creating `net.Socket`: %o",q),E=f.default.connect(q));let w=Object.assign({},q.headers),G=`CONNECT ${B.host}:${B.port} HTTP/1.1\r
`;q.auth&&(w["Proxy-Authorization"]=`Basic ${Buffer.from(q.auth).toString("base64")}`);let{host:I,port:D,secureEndpoint:H}=B;(function(Q,le){return Boolean(!le&&Q===80||le&&Q===443)})(D,H)||(I+=`:${D}`),w.Host=I,w.Connection="close";for(let Q of Object.keys(w))G+=`${Q}: ${w[Q]}\r
`;let Z=M.default(E);E.write(`${G}\r
`);let{statusCode:Ne,buffered:Fe}=yield Z;if(Ne===200){if(U.once("socket",O),B.secureEndpoint){W("Upgrading socket connection to TLS");let Q=B.servername||B.host;return d.default.connect(Object.assign(Object.assign({},function(le,...ae){let fe={},Se;for(Se in le)ae.includes(Se)||(fe[Se]=le[Se]);return fe}(B,"host","hostname","path","port")),{socket:E,servername:Q}))}return E}E.destroy();let Ie=new f.default.Socket({writable:!1});return Ie.readable=!0,U.once("socket",Q=>{W("replaying proxy buffer for failed request"),m.default(Q.listenerCount("data")>0),Q.push(Fe),Q.push(null)}),Ie})}}function O(C){C.resume()}o.default=L},18:function(i,o,a){"use strict";let c=(this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}})(a(146));function u(f){return new c.default(f)}(function(f){f.HttpsProxyAgent=c.default,f.prototype=c.default.prototype})(u||(u={})),i.exports=u},829:function(i,o,a){"use strict";var c=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(o,"__esModule",{value:!0});let u=c(a(374)).default("https-proxy-agent:parse-proxy-response");o.default=function(f){return new Promise((d,_)=>{let m=0,y=[];function P(){let L=f.read();L?function(O){y.push(O),m+=O.length;let C=Buffer.concat(y,m);if(C.indexOf(`\r
\r
`)===-1)return u("have not received end of HTTP headers yet..."),void P();let U=C.toString("ascii",0,C.indexOf(`\r
`)),B=+U.split(" ")[1];u("got proxy server response: %o",U),d({statusCode:B,buffered:C})}(L):f.once("readable",P)}function M(L){u("onclose had error %o",L)}function W(){u("onend")}f.on("error",function L(O){f.removeListener("end",W),f.removeListener("error",L),f.removeListener("close",M),f.removeListener("readable",P),u("onerror %o",O),_(O)}),f.on("close",M),f.on("end",W),P()})}},539:function(i,o,a){"use strict";var c,u=this&&this.__extends||(c=function(S,E){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,G){w.__proto__=G}||function(w,G){for(var I in G)Object.prototype.hasOwnProperty.call(G,I)&&(w[I]=G[I])},c(S,E)},function(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function w(){this.constructor=S}c(S,E),S.prototype=E===null?Object.create(E):(w.prototype=E.prototype,new w)}),f=this&&this.__assign||function(){return f=Object.assign||function(S){for(var E,w=1,G=arguments.length;w<G;w++)for(var I in E=arguments[w])Object.prototype.hasOwnProperty.call(E,I)&&(S[I]=E[I]);return S},f.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.getErrorStatusDescription=o.xhr=o.configure=void 0;var d=a(685),_=a(687),m=a(310),y=a(472),P=a(796),M=a(201),W=a(18);if(process.env.VSCODE_NLS_CONFIG){var L=process.env.VSCODE_NLS_CONFIG;y.config(JSON.parse(L))}var O=y.loadMessageBundle(),C=void 0,U=!0;function B(S){var E;return new Promise(function(w,G){var I=(0,m.parse)(S.url),D={hostname:I.hostname,agent:!!S.agent&&S.agent,port:I.port?parseInt(I.port):I.protocol==="https:"?443:80,path:I.path,method:S.type||"GET",headers:S.headers,rejectUnauthorized:typeof S.strictSSL!="boolean"||S.strictSSL};S.user&&S.password&&(D.auth=S.user+":"+S.password);var H=function(Z){if(Z.statusCode>=300&&Z.statusCode<400&&S.followRedirects&&S.followRedirects>0&&Z.headers.location){var Ne=Z.headers.location;Ne.startsWith("/")&&(Ne=(0,m.format)({protocol:I.protocol,hostname:I.hostname,port:I.port,pathname:Ne})),w(B(function(Fe){for(var Ie=[],Q=1;Q<arguments.length;Q++)Ie[Q-1]=arguments[Q];return Ie.forEach(function(le){return Object.keys(le).forEach(function(ae){return Fe[ae]=le[ae]})}),Fe}({},S,{url:Ne,followRedirects:S.followRedirects-1})))}else w({req:E,res:Z})};(E=I.protocol==="https:"?_.request(D,H):d.request(D,H)).on("error",G),S.timeout&&E.setTimeout(S.timeout),S.data&&E.write(S.data),E.end(),S.token&&(S.token.isCancellationRequested&&E.destroy(new q),S.token.onCancellationRequested(function(){E.destroy(new q)}))})}o.configure=function(S,E){C=S,U=E},o.xhr=function(S){return typeof(S=f({},S)).strictSSL!="boolean"&&(S.strictSSL=U),S.agent||(S.agent=function(E,w){w===void 0&&(w={});var G=(0,m.parse)(E),I=w.proxyUrl||function(Z){return Z.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:Z.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(G);if(!I)return null;var D=(0,m.parse)(I);if(!/^https?:$/.test(D.protocol))return null;var H={host:D.hostname,port:Number(D.port),auth:D.auth,rejectUnauthorized:typeof w.strictSSL!="boolean"||w.strictSSL,protocol:D.protocol};return G.protocol==="http:"?M(H):W(H)}(S.url,{proxyUrl:C,strictSSL:U})),typeof S.followRedirects!="number"&&(S.followRedirects=5),B(S).then(function(E){return new Promise(function(w,G){var I,D,H=E.res,Z=H,Ne=!1,Fe=H.headers&&H.headers["content-encoding"];if(Fe&&(I=S.type,D=E.res.statusCode,!(I==="HEAD"||D>=100&&D<200||D===204||D===304))){var Ie={flush:P.constants.Z_SYNC_FLUSH,finishFlush:P.constants.Z_SYNC_FLUSH};if(Fe==="gzip"){var Q=P.createGunzip(Ie);H.pipe(Q),Z=Q}else if(Fe==="deflate"){var le=P.createInflate(Ie);H.pipe(le),Z=le}}var ae=[];Z.on("data",function(fe){return ae.push(fe)}),Z.on("end",function(){if(!Ne){if(Ne=!0,S.followRedirects>0&&(H.statusCode>=300&&H.statusCode<=303||H.statusCode===307)){var fe=H.headers.location;if(fe.startsWith("/")){var Se=(0,m.parse)(S.url);fe=(0,m.format)({protocol:Se.protocol,hostname:Se.hostname,port:Se.port,pathname:fe})}if(fe){var qt={type:S.type,url:fe,user:S.user,password:S.password,headers:S.headers,timeout:S.timeout,followRedirects:S.followRedirects-1,data:S.data,token:S.token};return void(0,o.xhr)(qt).then(w,G)}}var Ht=Buffer.concat(ae),Tt={responseText:Ht.toString(),body:Ht,status:H.statusCode,headers:H.headers||{}};H.statusCode>=200&&H.statusCode<300||H.statusCode===1223?w(Tt):G(Tt)}}),Z.on("error",function(fe){var Se;Se=q.is(fe)?fe:{responseText:O("error","Unable to access {0}. Error: {1}",S.url,fe.message),body:Buffer.concat(ae),status:500,headers:{}},Ne=!0,G(Se)}),S.token&&(S.token.isCancellationRequested&&Z.destroy(new q),S.token.onCancellationRequested(function(){Z.destroy(new q)}))})},function(E){var w;return w=q.is(E)?E:{responseText:S.agent?O("error.cannot.connect.proxy","Unable to connect to {0} through a proxy. Error: {1}",S.url,E.message):O("error.cannot.connect","Unable to connect to {0}. Error: {1}",S.url,E.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(w)})},o.getErrorStatusDescription=function(S){if(!(S<400))switch(S){case 400:return O("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return O("status.401","Unauthorized. The server is refusing to respond.");case 403:return O("status.403","Forbidden. The server is refusing to respond.");case 404:return O("status.404","Not Found. The requested location could not be found.");case 405:return O("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return O("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return O("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return O("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return O("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return O("status.410","Gone. The requested page is no longer available.");case 411:return O("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return O("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return O("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return O("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return O("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return O("status.500","Internal Server Error.");case 501:return O("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 502:return O("status.502","Bad Gateway. The upstream server did not respond.");case 503:return O("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return O("status.416","HTTP status code {0}",S)}};var q=function(S){function E(){var w=S.call(this,"The user aborted a request")||this;return w.name="AbortError",Object.setPrototypeOf(w,E.prototype),w}return u(E,S),E.is=function(w){return w instanceof E},E}(Error)},800:(i,o,a)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.config=o.loadMessageBundle=o.localize=o.format=o.setPseudo=o.isPseudo=o.isDefined=o.BundleFormat=o.MessageFormat=void 0;var c,u,f,d=a(926);function _(y){return y!==void 0}function m(y,P){return o.isPseudo&&(y="\uFF3B"+y.replace(/[aouei]/g,"$&$&")+"\uFF3D"),P.length===0?y:y.replace(/\{(\d+)\}/g,function(M,W){var L=W[0],O=P[L],C=M;return typeof O=="string"?C=O:typeof O!="number"&&typeof O!="boolean"&&O!=null||(C=String(O)),C})}(f=o.MessageFormat||(o.MessageFormat={})).file="file",f.bundle="bundle",f.both="both",(u=o.BundleFormat||(o.BundleFormat={})).standalone="standalone",u.languagePack="languagePack",function(y){y.is=function(P){var M=P;return M&&_(M.key)&&_(M.comment)}}(c||(c={})),o.isDefined=_,o.isPseudo=!1,o.setPseudo=function(y){o.isPseudo=y},o.format=m,o.localize=function(y,P){for(var M=[],W=2;W<arguments.length;W++)M[W-2]=arguments[W];return m(P,M)},o.loadMessageBundle=function(y){return(0,d.default)().loadMessageBundle(y)},o.config=function(y){return(0,d.default)().config(y)}},926:(i,o)=>{"use strict";var a;function c(){if(a===void 0)throw new Error("No runtime abstraction layer installed");return a}Object.defineProperty(o,"__esModule",{value:!0}),function(u){u.install=function(f){if(f===void 0)throw new Error("No runtime abstraction layer provided");a=f}}(c||(c={})),o.default=c},472:(i,o,a)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.config=o.loadMessageBundle=o.BundleFormat=o.MessageFormat=void 0;var c=a(17),u=a(147),f=a(926),d=a(800),_=a(800);Object.defineProperty(o,"MessageFormat",{enumerable:!0,get:function(){return _.MessageFormat}}),Object.defineProperty(o,"BundleFormat",{enumerable:!0,get:function(){return _.BundleFormat}});var m,y,P=Object.prototype.toString;function M(E){return P.call(E)==="[object Number]"}function W(E){return P.call(E)==="[object String]"}function L(E){return JSON.parse(u.readFileSync(E,"utf8"))}function O(E){return function(w,G){for(var I=[],D=2;D<arguments.length;D++)I[D-2]=arguments[D];return M(w)?w>=E.length?void console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack)):(0,d.format)(E[w],I):W(G)?(console.warn("Message ".concat(G," didn't get externalized correctly.")),(0,d.format)(G,I)):void console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}function C(E,w){return m[E]=w,w}function U(E){try{return function(w){var G=L(c.join(w,"nls.metadata.json")),I=Object.create(null);for(var D in G){var H=G[D];I[D]=H.messages}return I}(E)}catch(w){return void console.log("Generating default bundle from meta data failed.",w)}}function B(E,w){var G;if(y.languagePackSupport===!0&&y.cacheRoot!==void 0&&y.languagePackId!==void 0&&y.translationsConfigFile!==void 0&&y.translationsConfig!==void 0)try{G=function(D,H){var Z,Ne,Fe,Ie=c.join(y.cacheRoot,"".concat(D.id,"-").concat(D.hash,".json")),Q=!1,le=!1;try{return Z=JSON.parse(u.readFileSync(Ie,{encoding:"utf8",flag:"r"})),Ne=Ie,Fe=new Date,u.utimes(Ne,Fe,Fe,function(){}),Z}catch(ae){if(ae.code==="ENOENT")le=!0;else{if(!(ae instanceof SyntaxError))throw ae;console.log("Syntax error parsing message bundle: ".concat(ae.message,".")),u.unlink(Ie,function(fe){fe&&console.error("Deleting corrupted bundle ".concat(Ie," failed."))}),Q=!0}}if(Z=function(ae,fe){var Se=y.translationsConfig[ae.id];if(Se){var qt=L(Se).contents,Ht=L(c.join(fe,"nls.metadata.json")),Tt=Object.create(null);for(var rn in Ht){var Xe=Ht[rn],ps=qt["".concat(ae.outDir,"/").concat(rn)];if(ps){for(var gs=[],Ot=0;Ot<Xe.keys.length;Ot++){var nn=Xe.keys[Ot],vs=ps[W(nn)?nn:nn.key];vs===void 0&&(vs=Xe.messages[Ot]),gs.push(vs)}Tt[rn]=gs}else Tt[rn]=Xe.messages}return Tt}}(D,H),!Z||Q)return Z;if(le)try{u.writeFileSync(Ie,JSON.stringify(Z),{encoding:"utf8",flag:"wx"})}catch(ae){if(ae.code==="EEXIST")return Z;throw ae}return Z}(E,w)}catch(D){console.log("Load or create bundle failed ",D)}if(!G){if(y.languagePackSupport)return U(w);var I=function(D){for(var H=y.language;H;){var Z=c.join(D,"nls.bundle.".concat(H,".json"));if(u.existsSync(Z))return Z;var Ne=H.lastIndexOf("-");H=Ne>0?H.substring(0,Ne):void 0}if(H===void 0&&(Z=c.join(D,"nls.bundle.json"),u.existsSync(Z)))return Z}(w);if(I)try{return L(I)}catch(D){console.log("Loading in the box message bundle failed.",D)}G=U(w)}return G}function q(E){if(!E)return d.localize;var w=c.extname(E);if(w&&(E=E.substr(0,E.length-w.length)),y.messageFormat===d.MessageFormat.both||y.messageFormat===d.MessageFormat.bundle){var G=function(Q){for(var le,ae=c.dirname(Q);le=c.join(ae,"nls.metadata.header.json"),!u.existsSync(le);){var fe=c.dirname(ae);if(fe===ae){le=void 0;break}ae=fe}return le}(E);if(G){var I=c.dirname(G),D=m[I];if(D===void 0)try{var H=JSON.parse(u.readFileSync(G,"utf8"));try{var Z=B(H,I);D=C(I,Z?{header:H,nlsBundle:Z}:null)}catch(Q){console.error("Failed to load nls bundle",Q),D=C(I,null)}}catch(Q){console.error("Failed to read header file",Q),D=C(I,null)}if(D){var Ne=E.substr(I.length+1).replace(/\\/g,"/"),Fe=D.nlsBundle[Ne];return Fe===void 0?(console.error("Messages for file ".concat(E," not found. See console for details.")),function(){return"Messages not found."}):O(Fe)}}}if(y.messageFormat===d.MessageFormat.both||y.messageFormat===d.MessageFormat.file)try{var Ie=L(function(Q){var le;if(!(y.cacheLanguageResolution&&le)){if(d.isPseudo||!y.language)le=".nls.json";else for(var ae=y.language;ae;){var fe=".nls."+ae+".json";if(u.existsSync(Q+fe)){le=fe;break}var Se=ae.lastIndexOf("-");Se>0?ae=ae.substring(0,Se):(le=".nls.json",ae=null)}y.cacheLanguageResolution}return Q+le}(E));return Array.isArray(Ie)?O(Ie):(0,d.isDefined)(Ie.messages)&&(0,d.isDefined)(Ie.keys)?O(Ie.messages):(console.error("String bundle '".concat(E,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(Q){Q.code!=="ENOENT"&&console.error("Failed to load single file bundle",Q)}return console.error("Failed to load message bundle for file ".concat(E)),function(){return"Failed to load message bundle. See console for details."}}function S(E){return E&&(W(E.locale)&&(y.locale=E.locale.toLowerCase(),y.language=y.locale,m=Object.create(null)),E.messageFormat!==void 0&&(y.messageFormat=E.messageFormat),E.bundleFormat===d.BundleFormat.standalone&&y.languagePackSupport===!0&&(y.languagePackSupport=!1)),(0,d.setPseudo)(y.locale==="pseudo"),q}(function(){if(y={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:d.MessageFormat.bundle},W(process.env.VSCODE_NLS_CONFIG))try{var E=JSON.parse(process.env.VSCODE_NLS_CONFIG),w=void 0;if(E.availableLanguages){var G=E.availableLanguages["*"];W(G)&&(w=G)}if(W(E.locale)&&(y.locale=E.locale.toLowerCase()),w===void 0?y.language=y.locale:w!=="en"&&(y.language=w),function(D){return D===!0||D===!1}(E._languagePackSupport)&&(y.languagePackSupport=E._languagePackSupport),W(E._cacheRoot)&&(y.cacheRoot=E._cacheRoot),W(E._languagePackId)&&(y.languagePackId=E._languagePackId),W(E._translationsConfigFile)){y.translationsConfigFile=E._translationsConfigFile;try{y.translationsConfig=L(y.translationsConfigFile)}catch{if(E._corruptedFile){var I=c.dirname(E._corruptedFile);u.exists(I,function(H){H&&u.writeFile(E._corruptedFile,"corrupted","utf8",function(Z){console.error(Z)})})}}}}catch{}(0,d.setPseudo)(y.locale==="pseudo"),m=Object.create(null)})(),o.loadMessageBundle=q,o.config=S,f.default.install(Object.freeze({loadMessageBundle:q,config:S}))},374:(i,o)=>{function a(){}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(c){return a}},491:i=>{"use strict";i.exports=require("assert")},361:i=>{"use strict";i.exports=require("events")},147:i=>{"use strict";i.exports=require("fs")},685:i=>{"use strict";i.exports=require("http")},687:i=>{"use strict";i.exports=require("https")},808:i=>{"use strict";i.exports=require("net")},17:i=>{"use strict";i.exports=require("path")},404:i=>{"use strict";i.exports=require("tls")},310:i=>{"use strict";i.exports=require("url")},796:i=>{"use strict";i.exports=require("zlib")}},e={},t=function i(o){var a=e[o];if(a!==void 0)return a.exports;var c=e[o]={exports:{}};return r[o].call(c.exports,c,c.exports,i),c.exports}(539),n=yg;for(var s in t)n[s]=t[s];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})()});var Cg=l(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.RequestService=yn.RestHttpMethodEnum=void 0;var Sg=bg(),Rr=fn(),Kc;(function(r){r.Delete="DELETE",r.Get="GET",r.Post="POST"})(Kc||(yn.RestHttpMethodEnum=Kc={}));var Zc=class{constructor(){this._proxyStrictSSL=!1,this._connectionTimeoutMs=Rr.DEFAULT_CONNECTION_TIMEOUT_MS}getEnvVars(){let e=Object.assign({},process.env),t=this.proxyUrl;t&&(e[Rr.ENV_HTTP_PROXY]=t,e[Rr.ENV_HTTPS_PROXY]=t);let n=this.instanceUrl;n&&(e[Rr.ENV_SF_ORG_INSTANCE_URL]=n);let s=this.accessToken;return s&&(e[Rr.ENV_SF_TARGET_ORG]=s),e}get instanceUrl(){return this._instanceUrl}set instanceUrl(e){this._instanceUrl=e}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e}get proxyUrl(){return this._proxyUrl}set proxyUrl(e){this._proxyUrl=e}get proxyStrictSSL(){return this._proxyStrictSSL}set proxyStrictSSL(e){this._proxyStrictSSL=e}get proxyAuthorization(){return this._proxyAuthorization}set proxyAuthorization(e){this._proxyAuthorization=e}get connectionTimeoutMs(){return this._connectionTimeoutMs||Rr.DEFAULT_CONNECTION_TIMEOUT_MS}set connectionTimeoutMs(e){this._connectionTimeoutMs=e}async execute(e,t=Kc.Post){this.proxyUrl&&(0,Sg.configure)(this._proxyUrl,this._proxyStrictSSL);let n=[this.instanceUrl,e.getCommandUrl()],s=e.getQueryString(),i=s?n.join("/").concat("?",s):n.join("/"),o=e.getRequest(),a={type:t,url:i,timeout:this.connectionTimeoutMs,headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/json",Authorization:`OAuth ${this.accessToken}`,"Content-Length":o?String(Buffer.byteLength(o,"utf-8")):"0","Sforce-Call-Options":`client=${Rr.CLIENT_ID}`},data:o};this.proxyAuthorization&&a.headers&&(a.headers["Proxy-Authorization"]=this.proxyAuthorization);try{let c=await this.sendRequest(a);return Promise.resolve(c.responseText)}catch(c){let u=c;return Promise.reject(u.responseText)}}async sendRequest(e){return(0,Sg.xhr)(e)}};yn.RequestService=Zc});var Og=l(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.RestHttpMethodEnum=hr.RequestService=hr.BaseCommand=void 0;var BO=Eg();Object.defineProperty(hr,"BaseCommand",{enumerable:!0,get:function(){return BO.BaseCommand}});var Tg=Cg();Object.defineProperty(hr,"RequestService",{enumerable:!0,get:function(){return Tg.RequestService}});Object.defineProperty(hr,"RestHttpMethodEnum",{enumerable:!0,get:function(){return Tg.RestHttpMethodEnum}})});var Ig=l(wg=>{"use strict";Object.defineProperty(wg,"__esModule",{value:!0})});var Rg=l(xr=>{"use strict";var VO=xr&&xr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),XO=xr&&xr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&VO(e,r,t)};Object.defineProperty(xr,"__esModule",{value:!0});XO(Ig(),xr)});var fo=l(lt=>{"use strict";var WO=lt&&lt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Pr=lt&&lt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&WO(e,r,t)};Object.defineProperty(lt,"__esModule",{value:!0});Pr(fo(),lt);Pr(hg(),lt);Pr(fn(),lt);Pr(gg(),lt);Pr(mg(),lt);Pr(Og(),lt);Pr(Rg(),lt)});var Ag=l(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.IsvContextUtil=void 0;var ze=fo(),Jc=class{async setIsvDebuggerContext(e){let t=!1;if(e){let n=await new ze.ConfigGet().getConfig(e,ze.SF_CONFIG_ISV_DEBUGGER_SID,ze.SF_CONFIG_ISV_DEBUGGER_URL),s=n.get(ze.SF_CONFIG_ISV_DEBUGGER_SID),i=n.get(ze.SF_CONFIG_ISV_DEBUGGER_URL);typeof s<"u"&&typeof i<"u"&&(ze.GlobalCliEnvironment.environmentVariables.set(ze.ENV_SF_TARGET_ORG,s),ze.GlobalCliEnvironment.environmentVariables.set(ze.ENV_SF_ORG_INSTANCE_URL,i),t=!0)}return t}resetCliEnvironmentVars(){ze.GlobalCliEnvironment.environmentVariables.delete(ze.ENV_SF_TARGET_ORG),ze.GlobalCliEnvironment.environmentVariables.delete(ze.ENV_SF_ORG_INSTANCE_URL),console.log(`Deleted environment variables ${ze.ENV_SF_TARGET_ORG} and ${ze.ENV_SF_ORG_INSTANCE_URL}`)}};ho.IsvContextUtil=Jc});var Ng=l(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.IsvContextUtil=void 0;var KO=Ag();Object.defineProperty(po,"IsvContextUtil",{enumerable:!0,get:function(){return KO.IsvContextUtil}})});var Lg=l((AD,Dg)=>{"use strict";Dg.exports=r=>{r=Object.assign({onlyFirst:!1},r);let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,r.onlyFirst?void 0:"g")}});var kg=l((ND,Qc)=>{"use strict";var ZO=Lg(),qg=r=>typeof r=="string"?r.replace(ZO(),""):r;Qc.exports=qg;Qc.exports.default=qg});var ru=l(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.Message=Me.Localization=Me.MISSING_LABEL_MSG=Me.LOCALE_JA=Me.DEFAULT_LOCALE=Me.BASE_FILE_EXTENSION=Me.BASE_FILE_NAME=void 0;var JO=require("util");Me.BASE_FILE_NAME="i18n";Me.BASE_FILE_EXTENSION="js";Me.DEFAULT_LOCALE="en";Me.LOCALE_JA="ja";Me.MISSING_LABEL_MSG="!!! MISSING LABEL !!!";var eu=class{constructor(e){this.delegate=e}localize(e,...t){return this.delegate.localize(e,...t)}};Me.Localization=eu;var tu=class{constructor(e,t){this.messages=e,this.delegate=t}localize(e,...t){let n=this.getLabel(e);if(!n)return console.warn(`Missing label for key: ${e}`),n=`${Me.MISSING_LABEL_MSG} ${e}`,t.length>=1&&t.forEach(s=>{n+=` (${s})`}),n;if(t.length>=1){let s=n.split("%s").length-1;return t.length!==s&&console.log(`Arguments do not match for label '${e}', got ${t.length} but want ${s}`),t.unshift(n),JO.format(...t)}return n}getLabel(e){return this.messages[e]?this.messages[e]:this.delegate?this.delegate.messages[e]:void 0}};Me.Message=tu});var nu=l(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.MISSING_LABEL_MSG=He.Message=He.Localization=He.LOCALE_JA=He.DEFAULT_LOCALE=He.BASE_FILE_NAME=He.BASE_FILE_EXTENSION=void 0;var Nr=ru();Object.defineProperty(He,"BASE_FILE_EXTENSION",{enumerable:!0,get:function(){return Nr.BASE_FILE_EXTENSION}});Object.defineProperty(He,"BASE_FILE_NAME",{enumerable:!0,get:function(){return Nr.BASE_FILE_NAME}});Object.defineProperty(He,"DEFAULT_LOCALE",{enumerable:!0,get:function(){return Nr.DEFAULT_LOCALE}});Object.defineProperty(He,"LOCALE_JA",{enumerable:!0,get:function(){return Nr.LOCALE_JA}});Object.defineProperty(He,"Localization",{enumerable:!0,get:function(){return Nr.Localization}});Object.defineProperty(He,"Message",{enumerable:!0,get:function(){return Nr.Message}});Object.defineProperty(He,"MISSING_LABEL_MSG",{enumerable:!0,get:function(){return Nr.MISSING_LABEL_MSG}})});var jg=l(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.messages=void 0;go.messages={sfdx_cli_not_found:"Salesforce CLI is not installed. Install it from [%s](%s)",telemetry_legal_dialog_message:"You agree that Salesforce Extensions for VS Code may collect usage information, user environment, and crash reports for product improvements. Learn how to [opt out](%s).",telemetry_legal_dialog_button_text:"Read more",progress_notification_text:"Running %s",notification_successful_execution_text:"%s successfully ran",notification_canceled_execution_text:"%s was canceled",notification_unsuccessful_execution_text:"%s failed to run",notification_show_button_text:"Show",notification_show_in_status_bar_button_text:"Show Only in Status Bar",error_no_target_org:'No default org is set. Run "SFDX: Create a Default Scratch Org" or "SFDX: Authorize an Org" to set one.',cannot_determine_workspace:"Unable to determine workspace folders for workspace",channel_name:"Salesforce CLI",channel_starting_message:"Starting ",channel_end_with_exit_code:"ended with exit code %s",channel_end_with_sfdx_not_found:"Salesforce CLI is not installed. Install it from https://developer.salesforce.com/tools/salesforcecli",channel_end_with_error:"ended with error %s",channel_end:"ended",predicates_no_folder_opened_text:"No folder opened. Open a Salesforce DX project in VS Code.",predicates_no_salesforce_project_found_text:"No sfdx-project.json found in the root directory of your open project. Open a Salesforce DX project in VS Code.",trace_flags_unknown_user:"Unknown user",trace_flags_failed_to_create_debug_level:"Failed to create a debug level",no_local_or_remote_changes_found:"No local or remote changes found.",state:"STATE",full_name:"FULL NAME",type:"TYPE",project_path:"PROJECT PATH",ignored:"IGNORED"}});var Fg=l(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.messages=void 0;vo.messages={sfdx_cli_not_found:"Salesforce CLI \u304C\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002[%s](%s) \u304B\u3089\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044\u3002",telemetry_legal_dialog_message:"VS Code \u306E Salesforce \u62E1\u5F35\u6A5F\u80FD\u304C\u88FD\u54C1\u306E\u6539\u5584\u306E\u305F\u3081\u306B\u3001\u5229\u7528\u72B6\u6CC1\u3001\u30E6\u30FC\u30B6\u74B0\u5883\u3001\u30AF\u30E9\u30C3\u30B7\u30E5\u30EC\u30DD\u30FC\u30C8\u3092\u53CE\u96C6\u3059\u308B\u3053\u3068\u306B\u540C\u610F\u3057\u307E\u3057\u305F\u3002[\u30AA\u30D7\u30C8\u30A2\u30A6\u30C8\u306E\u65B9\u6CD5\u306B\u3064\u3044\u3066\u53C2\u7167\u3059\u308B](%s)\u3002",telemetry_legal_dialog_button_text:"\u3055\u3089\u306B\u8868\u793A",progress_notification_text:"%s \u3092\u5B9F\u884C\u3057\u3066\u3044\u307E\u3059\u3002",notification_successful_execution_text:"%s \u304C\u6B63\u5E38\u306B\u5B9F\u884C\u3055\u308C\u307E\u3057\u305F\u3002",notification_canceled_execution_text:"%s \u304C\u30AD\u30E3\u30F3\u30BB\u30EB\u3055\u308C\u307E\u3057\u305F\u3002",notification_unsuccessful_execution_text:"%s \u304C\u5931\u6557\u3057\u307E\u3057\u305F\u3002",notification_show_button_text:"\u8868\u793A",notification_show_in_status_bar_button_text:"\u30B9\u30C6\u30FC\u30BF\u30B9\u30D0\u30FC\u3060\u3051\u306B\u8868\u793A",error_no_target_org:'\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u7D44\u7E54\u304C\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002"SFDX: \u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u30B9\u30AF\u30E9\u30C3\u30C1\u7D44\u7E54\u3092\u4F5C\u6210" \u307E\u305F\u306F "SFDX: \u7D44\u7E54\u3092\u8A8D\u8A3C" \u3092\u5B9F\u884C\u3057\u7D44\u7E54\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002',channel_name:"Salesforce CLI",channel_starting_message:"\u958B\u59CB\u3057\u3066\u3044\u307E\u3059: ",channel_end_with_exit_code:"\u304C\u7D42\u4E86\u30B3\u30FC\u30C9 %s \u3067\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002",channel_end_with_sfdx_not_found:"Salesforce CLI \u304C\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002https://developer.salesforce.com/tools/salesforcecli \u304B\u3089\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044\u3002",channel_end_with_error:"\u304C\u30A8\u30E9\u30FC\u3067\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002%s",channel_end:"\u304C\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002",predicates_no_folder_opened_text:"\u30D5\u30A9\u30EB\u30C0\u304C\u958B\u304B\u308C\u3066\u3044\u307E\u305B\u3093\u3002VS Code \u3067 Salesforce DX \u5F62\u5F0F\u306E\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044\u3002",predicates_no_salesforce_project_found_text:"\u958B\u304B\u308C\u305F\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306E\u30EB\u30FC\u30C8\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u306B sfdx-project.json \u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002VS Code \u3067 Salesforce DX \u5F62\u5F0F\u306E\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044\u3002"}});var zt=l(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.nls=void 0;var Ls=nu(),Mg=ru(),QO=jg(),ew=Fg(),tw=[Ls.DEFAULT_LOCALE,Mg.LOCALE_JA],rw=r=>{let e=new Ls.Message(QO.messages),t=r?r.locale:Ls.DEFAULT_LOCALE;return t===Mg.LOCALE_JA?new Ls.Message(ew.messages,e):(tw.indexOf(t)===-1&&console.error(`Cannot find ${t}, defaulting to en`),e)},nw=()=>{let r=process.env.VSCODE_NLS_CONFIG;return r?JSON.parse(r):null};_o.nls=new Ls.Localization(rw(nw()))});var Dr=l(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.TRUE=Ce.TARGET_ORG_KEY=Ce.TARGET_DEV_HUB_KEY=Ce.SFDX_EXTENSION_PACK_NAME=Ce.SFDX_CORE_EXTENSION_NAME=Ce.SFDX_CORE_CONFIGURATION_NAME=Ce.SF_CONFIG_DISABLE_TELEMETRY=Ce.SETTING_CLEAR_OUTPUT_TAB=Ce.LOCAL_TELEMETRY_FILE=Ce.DEFAULT_AIKEY=Ce.ADVANCED=void 0;Ce.ADVANCED="advanced";Ce.DEFAULT_AIKEY="ec3632a4-df47-47a4-98dc-8134cacbaf7e";Ce.LOCAL_TELEMETRY_FILE="telemetry.json";Ce.SETTING_CLEAR_OUTPUT_TAB="clearOutputTab";Ce.SF_CONFIG_DISABLE_TELEMETRY="disable-telemetry";Ce.SFDX_CORE_CONFIGURATION_NAME="salesforcedx-vscode-core";Ce.SFDX_CORE_EXTENSION_NAME="salesforcedx-vscode-core";Ce.SFDX_EXTENSION_PACK_NAME="salesforcedx-vscode";Ce.TARGET_DEV_HUB_KEY="target-dev-hub";Ce.TARGET_ORG_KEY="target-org";Ce.TRUE="true"});var $g=l(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.SettingsService=Cn.AdvancedSettings=void 0;var Ug=require("vscode"),mo=Dr(),Gg;(function(r){r.LOCAL_TELEMETRY_LOGGING="localTelemetryLogging"})(Gg||(Cn.AdvancedSettings=Gg={}));var su=class{static getEnableClearOutputBeforeEachCommand(){return Ug.workspace.getConfiguration(mo.SFDX_CORE_CONFIGURATION_NAME).get(mo.SETTING_CLEAR_OUTPUT_TAB,!1)}static isAdvancedSettingEnabledFor(e,t){return Ug.workspace.getConfiguration().get(`${e}.${mo.ADVANCED}.${t}`)===mo.TRUE}};Cn.SettingsService=su});var Eo=l(Lr=>{"use strict";var sw=Lr&&Lr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),iw=Lr&&Lr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sw(e,r,t)};Object.defineProperty(Lr,"__esModule",{value:!0});iw($g(),Lr)});var iu=l(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.ChannelService=void 0;var Hg=kg(),ow=require("vscode"),Tn=zt(),aw=Eo(),Kt=class{constructor(e){this.channel=e}static getInstance(e){if(!Kt.instances[e]){let t=ow.window.createOutputChannel(e);Kt.instances[e]=new Kt(t)}return Kt.instances[e]}streamCommandOutput(e){this.streamCommandStartStop(e),e.stderrSubject.subscribe(t=>this.channel.append((0,Hg.default)(t.toString()))),e.stdoutSubject.subscribe(t=>this.channel.append((0,Hg.default)(t.toString())))}streamCommandStartStop(e){aw.SettingsService.getEnableClearOutputBeforeEachCommand()&&this.clear(),this.channel.append(Tn.nls.localize("channel_starting_message")),this.channel.appendLine(e.command.toString()),this.channel.appendLine(""),this.showCommandWithTimestamp(e.command.toCommand()),e.processExitSubject.subscribe(t=>{this.showCommandWithTimestamp(e.command.toCommand()),this.channel.append(" "),t!=null?this.channel.appendLine(Tn.nls.localize("channel_end_with_exit_code",t.toString())):this.channel.appendLine(Tn.nls.localize("channel_end")),this.channel.appendLine("")}),e.processErrorSubject.subscribe(t=>{this.showCommandWithTimestamp(e.command.toCommand()),this.channel.append(" "),t!==void 0?/sfdx.*ENOENT/.test(t.message)?this.channel.appendLine(Tn.nls.localize("channel_end_with_sfdx_not_found")):this.channel.appendLine(Tn.nls.localize("channel_end_with_error",t.message)):this.channel.appendLine(Tn.nls.localize("channel_end")),this.channel.appendLine("")})}showCommandWithTimestamp(e){this.channel.appendLine(this.getExecutionTime()+" "+e)}getExecutionTime(){let e=new Date,t=this.ensureDoubleDigits(e.getHours()),n=this.ensureDoubleDigits(e.getMinutes()),s=this.ensureDoubleDigits(e.getSeconds()),i=e.getMilliseconds();return`${t}:${n}:${s}.${i}`}ensureDoubleDigits(e){return e<10?`0${e.toString()}`:e.toString()}showChannelOutput(){this.channel.show(!0)}appendLine(e){this.channel.appendLine(e)}clear(){this.channel.clear()}};yo.ChannelService=Kt;Kt.instances={}});var Bg=l(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.NotificationService=qr.STATUS_BAR_MSG_TIMEOUT_MS=void 0;var On=require("vscode"),cw=Dr(),wn=zt();qr.STATUS_BAR_MSG_TIMEOUT_MS=5e3;var dr=class{static getInstance(){return dr.instance||(dr.instance=new dr),dr.instance}showErrorMessage(e,...t){return On.window.showErrorMessage(e,...t)}showInformationMessage(e,...t){return On.window.showInformationMessage(e,...t)}showWarningMessage(e,...t){return On.window.showWarningMessage(e,...t)}showWarningModal(e,...t){return On.window.showWarningMessage(e,{modal:!0},...t)}reportCommandExecutionStatus(e,t,n){this.reportExecutionStatus(e.command.toString(),t,e.processExitSubject,n),this.reportExecutionError(e.command.toString(),e.processErrorSubject)}reportExecutionStatus(e,t,n,s){n.subscribe(async i=>{i!==void 0&&String(i)==="0"?await this.showSuccessfulExecution(e,t):i!==null&&this.showFailedExecution(e)}),s&&s.onCancellationRequested(()=>{this.showCanceledExecution(e)})}showFailedExecution(e){this.showErrorMessage(wn.nls.localize("notification_unsuccessful_execution_text",e))}showCanceledExecution(e){this.showWarningMessage(wn.nls.localize("notification_canceled_execution_text",e))}async showSuccessfulExecution(e,t){let n=wn.nls.localize("notification_successful_execution_text",e),s=On.workspace.getConfiguration(cw.SFDX_CORE_CONFIGURATION_NAME);if(s.get("show-cli-success-msg",!0)){let o=wn.nls.localize("notification_show_button_text"),a=wn.nls.localize("notification_show_in_status_bar_button_text"),c=await this.showInformationMessage(n,o,a);c&&(c===o&&t?t.showChannelOutput():c===a&&await s.update("show-cli-success-msg",!1))}else On.window.setStatusBarMessage(n,qr.STATUS_BAR_MSG_TIMEOUT_MS)}reportExecutionError(e,t){t.subscribe(async()=>{this.showErrorMessage(wn.nls.localize("notification_unsuccessful_execution_text",e))})}};qr.NotificationService=dr});var Xg=l(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.ProgressNotification=void 0;var Vg=require("vscode"),uw=zt(),ou=class{static show(e,t,n,s){return Vg.window.withProgress({title:uw.nls.localize("progress_notification_text",e.command),location:n||Vg.ProgressLocation.Notification,cancellable:!0},(i,o)=>new Promise(a=>{o.onCancellationRequested(()=>(t.cancel(),a(void 0))),e.processExitSubject.subscribe(()=>a(void 0)),e.processErrorSubject.subscribe(()=>a(void 0)),s&&s.subscribe({next:c=>{i.report({increment:c})},complete:()=>{i.report({increment:100}),a(void 0)}})}))}};bo.ProgressNotification=ou});var qs=l(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.ProgressNotification=kt.NotificationService=kt.notificationService=kt.ChannelService=void 0;var lw=iu();Object.defineProperty(kt,"ChannelService",{enumerable:!0,get:function(){return lw.ChannelService}});var Wg=Bg();Object.defineProperty(kt,"NotificationService",{enumerable:!0,get:function(){return Wg.NotificationService}});kt.notificationService=Wg.NotificationService.getInstance();var fw=Xg();Object.defineProperty(kt,"ProgressNotification",{enumerable:!0,get:function(){return fw.ProgressNotification}})});var Yg=l(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.EmptyParametersGatherer=In.CompositeParametersGatherer=void 0;var au=class{constructor(...e){this.gatherers=e}async gather(){let e={};for(let t of this.gatherers){let n=await t.gather();if(n.type==="CONTINUE")Object.keys(n.data).map(s=>e[s]=n.data[s]);else return{type:"CANCEL"}}return{type:"CONTINUE",data:e}}};In.CompositeParametersGatherer=au;var cu=class{async gather(){return{type:"CONTINUE",data:{}}}};In.EmptyParametersGatherer=cu});var lu=l(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.EmptyPostChecker=void 0;var uu=class{async check(e){return e}};So.EmptyPostChecker=uu});var fu=l(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.PredicateResponse=void 0;var kr=class{constructor(e,t){this.result=e,this.message=t}static of(e,t){return new kr(e,t)}static true(){return new kr(!0,"")}static false(){return new kr(!1,"GENERAL ERROR")}};Co.PredicateResponse=kr});var zg=l(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.SF_CONFIG_ISV_DEBUGGER_URL=xe.SF_CONFIG_ISV_DEBUGGER_SID=xe.ENV_SF_ORG_INSTANCE_URL=xe.ENV_SF_TARGET_ORG=xe.SFDX_FOLDER=xe.SFDX_CONFIG_FILE=xe.SFDX_PROJECT_FILE=xe.TARGET_ORG_KEY=xe.DEFAULT_CONNECTION_TIMEOUT_MS=xe.CLIENT_ID=void 0;xe.CLIENT_ID="sfdx-vscode";xe.DEFAULT_CONNECTION_TIMEOUT_MS=2e4;xe.TARGET_ORG_KEY="target-org";xe.SFDX_PROJECT_FILE="sfdx-project.json";xe.SFDX_CONFIG_FILE="sfdx-config.json";xe.SFDX_FOLDER=".sfdx";xe.ENV_SF_TARGET_ORG="SF_TARGET_ORG";xe.ENV_SF_ORG_INSTANCE_URL="SF_ORG_INSTANCE_URL";xe.SF_CONFIG_ISV_DEBUGGER_SID="org-isv-debugger-sid";xe.SF_CONFIG_ISV_DEBUGGER_URL="org-isv-debugger-url"});var hu=l(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.CLIENT_ID=Pe.DEFAULT_CONNECTION_TIMEOUT_MS=Pe.TARGET_ORG_KEY=Pe.SF_CONFIG_ISV_DEBUGGER_URL=Pe.SF_CONFIG_ISV_DEBUGGER_SID=Pe.ENV_SF_ORG_INSTANCE_URL=Pe.ENV_SF_TARGET_ORG=Pe.SFDX_PROJECT_FILE=Pe.SFDX_FOLDER=Pe.SFDX_CONFIG_FILE=void 0;var jt=zg();Object.defineProperty(Pe,"SFDX_CONFIG_FILE",{enumerable:!0,get:function(){return jt.SFDX_CONFIG_FILE}});Object.defineProperty(Pe,"SFDX_FOLDER",{enumerable:!0,get:function(){return jt.SFDX_FOLDER}});Object.defineProperty(Pe,"SFDX_PROJECT_FILE",{enumerable:!0,get:function(){return jt.SFDX_PROJECT_FILE}});Object.defineProperty(Pe,"ENV_SF_TARGET_ORG",{enumerable:!0,get:function(){return jt.ENV_SF_TARGET_ORG}});Object.defineProperty(Pe,"ENV_SF_ORG_INSTANCE_URL",{enumerable:!0,get:function(){return jt.ENV_SF_ORG_INSTANCE_URL}});Object.defineProperty(Pe,"SF_CONFIG_ISV_DEBUGGER_SID",{enumerable:!0,get:function(){return jt.SF_CONFIG_ISV_DEBUGGER_SID}});Object.defineProperty(Pe,"SF_CONFIG_ISV_DEBUGGER_URL",{enumerable:!0,get:function(){return jt.SF_CONFIG_ISV_DEBUGGER_URL}});Object.defineProperty(Pe,"TARGET_ORG_KEY",{enumerable:!0,get:function(){return jt.TARGET_ORG_KEY}});Object.defineProperty(Pe,"DEFAULT_CONNECTION_TIMEOUT_MS",{enumerable:!0,get:function(){return jt.DEFAULT_CONNECTION_TIMEOUT_MS}});Object.defineProperty(Pe,"CLIENT_ID",{enumerable:!0,get:function(){return jt.CLIENT_ID}})});var Zg=l(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.getRootWorkspacePath=At.getRootWorkspace=At.hasRootWorkspace=void 0;var Kg=require("vscode"),hw=(r=Kg.workspace)=>r&&r.workspaceFolders&&r.workspaceFolders.length>0;At.hasRootWorkspace=hw;var dw=()=>(0,At.hasRootWorkspace)()?Kg.workspace.workspaceFolders[0]:{};At.getRootWorkspace=dw;var pw=()=>(0,At.getRootWorkspace)().uri?(0,At.getRootWorkspace)().uri.fsPath:"";At.getRootWorkspacePath=pw});var pu=l(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.workspaceUtils=void 0;var Jg=require("vscode"),Qg=(r=Jg.workspace)=>r&&r.workspaceFolders&&r.workspaceFolders.length>0,du=()=>Qg()?Jg.workspace.workspaceFolders[0]:{},gw=()=>du().uri?du().uri.fsPath:"";To.workspaceUtils={hasRootWorkspace:Qg,getRootWorkspace:du,getRootWorkspacePath:gw}});var Rn=l(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.workspaceUtils=Ft.getRootWorkspacePath=Ft.getRootWorkspace=Ft.hasRootWorkspace=void 0;var gu=Zg();Object.defineProperty(Ft,"hasRootWorkspace",{enumerable:!0,get:function(){return gu.hasRootWorkspace}});Object.defineProperty(Ft,"getRootWorkspace",{enumerable:!0,get:function(){return gu.getRootWorkspace}});Object.defineProperty(Ft,"getRootWorkspacePath",{enumerable:!0,get:function(){return gu.getRootWorkspacePath}});var vw=pu();Object.defineProperty(Ft,"workspaceUtils",{enumerable:!0,get:function(){return vw.workspaceUtils}})});var rv=l(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.EmptyPreChecker=Nt.SfWorkspaceChecker=Nt.isSalesforceProjectOpened=Nt.IsSalesforceProjectOpened=void 0;var _w=require("fs"),mw=require("path"),Ew=require("vscode"),ev=zt(),vu=fu(),yw=hu(),tv=Rn(),bw=qs(),Oo=class{apply(e){return(0,tv.hasRootWorkspace)()?_w.existsSync(mw.join((0,tv.getRootWorkspacePath)(),yw.SFDX_PROJECT_FILE))?vu.PredicateResponse.true():vu.PredicateResponse.of(!1,ev.nls.localize("predicates_no_salesforce_project_found_text")):vu.PredicateResponse.of(!1,ev.nls.localize("predicates_no_folder_opened_text"))}};Nt.IsSalesforceProjectOpened=Oo;Nt.isSalesforceProjectOpened=new Oo;var _u=class{check(){let e=Nt.isSalesforceProjectOpened.apply(Ew.workspace);return e.result?!0:(bw.notificationService.showErrorMessage(e.message),!1)}};Nt.SfWorkspaceChecker=_u;var mu=class{check(){return!0}};Nt.EmptyPreChecker=mu});var Ro=l(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.SfCommandBuilder=pr.CommandBuilder=pr.Command=void 0;var wo=class{constructor(e){this.command=e.command,this.description=e.description,this.args=e.args,this.logName=e.logName}toString(){return this.description?this.description:`${this.command} ${this.args.join(" ")}`}toCommand(){return`${this.command} ${this.args.join(" ")}`}};pr.Command=wo;var Io=class{constructor(e){this.args=[],this.command=e}withDescription(e){return this.description=e,this}withArg(e){return e==="--json"?this.withJson():this.args.push(e),this}withFlag(e,t){return this.args.push(e,t),this}withJson(){return this.args.push("--json"),this}withLogName(e){return this.logName=e,this}build(){return new wo(this)}};pr.CommandBuilder=Io;var Eu=class extends Io{constructor(){super("sf")}};pr.SfCommandBuilder=Eu});var nv=l(xo=>{"use strict";var Sw=xo&&xo.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Cw=function(r){Sw(e,r);function e(){var t=r.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return e}(Error);xo.ObjectUnsubscribedError=Cw});var sv=l(Po=>{"use strict";var Tw=Po&&Po.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Ow=cn(),ww=function(r){Tw(e,r);function e(t,n){r.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,!(!n||n.length===0||t.isStopped||t.closed)){var s=n.indexOf(this.subscriber);s!==-1&&n.splice(s,1)}}},e}(Ow.Subscription);Po.SubjectSubscription=ww});var cv=l(xn=>{"use strict";var Su=xn&&xn.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},iv=Vt(),Iw=tc(),yu=cn(),ks=nv(),Rw=sv(),xw=xi(),ov=function(r){Su(e,r);function e(t){r.call(this,t),this.destination=t}return e}(Iw.Subscriber);xn.SubjectSubscriber=ov;var av=function(r){Su(e,r);function e(){r.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return e.prototype[xw.rxSubscriber]=function(){return new ov(this)},e.prototype.lift=function(t){var n=new bu(this,this);return n.operator=t,n},e.prototype.next=function(t){if(this.closed)throw new ks.ObjectUnsubscribedError;if(!this.isStopped)for(var n=this.observers,s=n.length,i=n.slice(),o=0;o<s;o++)i[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new ks.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,s=n.length,i=n.slice(),o=0;o<s;o++)i[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ks.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,n=t.length,s=t.slice(),i=0;i<n;i++)s[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new ks.ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new ks.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),yu.Subscription.EMPTY):this.isStopped?(t.complete(),yu.Subscription.EMPTY):(this.observers.push(t),new Rw.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new iv.Observable;return t.source=this,t},e.create=function(t,n){return new bu(t,n)},e}(iv.Observable);xn.Subject=av;var bu=function(r){Su(e,r);function e(t,n){r.call(this),this.destination=t,this.source=n}return e.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},e.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var n=this.source;return n?this.source.subscribe(t):yu.Subscription.EMPTY},e}(av);xn.AnonymousSubject=bu});var Ms=l(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.CliCommandExecution=Et.CompositeCliCommandExecution=Et.CompositeCliCommandExecutor=Et.CliCommandExecutor=Et.GlobalCliEnvironment=void 0;var Pw=require("os");Di();Ec();var Pn=Vt(),Ao=cv(),Aw=_c(),Nw=ic(),js=class{};Et.GlobalCliEnvironment=js;js.environmentVariables=new Map;var Fs=class{static patchEnv(e,t){let n=Object.create(null);return Object.assign(n,process.env),t.forEach((s,i)=>{n[i]=s}),n&&(n.SFDX_TOOL="salesforce-vscode-extensions"),typeof e.env<"u"&&Object.assign(n,e.env),e.env=n,e}constructor(e,t,n=!0){this.command=e,this.options=n?Fs.patchEnv(t,js.environmentVariables):t}execute(e){let t=Aw(this.command.command,this.command.args,this.options);return new Do(this.command,t,e)}};Et.CliCommandExecutor=Fs;var Cu=class{constructor(e){this.command=e}execute(e){return new No(this.command,e)}};Et.CompositeCliCommandExecutor=Cu;var No=class{constructor(e,t){this.exitSubject=new Ao.Subject,this.errorSubject=new Ao.Subject,this.stdout=new Ao.Subject,this.stderr=new Ao.Subject,this.command=e,this.cancellationToken=t,this.processExitSubject=this.exitSubject.asObservable(),this.processErrorSubject=this.errorSubject.asObservable(),this.stdoutSubject=this.stdout.asObservable(),this.stderrSubject=this.stderr.asObservable();let n;t&&(n=Pn.Observable.interval(1e3).subscribe(async()=>{if(t.isCancellationRequested)try{this.exitSubject.next()}catch(i){console.log(i)}})),this.processErrorSubject.subscribe(()=>{n&&n.unsubscribe()}),this.processExitSubject.subscribe(()=>{n&&n.unsubscribe()})}successfulExit(){this.exitSubject.next(0)}failureExit(e){e&&this.stderr.next(`${e}${Pw.EOL}`),this.exitSubject.next(1)}};Et.CompositeCliCommandExecution=No;var Do=class{constructor(e,t,n){if(this.command=e,this.cancellationToken=n,t.pid===void 0)throw new Error("CLI Command process failed to start");this.childProcessPid=t.pid;let s;this.processExitSubject=Pn.Observable.fromEvent(t,"exit"),this.processExitSubject.subscribe(()=>{s&&s.unsubscribe()}),this.processErrorSubject=Pn.Observable.fromEvent(t,"error"),this.processErrorSubject.subscribe(()=>{s&&s.unsubscribe()}),this.stdoutSubject=Pn.Observable.fromEvent(t.stdout,"data"),this.stderrSubject=Pn.Observable.fromEvent(t.stderr,"data"),n&&(s=Pn.Observable.interval(1e3).subscribe(async()=>{if(n.isCancellationRequested)try{await this.killExecution()}catch(o){console.log(o)}}))}async killExecution(e="SIGKILL"){return Dw(this.childProcessPid,e)}};Et.CliCommandExecution=Do;var Dw=(r,e)=>new Promise((t,n)=>{Nw(r,e,s=>{s&&n(s),t()})})});var qo=l(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.CommandOutput=void 0;var Tu=class{constructor(){this.stdoutBuffer="",this.stderrBuffer=""}async getCmdResult(e){return e.stdoutSubject.subscribe(t=>{this.stdoutBuffer+=t.toString()}),e.stderrSubject.subscribe(t=>{this.stderrBuffer+=t.toString()}),new Promise((t,n)=>{e.processExitSubject.subscribe(s=>s!==void 0&&String(s)==="0"?t(this.stdoutBuffer):n(this.stderrBuffer||this.stdoutBuffer))})}};Lo.CommandOutput=Tu});var hv=l($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.projectPaths=$.fileExtensionsMatch=$.getRelativeProjectPath=$.getTestResultsFolder=$.ensureDirectoryExists=$.SFDX_CONFIG_FILE=$.LWC=$.APEX_DB=$.LOGS=$.DEBUG=$.APEX=$.TEST_RESULTS=$.TOOLS=$.METADATA=$.ORGS=void 0;var Ou=require("@salesforce/core"),uv=require("fs"),Be=require("path"),Lw=jr(),lv=pu();$.ORGS="orgs";$.METADATA="metadata";$.TOOLS="tools";$.TEST_RESULTS="testresults";$.APEX="apex";$.DEBUG="debug";$.LOGS="logs";$.APEX_DB="apex.db";$.LWC="lwc";$.SFDX_CONFIG_FILE="sfdx-config.json";var qw=r=>{uv.existsSync(r)||((0,$.ensureDirectoryExists)(Be.dirname(r)),uv.mkdirSync(r))};$.ensureDirectoryExists=qw;var kw=(r,e)=>{let t=Be.join(r,Ou.Global.STATE_FOLDER,$.TOOLS,$.TEST_RESULTS,e);return(0,$.ensureDirectoryExists)(t),t};$.getTestResultsFolder=kw;var jw=(r="",e)=>{let t;for(let n of e)if(n.startsWith(Be.sep)||(n=Be.sep+n),n.endsWith(Be.sep)||(n=n+Be.sep),t=r.indexOf(n),t!==-1){t+=1;break}return t!==-1?r.slice(t):r};$.getRelativeProjectPath=jw;var Fw=(r,e)=>r.path.split(".").pop()?.toLowerCase()===e.toLowerCase();$.fileExtensionsMatch=Fw;var Mw=()=>lv.workspaceUtils.hasRootWorkspace()?Be.join(lv.workspaceUtils.getRootWorkspacePath(),Ou.Global.SFDX_STATE_FOLDER):"",Uw=()=>{let r=Lw.WorkspaceContextUtil.getInstance().username;return Be.join($.projectPaths.stateFolder(),$.ORGS,String(r),$.METADATA)},Gw=()=>Be.join(Us(),$.TEST_RESULTS,$.APEX),$w=()=>Be.join(Us(),$.APEX_DB),Hw=()=>Be.join(fv(),$.LWC),fv=()=>Be.join(Us(),$.TEST_RESULTS),Bw=()=>Be.join(Us(),$.DEBUG,$.LOGS),Vw=()=>Be.join($.projectPaths.stateFolder(),$.SFDX_CONFIG_FILE),Us=()=>Be.join($.projectPaths.stateFolder(),$.TOOLS),Xw=()=>Ou.Global.STATE_FOLDER,Ww=()=>Be.join($.projectPaths.relativeStateFolder(),$.TOOLS);$.projectPaths={stateFolder:Mw,metadataFolder:Uw,testResultsFolder:fv,apexTestResultsFolder:Gw,apexLanguageServerDatabase:$w,debugLogsFolder:Bw,salesforceProjectConfig:Vw,toolsFolder:Us,lwcTestResultsFolder:Hw,relativeStateFolder:Xw,relativeToolsFolder:Ww}});var pv=l(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.extensionUris=void 0;var dv=require("vscode"),Yw=r=>{let e=dv.extensions.getExtension(r);if(e)return e.extensionUri;throw new Error(`Unable to find extension ${r}`)},zw=(r,e)=>dv.Uri.joinPath(r,e);ko.extensionUris={extensionUri:Yw,join:zw}});var Ru=l(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.TraceFlags=void 0;var Kw=gr(),wu=zt(),Iu=class{constructor(e){this.LOG_TIMER_LENGTH_MINUTES=30,this.MILLISECONDS_PER_MINUTE=6e4,this.connection=e}async ensureTraceFlags(){let e=this.connection.getUsername();if(!e)throw new Error(wu.nls.localize("error_no_target_org"));let n=(await this.getUserIdOrThrow(e)).Id,s=await this.getTraceFlagForUser(n);if(s){if(!await this.updateDebugLevel(s.DebugLevelId))return!1;let i=this.calculateExpirationDate(s.ExpirationDate?new Date(s.ExpirationDate):new Date);return await this.updateTraceFlag(s.Id,i)}else{let i=await this.createDebugLevel();if(!i)throw new Error(wu.nls.localize("trace_flags_failed_to_create_debug_level"));let o=this.calculateExpirationDate(new Date);if(!await this.createTraceFlag(n,i,o))return!1}return!0}async updateDebugLevel(e){let t={Id:e,ApexCode:"FINEST",Visualforce:"FINER"};return(await this.connection.tooling.update("DebugLevel",t)).success}async createDebugLevel(){let e=`ReplayDebuggerLevels${Date.now()}`,t={developerName:e,MasterLabel:e,ApexCode:"FINEST",Visualforce:"FINER"},n=await this.connection.tooling.create("DebugLevel",t);return n.success&&n.id?n.id:void 0}async updateTraceFlag(e,t){let n={Id:e,StartDate:Date.now(),ExpirationDate:t.toUTCString()};return(await this.connection.tooling.update("TraceFlag",n)).success}async createTraceFlag(e,t,n){let s={tracedentityid:e,logtype:"developer_log",debuglevelid:t,StartDate:Date.now(),ExpirationDate:n.toUTCString()},i=await this.connection.tooling.create("TraceFlag",s);if(i.success&&i.id)return Kw.TraceFlagsRemover.getInstance(this.connection).addNewTraceFlagId(i.id),i.id}isValidDateLength(e){let t=new Date().valueOf();return e.getTime()-t>this.LOG_TIMER_LENGTH_MINUTES*this.MILLISECONDS_PER_MINUTE}calculateExpirationDate(e){return this.isValidDateLength(e)||(e=new Date(Date.now()+this.LOG_TIMER_LENGTH_MINUTES*this.MILLISECONDS_PER_MINUTE)),e}async getUserIdOrThrow(e){let t=`SELECT id FROM User WHERE username='${e}'`,n=await this.connection.query(t);if(!n.totalSize||n.totalSize===0)throw new Error(wu.nls.localize("trace_flags_unknown_user"));return n.records[0]}async getTraceFlagForUser(e){let t=`
      SELECT id, logtype, startdate, expirationdate, debuglevelid, debuglevel.apexcode, debuglevel.visualforce
      FROM TraceFlag
      WHERE logtype='DEVELOPER_LOG' AND TracedEntityId='${e}'
    `,n=await this.connection.tooling.query(t);if(n.totalSize>0)return n.records[0]}};jo.TraceFlags=Iu});var gv=l(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.TraceFlagsRemover=void 0;var Zt=class{constructor(e){if(this.newTraceFlagIds=new Array,!e)throw Error("connection passed to TraceFlagsRemover is invalid");this.connection=e}static getInstance(e){return Zt._instance||(Zt._instance=new Zt(e)),Zt._instance}static resetInstance(){Zt._instance=void 0}addNewTraceFlagId(e){!e||this.newTraceFlagIds.push(e)}async removeNewTraceFlags(){for(;this.newTraceFlagIds&&this.newTraceFlagIds.length>0;){let e=this.newTraceFlagIds.pop();e&&await this.connection.tooling.delete("TraceFlag",e)}}};Fo.TraceFlagsRemover=Zt});var vv=l(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.ConfigAggregatorProvider=void 0;var Zw=require("@salesforce/core"),xu=Rn(),Jt=class{static getInstance(){return Jt.instance===void 0&&(Jt.instance=new Jt),Jt.instance}constructor(){this.configAggregators=new Map}async getConfigAggregator(){let e=xu.workspaceUtils.getRootWorkspacePath(),t=this.configAggregators.get(e);return t||(t=await this.createConfigAggregator(),this.configAggregators.set(e,t)),t}async reloadConfigAggregators(){let e=xu.workspaceUtils.getRootWorkspacePath(),t=this.configAggregators.get(e);t&&await t.reload()}async createConfigAggregator(){let e,t=this.getCurrentDirectory();this.ensureCurrentDirectoryInsideProject(t);try{e=await Zw.ConfigAggregator.create()}finally{this.getCurrentDirectory()!==t&&this.changeCurrentDirectoryTo(t)}return e}getCurrentDirectory(){return process.cwd()}ensureCurrentDirectoryInsideProject(e){let t=xu.workspaceUtils.getRootWorkspacePath();t&&e!==t&&this.changeCurrentDirectoryTo(t)}changeCurrentDirectoryTo(e){e&&process.chdir(e)}};Mo.ConfigAggregatorProvider=Jt;Jt.defaultBaseProcessDirectoryInVSCE="/"});var mv=l(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.SourceTrackingProvider=void 0;var _v=require("@salesforce/core"),Jw=require("@salesforce/source-tracking"),vr=class{static getInstance(){return vr.instance===void 0&&(vr.instance=new vr),vr.instance}constructor(){this.sourceTrackers=new Map}async getSourceTracker(e,t){let n=t.getUsername(),s=e+n,i=this.sourceTrackers.get(s);return i||(i=await this.createSourceTracking(e,t),this.sourceTrackers.set(s,i)),i}async createSourceTracking(e,t){let n=await _v.SfProject.resolve(e),i={org:await _v.Org.create({connection:t}),project:n,ignoreLocalCache:!0,subscribeSDREvents:!0,ignoreConflicts:!0};return await Jw.SourceTracking.create(i)}};Uo.SourceTrackingProvider=vr});var Go=l(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.SourceTrackingProvider=An.ConfigAggregatorProvider=void 0;var Qw=vv();Object.defineProperty(An,"ConfigAggregatorProvider",{enumerable:!0,get:function(){return Qw.ConfigAggregatorProvider}});var eI=mv();Object.defineProperty(An,"SourceTrackingProvider",{enumerable:!0,get:function(){return eI.SourceTrackingProvider}})});var $o=l(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.ConfigUtil=Dn.ConfigSource=void 0;var yt=require("@salesforce/core"),Pu=jr(),Fr=Dr(),Mr=Go(),tI=Ho(),Nn;(function(r){r[r.Local=0]="Local",r[r.Global=1]="Global",r[r.None=2]="None"})(Nn||(Dn.ConfigSource=Nn={}));var Ur=class{static async getConfigSource(e){switch((await Mr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getLocation(e)){case"Local":return Nn.Local;case"Global":return Nn.Global;default:return Nn.None}}static async getUserConfiguredApiVersion(){let t=(await Mr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(yt.OrgConfigProperties.ORG_API_VERSION);return t?String(t):void 0}static async getTargetOrgOrAlias(){try{let t=(await Mr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(Fr.TARGET_ORG_KEY);return t?JSON.stringify(t).replace(/"/g,""):void 0}catch(e){throw console.error(e),e instanceof Error&&tI.TelemetryService.getInstance().sendException("get_target_org_alias",e.message),e}}static async isGlobalTargetOrg(){return await Ur.getConfigSource(Fr.TARGET_ORG_KEY)===Nn.Global}static async getTemplatesDirectory(){let t=(await Mr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(yt.OrgConfigProperties.ORG_CUSTOM_METADATA_TEMPLATES);return t?String(t):void 0}static async isTelemetryDisabled(){return(await Mr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(Fr.SF_CONFIG_DISABLE_TELEMETRY)==="true"}static async getTargetDevHubOrAlias(){let t=(await Mr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(Fr.TARGET_DEV_HUB_KEY);return t?String(t):void 0}static async getGlobalTargetDevHubOrAlias(){let t=(await yt.Config.create({isGlobal:!0})).get(Fr.TARGET_DEV_HUB_KEY);return t?String(t):void 0}static async getAllAliasesFor(e){let t=await yt.StateAggregator.getInstance();return yt.StateAggregator.clearInstance(),t.aliases.getAll(e)}static async getUsername(){let e=await Ur.getTargetOrgOrAlias();if(!e)return;let t=await this.getUsernameFor(e);return t?String(t):void 0}static async getDevHubUsername(){let e=await Ur.getTargetDevHubOrAlias();if(!e)return;let t=await this.getUsernameFor(e);return t?String(t):void 0}static async getUsernameFor(e){return(await yt.StateAggregator.getInstance()).aliases.getUsername(e)||e}static async unsetTargetOrg(){let e=process.cwd(),t=Pu.workspaceUtils.getRootWorkspacePath();try{process.chdir(t);let n=await yt.Config.create(yt.Config.getDefaultOptions());n.unset(Fr.TARGET_ORG_KEY),await n.write(),await this.updateConfigAndStateAggregators()}finally{process.chdir(e)}}static async setTargetOrgOrAlias(e){let t=process.cwd(),n=Pu.workspaceUtils.getRootWorkspacePath();try{e&&await yt.Org.create({aliasOrUsername:e}),process.chdir(n),await this.setUsernameOrAlias(e)}finally{process.chdir(t)}}static async setUsernameOrAlias(e){let t=await yt.Config.create(yt.Config.getDefaultOptions());t.set(Fr.TARGET_ORG_KEY,e),await t.write(),await this.updateConfigAndStateAggregators()}static async updateConfigAndStateAggregators(){await Mr.ConfigAggregatorProvider.getInstance().reloadConfigAggregators(),yt.StateAggregator.clearInstance(Pu.workspaceUtils.getRootWorkspacePath())}};Dn.ConfigUtil=Ur});var Ev=l(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isCLITelemetryAllowed=Qt.disableCLITelemetry=Qt.ENV_SF_DISABLE_TELEMETRY=void 0;var rI=Bo(),nI=$o();Qt.ENV_SF_DISABLE_TELEMETRY="SF_DISABLE_TELEMETRY";var sI=()=>{rI.GlobalCliEnvironment.environmentVariables.set(Qt.ENV_SF_DISABLE_TELEMETRY,"true")};Qt.disableCLITelemetry=sI;var iI=async()=>{try{return!await nI.ConfigUtil.isTelemetryDisabled()}catch(r){console.log("Error checking cli settings: "+r)}return!0};Qt.isCLITelemetryAllowed=iI});var ft=l((gL,yv)=>{"use strict";var oI=function(){function r(){}return r.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];r.enableDebug&&console.info(r.TAG+e,t)},r.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];r.disableWarnings||console.warn(r.TAG+e,t)},r.enableDebug=!1,r.disableWarnings=!1,r.TAG="ApplicationInsights:",r}();yv.exports=oI});var jv=l((Y,kv)=>{Y=kv.exports=oe;var ve;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?ve=function(){var r=Array.prototype.slice.call(arguments,0);r.unshift("SEMVER"),console.log.apply(console,r)}:ve=function(){};Y.SEMVER_SPEC_VERSION="2.0.0";var Gs=256,Vo=Number.MAX_SAFE_INTEGER||9007199254740991,Au=16,aI=Gs-6,$s=Y.re=[],me=Y.safeRe=[],b=Y.src=[],se=0,ku="[a-zA-Z0-9-]",Nu=[["\\s",1],["\\d",Gs],[ku,aI]];function Zo(r){for(var e=0;e<Nu.length;e++){var t=Nu[e][0],n=Nu[e][1];r=r.split(t+"*").join(t+"{0,"+n+"}").split(t+"+").join(t+"{1,"+n+"}")}return r}var Ln=se++;b[Ln]="0|[1-9]\\d*";var qn=se++;b[qn]="\\d+";var ju=se++;b[ju]="\\d*[a-zA-Z-]"+ku+"*";var Sv=se++;b[Sv]="("+b[Ln]+")\\.("+b[Ln]+")\\.("+b[Ln]+")";var Cv=se++;b[Cv]="("+b[qn]+")\\.("+b[qn]+")\\.("+b[qn]+")";var Du=se++;b[Du]="(?:"+b[Ln]+"|"+b[ju]+")";var Lu=se++;b[Lu]="(?:"+b[qn]+"|"+b[ju]+")";var Fu=se++;b[Fu]="(?:-("+b[Du]+"(?:\\."+b[Du]+")*))";var Mu=se++;b[Mu]="(?:-?("+b[Lu]+"(?:\\."+b[Lu]+")*))";var qu=se++;b[qu]=ku+"+";var Bs=se++;b[Bs]="(?:\\+("+b[qu]+"(?:\\."+b[qu]+")*))";var Uu=se++,Tv="v?"+b[Sv]+b[Fu]+"?"+b[Bs]+"?";b[Uu]="^"+Tv+"$";var Gu="[v=\\s]*"+b[Cv]+b[Mu]+"?"+b[Bs]+"?",$u=se++;b[$u]="^"+Gu+"$";var Un=se++;b[Un]="((?:<|>)?=?)";var Xo=se++;b[Xo]=b[qn]+"|x|X|\\*";var Wo=se++;b[Wo]=b[Ln]+"|x|X|\\*";var Gr=se++;b[Gr]="[v=\\s]*("+b[Wo]+")(?:\\.("+b[Wo]+")(?:\\.("+b[Wo]+")(?:"+b[Fu]+")?"+b[Bs]+"?)?)?";var jn=se++;b[jn]="[v=\\s]*("+b[Xo]+")(?:\\.("+b[Xo]+")(?:\\.("+b[Xo]+")(?:"+b[Mu]+")?"+b[Bs]+"?)?)?";var Ov=se++;b[Ov]="^"+b[Un]+"\\s*"+b[Gr]+"$";var wv=se++;b[wv]="^"+b[Un]+"\\s*"+b[jn]+"$";var Iv=se++;b[Iv]="(?:^|[^\\d])(\\d{1,"+Au+"})(?:\\.(\\d{1,"+Au+"}))?(?:\\.(\\d{1,"+Au+"}))?(?:$|[^\\d])";var Jo=se++;b[Jo]="(?:~>?)";var Fn=se++;b[Fn]="(\\s*)"+b[Jo]+"\\s+";$s[Fn]=new RegExp(b[Fn],"g");me[Fn]=new RegExp(Zo(b[Fn]),"g");var cI="$1~",Rv=se++;b[Rv]="^"+b[Jo]+b[Gr]+"$";var xv=se++;b[xv]="^"+b[Jo]+b[jn]+"$";var Qo=se++;b[Qo]="(?:\\^)";var Mn=se++;b[Mn]="(\\s*)"+b[Qo]+"\\s+";$s[Mn]=new RegExp(b[Mn],"g");me[Mn]=new RegExp(Zo(b[Mn]),"g");var uI="$1^",Pv=se++;b[Pv]="^"+b[Qo]+b[Gr]+"$";var Av=se++;b[Av]="^"+b[Qo]+b[jn]+"$";var Hu=se++;b[Hu]="^"+b[Un]+"\\s*("+Gu+")$|^$";var Bu=se++;b[Bu]="^"+b[Un]+"\\s*("+Tv+")$|^$";var $r=se++;b[$r]="(\\s*)"+b[Un]+"\\s*("+Gu+"|"+b[Gr]+")";$s[$r]=new RegExp(b[$r],"g");me[$r]=new RegExp(Zo(b[$r]),"g");var lI="$1$2$3",Nv=se++;b[Nv]="^\\s*("+b[Gr]+")\\s+-\\s+("+b[Gr]+")\\s*$";var Dv=se++;b[Dv]="^\\s*("+b[jn]+")\\s+-\\s+("+b[jn]+")\\s*$";var Lv=se++;b[Lv]="(<|>)?=?\\s*\\*";for(Mt=0;Mt<se;Mt++)ve(Mt,b[Mt]),$s[Mt]||($s[Mt]=new RegExp(b[Mt]),me[Mt]=new RegExp(Zo(b[Mt])));var Mt;Y.parse=Hr;function Hr(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof oe)return r;if(typeof r!="string"||r.length>Gs)return null;var t=e.loose?me[$u]:me[Uu];if(!t.test(r))return null;try{return new oe(r,e)}catch{return null}}Y.valid=fI;function fI(r,e){var t=Hr(r,e);return t?t.version:null}Y.clean=hI;function hI(r,e){var t=Hr(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null}Y.SemVer=oe;function oe(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof oe){if(r.loose===e.loose)return r;r=r.version}else if(typeof r!="string")throw new TypeError("Invalid Version: "+r);if(r.length>Gs)throw new TypeError("version is longer than "+Gs+" characters");if(!(this instanceof oe))return new oe(r,e);ve("SemVer",r,e),this.options=e,this.loose=!!e.loose;var t=r.trim().match(e.loose?me[$u]:me[Uu]);if(!t)throw new TypeError("Invalid Version: "+r);if(this.raw=r,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>Vo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Vo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Vo||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var s=+n;if(s>=0&&s<Vo)return s}return n}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}oe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};oe.prototype.toString=function(){return this.version};oe.prototype.compare=function(r){return ve("SemVer.compare",this.version,this.options,r),r instanceof oe||(r=new oe(r,this.options)),this.compareMain(r)||this.comparePre(r)};oe.prototype.compareMain=function(r){return r instanceof oe||(r=new oe(r,this.options)),kn(this.major,r.major)||kn(this.minor,r.minor)||kn(this.patch,r.patch)};oe.prototype.comparePre=function(r){if(r instanceof oe||(r=new oe(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;var e=0;do{var t=this.prerelease[e],n=r.prerelease[e];if(ve("prerelease compare",e,t,n),t===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(t===void 0)return-1;if(t===n)continue;return kn(t,n)}while(++e)};oe.prototype.inc=function(r,e){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var t=this.prerelease.length;--t>=0;)typeof this.prerelease[t]=="number"&&(this.prerelease[t]++,t=-2);t===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+r)}return this.format(),this.raw=this.version,this};Y.inc=dI;function dI(r,e,t,n){typeof t=="string"&&(n=t,t=void 0);try{return new oe(r,t).inc(e,n).version}catch{return null}}Y.diff=pI;function pI(r,e){if(Vu(r,e))return null;var t=Hr(r),n=Hr(e),s="";if(t.prerelease.length||n.prerelease.length){s="pre";var i="prerelease"}for(var o in t)if((o==="major"||o==="minor"||o==="patch")&&t[o]!==n[o])return s+o;return i}Y.compareIdentifiers=kn;var bv=/^[0-9]+$/;function kn(r,e){var t=bv.test(r),n=bv.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1}Y.rcompareIdentifiers=gI;function gI(r,e){return kn(e,r)}Y.major=vI;function vI(r,e){return new oe(r,e).major}Y.minor=_I;function _I(r,e){return new oe(r,e).minor}Y.patch=mI;function mI(r,e){return new oe(r,e).patch}Y.compare=er;function er(r,e,t){return new oe(r,t).compare(new oe(e,t))}Y.compareLoose=EI;function EI(r,e){return er(r,e,!0)}Y.rcompare=yI;function yI(r,e,t){return er(e,r,t)}Y.sort=bI;function bI(r,e){return r.sort(function(t,n){return Y.compare(t,n,e)})}Y.rsort=SI;function SI(r,e){return r.sort(function(t,n){return Y.rcompare(t,n,e)})}Y.gt=Hs;function Hs(r,e,t){return er(r,e,t)>0}Y.lt=Yo;function Yo(r,e,t){return er(r,e,t)<0}Y.eq=Vu;function Vu(r,e,t){return er(r,e,t)===0}Y.neq=qv;function qv(r,e,t){return er(r,e,t)!==0}Y.gte=Xu;function Xu(r,e,t){return er(r,e,t)>=0}Y.lte=Wu;function Wu(r,e,t){return er(r,e,t)<=0}Y.cmp=zo;function zo(r,e,t,n){switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return Vu(r,t,n);case"!=":return qv(r,t,n);case">":return Hs(r,t,n);case">=":return Xu(r,t,n);case"<":return Yo(r,t,n);case"<=":return Wu(r,t,n);default:throw new TypeError("Invalid operator: "+e)}}Y.Comparator=bt;function bt(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof bt){if(r.loose===!!e.loose)return r;r=r.value}if(!(this instanceof bt))return new bt(r,e);r=r.trim().split(/\s+/).join(" "),ve("comparator",r,e),this.options=e,this.loose=!!e.loose,this.parse(r),this.semver===Vs?this.value="":this.value=this.operator+this.semver.version,ve("comp",this)}var Vs={};bt.prototype.parse=function(r){var e=this.options.loose?me[Hu]:me[Bu],t=r.match(e);if(!t)throw new TypeError("Invalid comparator: "+r);this.operator=t[1],this.operator==="="&&(this.operator=""),t[2]?this.semver=new oe(t[2],this.options.loose):this.semver=Vs};bt.prototype.toString=function(){return this.value};bt.prototype.test=function(r){return ve("Comparator.test",r,this.options.loose),this.semver===Vs?!0:(typeof r=="string"&&(r=new oe(r,this.options)),zo(r,this.operator,this.semver,this.options))};bt.prototype.intersects=function(r,e){if(!(r instanceof bt))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var t;if(this.operator==="")return t=new we(r.value,e),Ko(this.value,t,e);if(r.operator==="")return t=new we(this.value,e),Ko(r.semver,t,e);var n=(this.operator===">="||this.operator===">")&&(r.operator===">="||r.operator===">"),s=(this.operator==="<="||this.operator==="<")&&(r.operator==="<="||r.operator==="<"),i=this.semver.version===r.semver.version,o=(this.operator===">="||this.operator==="<=")&&(r.operator===">="||r.operator==="<="),a=zo(this.semver,"<",r.semver,e)&&(this.operator===">="||this.operator===">")&&(r.operator==="<="||r.operator==="<"),c=zo(this.semver,">",r.semver,e)&&(this.operator==="<="||this.operator==="<")&&(r.operator===">="||r.operator===">");return n||s||i&&o||a||c};Y.Range=we;function we(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof we)return r.loose===!!e.loose&&r.includePrerelease===!!e.includePrerelease?r:new we(r.raw,e);if(r instanceof bt)return new we(r.value,e);if(!(this instanceof we))return new we(r,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=r.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}we.prototype.format=function(){return this.range=this.set.map(function(r){return r.join(" ").trim()}).join("||").trim(),this.range};we.prototype.toString=function(){return this.range};we.prototype.parseRange=function(r){var e=this.options.loose,t=e?me[Dv]:me[Nv];r=r.replace(t,NI),ve("hyphen replace",r),r=r.replace(me[$r],lI),ve("comparator trim",r,me[$r]),r=r.replace(me[Fn],cI),r=r.replace(me[Mn],uI);var n=e?me[Hu]:me[Bu],s=r.split(" ").map(function(i){return TI(i,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(i){return!!i.match(n)})),s=s.map(function(i){return new bt(i,this.options)},this),s};we.prototype.intersects=function(r,e){if(!(r instanceof we))throw new TypeError("a Range is required");return this.set.some(function(t){return t.every(function(n){return r.set.some(function(s){return s.every(function(i){return n.intersects(i,e)})})})})};Y.toComparators=CI;function CI(r,e){return new we(r,e).set.map(function(t){return t.map(function(n){return n.value}).join(" ").trim().split(" ")})}function TI(r,e){return ve("comp",r,e),r=II(r,e),ve("caret",r),r=OI(r,e),ve("tildes",r),r=xI(r,e),ve("xrange",r),r=AI(r,e),ve("stars",r),r}function Ke(r){return!r||r.toLowerCase()==="x"||r==="*"}function OI(r,e){return r.trim().split(/\s+/).map(function(t){return wI(t,e)}).join(" ")}function wI(r,e){var t=e.loose?me[xv]:me[Rv];return r.replace(t,function(n,s,i,o,a){ve("tilde",r,n,s,i,o,a);var c;return Ke(s)?c="":Ke(i)?c=">="+s+".0.0 <"+(+s+1)+".0.0":Ke(o)?c=">="+s+"."+i+".0 <"+s+"."+(+i+1)+".0":a?(ve("replaceTilde pr",a),c=">="+s+"."+i+"."+o+"-"+a+" <"+s+"."+(+i+1)+".0"):c=">="+s+"."+i+"."+o+" <"+s+"."+(+i+1)+".0",ve("tilde return",c),c})}function II(r,e){return r.trim().split(/\s+/).map(function(t){return RI(t,e)}).join(" ")}function RI(r,e){ve("caret",r,e);var t=e.loose?me[Av]:me[Pv];return r.replace(t,function(n,s,i,o,a){ve("caret",r,n,s,i,o,a);var c;return Ke(s)?c="":Ke(i)?c=">="+s+".0.0 <"+(+s+1)+".0.0":Ke(o)?s==="0"?c=">="+s+"."+i+".0 <"+s+"."+(+i+1)+".0":c=">="+s+"."+i+".0 <"+(+s+1)+".0.0":a?(ve("replaceCaret pr",a),s==="0"?i==="0"?c=">="+s+"."+i+"."+o+"-"+a+" <"+s+"."+i+"."+(+o+1):c=">="+s+"."+i+"."+o+"-"+a+" <"+s+"."+(+i+1)+".0":c=">="+s+"."+i+"."+o+"-"+a+" <"+(+s+1)+".0.0"):(ve("no pr"),s==="0"?i==="0"?c=">="+s+"."+i+"."+o+" <"+s+"."+i+"."+(+o+1):c=">="+s+"."+i+"."+o+" <"+s+"."+(+i+1)+".0":c=">="+s+"."+i+"."+o+" <"+(+s+1)+".0.0"),ve("caret return",c),c})}function xI(r,e){return ve("replaceXRanges",r,e),r.split(/\s+/).map(function(t){return PI(t,e)}).join(" ")}function PI(r,e){r=r.trim();var t=e.loose?me[wv]:me[Ov];return r.replace(t,function(n,s,i,o,a,c){ve("xRange",r,n,s,i,o,a,c);var u=Ke(i),f=u||Ke(o),d=f||Ke(a),_=d;return s==="="&&_&&(s=""),u?s===">"||s==="<"?n="<0.0.0":n="*":s&&_?(f&&(o=0),a=0,s===">"?(s=">=",f?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",f?i=+i+1:o=+o+1),n=s+i+"."+o+"."+a):f?n=">="+i+".0.0 <"+(+i+1)+".0.0":d&&(n=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),ve("xRange return",n),n})}function AI(r,e){return ve("replaceStars",r,e),r.trim().replace(me[Lv],"")}function NI(r,e,t,n,s,i,o,a,c,u,f,d,_){return Ke(t)?e="":Ke(n)?e=">="+t+".0.0":Ke(s)?e=">="+t+"."+n+".0":e=">="+e,Ke(c)?a="":Ke(u)?a="<"+(+c+1)+".0.0":Ke(f)?a="<"+c+"."+(+u+1)+".0":d?a="<="+c+"."+u+"."+f+"-"+d:a="<="+a,(e+" "+a).trim()}we.prototype.test=function(r){if(!r)return!1;typeof r=="string"&&(r=new oe(r,this.options));for(var e=0;e<this.set.length;e++)if(DI(this.set[e],r,this.options))return!0;return!1};function DI(r,e,t){for(var n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(n=0;n<r.length;n++)if(ve(r[n].semver),r[n].semver!==Vs&&r[n].semver.prerelease.length>0){var s=r[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}Y.satisfies=Ko;function Ko(r,e,t){try{e=new we(e,t)}catch{return!1}return e.test(r)}Y.maxSatisfying=LI;function LI(r,e,t){var n=null,s=null;try{var i=new we(e,t)}catch{return null}return r.forEach(function(o){i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new oe(n,t))}),n}Y.minSatisfying=qI;function qI(r,e,t){var n=null,s=null;try{var i=new we(e,t)}catch{return null}return r.forEach(function(o){i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new oe(n,t))}),n}Y.minVersion=kI;function kI(r,e){r=new we(r,e);var t=new oe("0.0.0");if(r.test(t)||(t=new oe("0.0.0-0"),r.test(t)))return t;t=null;for(var n=0;n<r.set.length;++n){var s=r.set[n];s.forEach(function(i){var o=new oe(i.semver.version);switch(i.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!t||Hs(t,o))&&(t=o);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+i.operator)}})}return t&&r.test(t)?t:null}Y.validRange=jI;function jI(r,e){try{return new we(r,e).range||"*"}catch{return null}}Y.ltr=FI;function FI(r,e,t){return Yu(r,e,"<",t)}Y.gtr=MI;function MI(r,e,t){return Yu(r,e,">",t)}Y.outside=Yu;function Yu(r,e,t,n){r=new oe(r,n),e=new we(e,n);var s,i,o,a,c;switch(t){case">":s=Hs,i=Wu,o=Yo,a=">",c=">=";break;case"<":s=Yo,i=Xu,o=Hs,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ko(r,e,n))return!1;for(var u=0;u<e.set.length;++u){var f=e.set[u],d=null,_=null;if(f.forEach(function(m){m.semver===Vs&&(m=new bt(">=0.0.0")),d=d||m,_=_||m,s(m.semver,d.semver,n)?d=m:o(m.semver,_.semver,n)&&(_=m)}),d.operator===a||d.operator===c||(!_.operator||_.operator===a)&&i(r,_.semver))return!1;if(_.operator===c&&o(r,_.semver))return!1}return!0}Y.prerelease=UI;function UI(r,e){var t=Hr(r,e);return t&&t.prerelease.length?t.prerelease:null}Y.intersects=GI;function GI(r,e,t){return r=new we(r,t),e=new we(e,t),r.intersects(e)}Y.coerce=$I;function $I(r){if(r instanceof oe)return r;if(typeof r!="string")return null;var e=r.match(me[Iv]);return e==null?null:Hr(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var Ku=l(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});var HI=require("path"),BI=jv(),Mv=require("module"),VI=Object.keys(process.binding("natives")),Fv=Mv.prototype.require;function XI(r){var e={};return function(n){var s=Fv.apply(this,arguments);if(r[n]){var i=Mv._resolveFilename(n,this);if(e.hasOwnProperty(i))return e[i];var o=void 0;if(VI.indexOf(n)<0)try{o=Fv.call(this,HI.join(n,"package.json")).version}catch{return s}else o=process.version.substring(1);var a=o.indexOf("-");a>=0&&(o=o.substring(0,a));for(var c=s,u=0,f=r[n];u<f.length;u++){var d=f[u];BI.satisfies(o,d.versionSpecifier)&&(c=d.patch(c,i))}return e[i]=c}return s}}zu.makePatchingRequire=XI});var Uv=l((_L,WI)=>{WI.exports={name:"diagnostic-channel",version:"0.2.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^7.0.12",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"^2.2.1"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var ke=l(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});var YI=Ku(),zI=Ku();ea.makePatchingRequire=zI.makePatchingRequire;var Gv=function(r){return!0},KI=function(){function r(){this.version=Uv().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return r.prototype.shouldPublish=function(e){var t=this.subscribers[e];return t?t.some(function(n){var s=n.filter;return!s||s(!1)}):!1},r.prototype.publish=function(e,t){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var s={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,n.forEach(function(i){var o=i.listener,a=i.filter;try{a&&a(!0)&&o(s)}catch{}}),this.currentlyPublishing=!1}}},r.prototype.subscribe=function(e,t,n){n===void 0&&(n=Gv),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:n})},r.prototype.unsubscribe=function(e,t,n){n===void 0&&(n=Gv);var s=this.subscribers[e];if(s){for(var i=0;i<s.length;++i)if(s[i].listener===t&&s[i].filter===n)return s.splice(i,1),!0}return!1},r.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(t){return t},Object.getOwnPropertyNames(this.knownPatches).forEach(function(t){return delete e.knownPatches[t]})},r.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},r.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}},r.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},r.prototype.getPatchesObject=function(){return this.knownPatches},r}();global.diagnosticsSource||(global.diagnosticsSource=new KI,$v=require("module"),$v.prototype.require=YI.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var $v;ea.channel=global.diagnosticsSource});var Bv=l(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});var Hv=ke(),ZI=function(r){var e=r.prototype._emit;return r.prototype._emit=function(t,n){var s=e.apply(this,arguments);if(!n){var i=s;i||(i=e.call(this,t,!0)),Hv.channel.publish("bunyan",{level:t.level,result:i})}return s},r};Xs.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:ZI};function JI(){Hv.channel.registerMonkeyPatch("bunyan",Xs.bunyan)}Xs.enable=JI});var Xv=l(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var Zu=ke(),Vv=require("stream"),QI=function(r){var e=new Vv.Writable,t=new Vv.Writable;e.write=function(u){if(!u)return!0;var f=u.toString();return Zu.channel.publish("console",{message:f}),!0},t.write=function(u){if(!u)return!0;var f=u.toString();return Zu.channel.publish("console",{message:f,stderr:!0}),!0};for(var n=new r.Console(e,t),s=["log","info","warn","error","dir","time","timeEnd","trace","assert"],i=function(u){var f=r[u];f&&(r[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch{}return f.apply(r,arguments)})},o=0,a=s;o<a.length;o++){var c=a[o];i(c)}return r};Ws.console={versionSpecifier:">= 4.0.0",patch:QI};function e0(){Zu.channel.registerMonkeyPatch("console",Ws.console),require("console")}Ws.enable=e0});var Wv=l(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});var Ju=ke(),t0=function(r){var e=r.Server.prototype.connect;return r.Server.prototype.connect=function(){var n=e.apply(this,arguments),s=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=Ju.channel.bindToContext(arguments[a])),s.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Ju.channel.bindToContext(arguments[1])),i.apply(this,arguments)},n},r};Ys.mongoCore2={versionSpecifier:">= 2.0.0 < 2.2.0",patch:t0};function r0(){Ju.channel.registerMonkeyPatch("mongodb-core",Ys.mongoCore2)}Ys.enable=r0});var Yv=l(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var ta=ke(),n0=function(r){var e=r.instrument({operationIdGenerator:{next:function(){return ta.channel.bindToContext(function(n){return n()})}}}),t={};return e.on("started",function(n){t[n.requestId]||(t[n.requestId]=n)}),e.on("succeeded",function(n){var s=t[n.requestId];s&&delete t[n.requestId],n.operationId(function(){return ta.channel.publish("mongodb",{startedData:s,event:n,succeeded:!0})})}),e.on("failed",function(n){var s=t[n.requestId];s&&delete t[n.requestId],n.operationId(function(){return ta.channel.publish("mongodb",{startedData:s,event:n,succeeded:!1})})}),r};zs.mongo2={versionSpecifier:">= 2.0.0 <= 2.2.x",patch:n0};function s0(){ta.channel.registerMonkeyPatch("mongodb",zs.mongo2)}zs.enable=s0});var Kv=l(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});var ra=ke(),zv=require("path"),i0=function(r,e){var t=function(c,u){return function(f,d){var _=c[f];_&&(c[f]=function(){for(var y=arguments.length-1,P=arguments.length-1;P>=0;--P)if(typeof arguments[P]=="function"){y=P;break}else if(typeof arguments[P]<"u")break;var M=arguments[y],W={result:null,startTime:null};typeof M=="function"&&(d?(W.startTime=process.hrtime(),arguments[y]=ra.channel.bindToContext(d(W,M))):arguments[y]=ra.channel.bindToContext(M));var L=_.apply(this,arguments);return W.result=L,L})}},n=function(c,u){return t(c.prototype,u+".prototype")},s=["connect","changeUser","ping","statistics","end"],i=require(zv.dirname(e)+"/lib/Connection");s.forEach(function(c){return n(i,"Connection")(c)}),t(i,"Connection")("createQuery",function(c,u){return function(f){var d=process.hrtime(c.startTime),_=d[0]*1e3+d[1]/1e6|0;ra.channel.publish("mysql",{query:c.result,callbackArgs:arguments,err:f,duration:_}),u.apply(this,arguments)}});var o=["_enqueueCallback"],a=require(zv.dirname(e)+"/lib/Pool");return o.forEach(function(c){return n(a,"Pool")(c)}),r};Ks.mysql={versionSpecifier:">= 2.0.0 <= 2.14.x",patch:i0};function o0(){ra.channel.registerMonkeyPatch("mysql",Ks.mysql)}Ks.enable=o0});var Jv=l(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});var Zv=ke();function a0(r){var e=r.prototype.connect;return r.prototype.connect=function(n){n&&(arguments[0]=Zv.channel.bindToContext(n)),e.apply(this,arguments)},r}Zs.postgresPool1={versionSpecifier:"1.x",patch:a0};function c0(){Zv.channel.registerMonkeyPatch("pg-pool",Zs.postgresPool1)}Zs.enable=c0});var Qv=l(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var Qu=ke(),u0=require("events");function l0(r,e){var t=r.Client.prototype.query,n="__diagnosticOriginalFunc";return r.Client.prototype.query=function(i,o,a){var c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0},u=process.hrtime(),f;function d(_){_&&_[n]&&(_=_[n]);var m=Qu.channel.bindToContext(function(y,P){var M=process.hrtime(u);if(c.result=P&&{rowCount:P.rowCount,command:P.command},c.error=y,c.duration=Math.ceil(M[0]*1e3+M[1]/1e6),Qu.channel.publish("postgres",c),y){if(_)return _.apply(this,arguments);f&&f instanceof u0.EventEmitter&&f.emit("error",y)}else _&&_.apply(this,arguments)});try{return Object.defineProperty(m,n,{value:_}),m}catch{return _}}try{typeof i=="string"?o instanceof Array?(c.query.preparable={text:i,args:o},a=d(a)):(c.query.text=i,a?a=d(a):o=d(o)):(typeof i.name=="string"?c.query.plan=i.name:i.values instanceof Array?c.query.preparable={text:i.text,args:i.values}:c.query.text=i.text,a?a=d(a):o?o=d(o):i.callback=d(i.callback))}catch{return t.apply(this,arguments)}return arguments[0]=i,arguments[1]=o,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,f=t.apply(this,arguments),f},r}Js.postgres6={versionSpecifier:"6.x",patch:l0};function f0(){Qu.channel.registerMonkeyPatch("pg",Js.postgres6)}Js.enable=f0});var e_=l(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var el=ke(),h0=function(r){var e=r.RedisClient.prototype.internal_send_command;return r.RedisClient.prototype.internal_send_command=function(t){if(t){var n=t.callback;if(!n||!n.pubsubBound){var s=this.address,i=process.hrtime();t.callback=el.channel.bindToContext(function(o,a){var c=process.hrtime(i),u=c[0]*1e3+c[1]/1e6|0;el.channel.publish("redis",{duration:u,address:s,commandObj:t,err:o,result:a}),typeof n=="function"&&n.apply(this,arguments)}),t.callback.pubsubBound=!0}}return e.call(this,t)},r};Qs.redis={versionSpecifier:">= 2.0.0 < 3.0.0",patch:h0};function d0(){el.channel.registerMonkeyPatch("redis",Qs.redis)}Qs.enable=d0});var r_=l(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});var t_=ke(),p0=function(r){var e=r.Logger.prototype.log,t,n=function(s,i,o){var a;return t===r.config.npm.levels?a="npm":t===r.config.syslog.levels?a="syslog":a="unknown",t_.channel.publish("winston",{level:s,message:i,meta:o,levelKind:a}),i};return r.Logger.prototype.log=function(){return t=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(i){return i!==n}),this.filters.push(n)),e.apply(this,arguments)},r};ei.winston={versionSpecifier:"2.x",patch:p0};function g0(){t_.channel.registerMonkeyPatch("winston",ei.winston)}ei.enable=g0});var h_=l(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});var n_=Bv();St.bunyan=n_;var s_=Xv();St.console=s_;var i_=Wv();St.mongodbCore=i_;var o_=Yv();St.mongodb=o_;var a_=Kv();St.mysql=a_;var c_=Jv();St.pgPool=c_;var u_=Qv();St.pg=u_;var l_=e_();St.redis=l_;var f_=r_();St.winston=f_;function v0(){n_.enable(),s_.enable(),i_.enable(),o_.enable(),a_.enable(),u_.enable(),c_.enable(),l_.enable(),f_.enable()}St.enable=v0});var na=l(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;if(Gn.IsInitialized){Ut=h_(),d_=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",p_=d_.split(","),tl={bunyan:Ut.bunyan,console:Ut.console,mongodb:Ut.mongodb,mongodbCore:Ut.mongodbCore,mysql:Ut.mysql,redis:Ut.redis,pg:Ut.pg,pgPool:Ut.pgPool,winston:Ut.winston};for(rl in tl)p_.indexOf(rl)===-1&&tl[rl].enable()}var Ut,d_,p_,tl,rl;function _0(r){!Gn.IsInitialized||ke().channel.addContextPreservation(r)}Gn.registerContextPreservation=_0});var v_=l((nl,g_)=>{(function(r,e){typeof nl=="object"&&typeof g_<"u"?e():typeof define=="function"&&define.amd?define(e):e()})(nl,function(){"use strict";var r=function(T){if(T.Zone)throw new Error("Zone already loaded.");var x=function(){function v(g,h){this._properties=null,this._parent=g,this._name=h?h.name||"unnamed":"<root>",this._properties=h&&h.properties||{},this._zoneDelegate=new k(this,this._parent&&this._parent._zoneDelegate,h)}return v.assertZonePatched=function(){if(T.Promise!==et)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(v,"current",{get:function(){return re.zone},enumerable:!0,configurable:!0}),Object.defineProperty(v,"currentTask",{get:function(){return Je},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),v.prototype.get=function(g){var h=this.getZoneWith(g);if(h)return h._properties[g]},v.prototype.getZoneWith=function(g){for(var h=this;h;){if(h._properties.hasOwnProperty(g))return h;h=h._parent}return null},v.prototype.fork=function(g){if(!g)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,g)},v.prototype.wrap=function(g,h){if(typeof g!="function")throw new Error("Expecting function got: "+g);var p=this._zoneDelegate.intercept(this,g,h),R=this;return function(){return R.runGuarded(p,this,arguments,h)}},v.prototype.run=function(g,h,p,R){h===void 0&&(h=null),p===void 0&&(p=null),R===void 0&&(R=null),re=new te(re,this);try{return this._zoneDelegate.invoke(this,g,h,p,R)}finally{re=re.parent}},v.prototype.runGuarded=function(g,h,p,R){h===void 0&&(h=null),p===void 0&&(p=null),R===void 0&&(R=null),re=new te(re,this);try{try{return this._zoneDelegate.invoke(this,g,h,p,R)}catch(V){if(this._zoneDelegate.handleError(this,V))throw V}}finally{re=re.parent}},v.prototype.runTask=function(g,h,p){if(g.runCount++,g.zone!=this)throw new Error("A task can only be run in the zone which created it! (Creation: "+g.zone.name+"; Execution: "+this.name+")");var R=Je;Je=g,re=new te(re,this);try{g.type=="macroTask"&&g.data&&!g.data.isPeriodic&&(g.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,g,h,p)}catch(V){if(this._zoneDelegate.handleError(this,V))throw V}}finally{re=re.parent,Je=R}},v.prototype.scheduleMicroTask=function(g,h,p,R){return this._zoneDelegate.scheduleTask(this,new j("microTask",this,g,h,p,R,null))},v.prototype.scheduleMacroTask=function(g,h,p,R,V){return this._zoneDelegate.scheduleTask(this,new j("macroTask",this,g,h,p,R,V))},v.prototype.scheduleEventTask=function(g,h,p,R,V){return this._zoneDelegate.scheduleTask(this,new j("eventTask",this,g,h,p,R,V))},v.prototype.cancelTask=function(g){var h=this._zoneDelegate.cancelTask(this,g);return g.runCount=-1,g.cancelFn=null,h},v}();x.__symbol__=X;var k=function(){function v(g,h,p){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=g,this._parentDelegate=h,this._forkZS=p&&(p&&p.onFork?p:h._forkZS),this._forkDlgt=p&&(p.onFork?h:h._forkDlgt),this._forkCurrZone=p&&(p.onFork?this.zone:h.zone),this._interceptZS=p&&(p.onIntercept?p:h._interceptZS),this._interceptDlgt=p&&(p.onIntercept?h:h._interceptDlgt),this._interceptCurrZone=p&&(p.onIntercept?this.zone:h.zone),this._invokeZS=p&&(p.onInvoke?p:h._invokeZS),this._invokeDlgt=p&&(p.onInvoke?h:h._invokeDlgt),this._invokeCurrZone=p&&(p.onInvoke?this.zone:h.zone),this._handleErrorZS=p&&(p.onHandleError?p:h._handleErrorZS),this._handleErrorDlgt=p&&(p.onHandleError?h:h._handleErrorDlgt),this._handleErrorCurrZone=p&&(p.onHandleError?this.zone:h.zone),this._scheduleTaskZS=p&&(p.onScheduleTask?p:h._scheduleTaskZS),this._scheduleTaskDlgt=p&&(p.onScheduleTask?h:h._scheduleTaskDlgt),this._scheduleTaskCurrZone=p&&(p.onScheduleTask?this.zone:h.zone),this._invokeTaskZS=p&&(p.onInvokeTask?p:h._invokeTaskZS),this._invokeTaskDlgt=p&&(p.onInvokeTask?h:h._invokeTaskDlgt),this._invokeTaskCurrZone=p&&(p.onInvokeTask?this.zone:h.zone),this._cancelTaskZS=p&&(p.onCancelTask?p:h._cancelTaskZS),this._cancelTaskDlgt=p&&(p.onCancelTask?h:h._cancelTaskDlgt),this._cancelTaskCurrZone=p&&(p.onCancelTask?this.zone:h.zone),this._hasTaskZS=p&&(p.onHasTask?p:h._hasTaskZS),this._hasTaskDlgt=p&&(p.onHasTask?h:h._hasTaskDlgt),this._hasTaskCurrZone=p&&(p.onHasTask?this.zone:h.zone)}return v.prototype.fork=function(g,h){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,g,h):new x(g,h)},v.prototype.intercept=function(g,h,p){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,g,h,p):h},v.prototype.invoke=function(g,h,p,R,V){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,g,h,p,R,V):h.apply(p,R)},v.prototype.handleError=function(g,h){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,g,h):!0},v.prototype.scheduleTask=function(g,h){try{if(this._scheduleTaskZS)return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,g,h);if(h.scheduleFn)h.scheduleFn(h);else if(h.type=="microTask")gi(h);else throw new Error("Task is missing scheduleFn.");return h}finally{g==this.zone&&this._updateTaskCount(h.type,1)}},v.prototype.invokeTask=function(g,h,p,R){try{return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,g,h,p,R):h.callback.apply(p,R)}finally{g==this.zone&&h.type!="eventTask"&&!(h.data&&h.data.isPeriodic)&&this._updateTaskCount(h.type,-1)}},v.prototype.cancelTask=function(g,h){var p;if(this._cancelTaskZS)p=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,g,h);else if(h.cancelFn)p=h.cancelFn(h);else throw new Error("Task does not support cancellation, or is already canceled.");return g==this.zone&&this._updateTaskCount(h.type,-1),p},v.prototype.hasTask=function(g,h){return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,g,h)},v.prototype._updateTaskCount=function(g,h){var p=this._taskCounts,R=p[g],V=p[g]=R+h;if(V<0)throw new Error("More tasks executed then were scheduled.");if(R==0||V==0){var Oe={microTask:p.microTask>0,macroTask:p.macroTask>0,eventTask:p.eventTask>0,change:g};try{this.hasTask(this.zone,Oe)}finally{this._parentDelegate&&this._parentDelegate._updateTaskCount(g,h)}}},v}(),j=function(){function v(g,h,p,R,V,Oe,nt){this.runCount=0,this.type=g,this.zone=h,this.source=p,this.data=V,this.scheduleFn=Oe,this.cancelFn=nt,this.callback=R;var pt=this;this.invoke=function(){de++;try{return h.runTask(pt,this,arguments)}finally{de==1&&ms(),de--}}}return v.prototype.toString=function(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId:Object.prototype.toString.call(this)},v.prototype.toJSON=function(){return{type:this.type,source:this.source,data:this.data,zone:this.zone.name,invoke:this.invoke,scheduleFn:this.scheduleFn,cancelFn:this.cancelFn,runCount:this.runCount,callback:this.callback}},v}(),te=function(){function v(g,h){this.parent=g,this.zone=h}return v}();function X(v){return"__zone_symbol__"+v}var ee=X("setTimeout"),_e=X("Promise"),he=X("then"),re=new te(null,new x(null,null)),Je=null,ye=[],Te=!1,dt=[],de=0;function Qe(){de===0&&ye.length===0&&(T[_e]?T[_e].resolve(0)[he](ms):T[ee](ms,0))}function gi(v){Qe(),ye.push(v)}function _s(v){var g=v&&v.rejection;g&&console.error("Unhandled Promise rejection:",g instanceof Error?g.message:g,"; Zone:",v.zone.name,"; Task:",v.task&&v.task.source,"; Value:",g,g instanceof Error?g.stack:void 0),console.error(v)}function ms(){if(!Te){for(Te=!0;ye.length;){var v=ye;ye=[];for(var g=0;g<v.length;g++){var h=v[g];try{h.zone.runTask(h,null,null)}catch(R){_s(R)}}}for(;dt.length;)for(var p=function(){var R=dt.shift();try{R.zone.runGuarded(function(){throw R})}catch(V){_s(V)}};dt.length;)p();Te=!1}}function Es(v){return v&&v.then}function vi(v){return v}function _y(v){return et.reject(v)}var wt=X("state"),yr=X("value"),my="Promise.then",_i=null,pf=!0,mi=!1,gf=0;function Ei(v,g){return function(h){br(v,g,h)}}function br(v,g,h){if(v[wt]===_i)if(h instanceof et&&h.hasOwnProperty(wt)&&h.hasOwnProperty(yr)&&h[wt]!==_i)vf(h),br(v,h[wt],h[yr]);else if(Es(h))h.then(Ei(v,g),Ei(v,!1));else{v[wt]=g;var p=v[yr];v[yr]=h;for(var R=0;R<p.length;)_f(v,p[R++],p[R++],p[R++],p[R++]);if(p.length==0&&g==mi){v[wt]=gf;try{throw new Error("Uncaught (in promise): "+h+(h&&h.stack?`
`+h.stack:""))}catch(Oe){var V=Oe;V.rejection=h,V.promise=v,V.zone=x.current,V.task=x.currentTask,dt.push(V),Qe()}}}return v}function vf(v){if(v[wt]===gf){v[wt]=mi;for(var g=0;g<dt.length;g++)if(v===dt[g].promise){dt.splice(g,1);break}}}function _f(v,g,h,p,R){vf(v);var V=v[wt]?p||vi:R||_y;g.scheduleMicroTask(my,function(){try{br(h,!0,g.run(V,null,[v[yr]]))}catch(Oe){br(h,!1,Oe)}})}var et=function(){function v(g){var h=this;if(!(h instanceof v))throw new Error("Must be an instanceof Promise.");h[wt]=_i,h[yr]=[];try{g&&g(Ei(h,pf),Ei(h,mi))}catch(p){br(h,!1,p)}}return v.toString=function(){return"function ZoneAwarePromise() { [native code] }"},v.resolve=function(g){return br(new this(null),pf,g)},v.reject=function(g){return br(new this(null),mi,g)},v.race=function(g){var h,p,R=new this(function(gt,ys){Xa=[gt,ys],h=Xa[0],p=Xa[1];var Xa});function V(gt){R&&(R=h(gt))}function Oe(gt){R&&(R=p(gt))}for(var nt=0,pt=g;nt<pt.length;nt++){var st=pt[nt];Es(st)||(st=this.resolve(st)),st.then(V,Oe)}return R},v.all=function(g){for(var h,p,R=new this(function(gt,ys){h=gt,p=ys}),V=0,Oe=[],nt=0,pt=g;nt<pt.length;nt++){var st=pt[nt];Es(st)||(st=this.resolve(st)),st.then(function(gt){return function(ys){Oe[gt]=ys,V--,V||h(Oe)}}(V),p),V++}return V||h(Oe),R},v.prototype.then=function(g,h){var p=new this.constructor(null),R=x.current;return this[wt]==_i?this[yr].push(R,p,g,h):_f(this,R,p,g,h),p},v.prototype.catch=function(g){return this.then(null,g)},v}();et.resolve=et.resolve,et.reject=et.reject,et.race=et.race,et.all=et.all;var Ha=T[X("Promise")]=T.Promise;T.Promise=et;function mf(v){var g=v.prototype,h=g[X("then")]=g.then;g.then=function(p,R){var V=this;return new et(function(Oe,nt){h.call(V,Oe,nt)}).then(p,R)}}if(Ha&&(mf(Ha),typeof T.fetch<"u")){var sn=void 0;try{sn=T.fetch()}catch{sn=T.fetch("about:blank")}sn.then(function(){return null},function(){return null}),sn.constructor!=Ha&&sn.constructor!=et&&mf(sn.constructor)}Promise[x.__symbol__("uncaughtPromiseErrors")]=dt;var on;(function(v){v[v.blackList=0]="blackList",v[v.transition=1]="transition"})(on||(on={}));var tt=T[X("Error")]=T.Error,yi={},Ef;T.Error=rt;var aA=null,Ba="stackRewrite",bi=function(v,g){if(!v[g]){var h=X(g);v[g]={configurable:!0,enumerable:!0,get:function(){if(!this[h]){var p=this[X("error")];p&&(this[h]=p[g])}return this[h]},set:function(p){this[h]=p}}}},yf=function(v,g){v[g]||(v[g]={configurable:!0,enumerable:!0,writable:!0,value:function(){var h=this[X("error")],p=h&&h[g]||this[g];if(p)return p.apply(h,arguments)}})},Ey=function(){for(var v=Object.create(null),g=new tt,h=Object.getOwnPropertyNames(g),p=0;p<h.length;p++){var R=h[p];Object.prototype.hasOwnProperty.call(g,R)&&bi(v,R)}var V=tt.prototype;if(V)for(var Oe=Object.getOwnPropertyNames(V),p=0;p<Oe.length;p++){var R=Oe[p];R!=="constructor"&&R!=="toString"&&R!=="toSource"&&bi(v,R)}return bi(v,"originalStack"),bi(v,"zoneAwareStack"),yf(v,"toString"),yf(v,"toSource"),v},Va=Ey(),yy=function(v){if(v===rt.prototype)return Va;var g=Object.create(null),h=Object.getOwnPropertyNames(Va),p=Object.getOwnPropertyNames(v);return h.forEach(function(R){p.filter(function(V){return V===R}).length===0&&(g[R]=Va[R])}),g};function rt(){if(!(this instanceof rt))return rt.apply(Object.create(rt.prototype),arguments);var v=tt.apply(this,arguments);if(this[X("error")]=v,v.originalStack=v.stack,rt[Ba]&&v.originalStack){for(var g=v.originalStack.split(`
`),h=re,p=0;g[p]!==Ef&&p<g.length;)p++;for(;p<g.length&&h;p++){var R=g[p];if(R.trim()){var V=yi.hasOwnProperty(R)&&yi[R];V===on.blackList?(g.splice(p,1),p--):V===on.transition?h.parent?(g[p]+=" ["+h.parent.zone.name+" => "+h.zone.name+"]",h=h.parent):h=null:g[p]+=" ["+h.zone.name+"]"}}v.stack=v.zoneAwareStack=g.join(`
`)}return Object.defineProperties(this,yy(Object.getPrototypeOf(this))),this}rt.prototype=tt.prototype,rt[x.__symbol__("blacklistedStackFrames")]=yi,rt[Ba]=!1,tt.hasOwnProperty("stackTraceLimit")&&(tt.stackTraceLimit=Math.max(tt.stackTraceLimit,15),Object.defineProperty(rt,"stackTraceLimit",{get:function(){return tt.stackTraceLimit},set:function(v){return tt.stackTraceLimit=v}})),tt.hasOwnProperty("captureStackTrace")&&Object.defineProperty(rt,"captureStackTrace",{value:function(g,h){tt.captureStackTrace(g,h)}}),Object.defineProperty(rt,"prepareStackTrace",{get:function(){return tt.prepareStackTrace},set:function(v){return!v||typeof v!="function"?tt.prepareStackTrace=v:tt.prepareStackTrace=function(g,h){if(h)for(var p=0;p<h.length;p++){var R=h[p];if(R.getFunctionName()==="zoneCaptureStackTrace"){h.splice(p,1);break}}return v.apply(this,[g,h])}}});var Si=x.current.fork({name:"detect",onInvoke:function(v,g,h,p,R,V,Oe){return v.invoke(h,p,R,V,Oe)},onHandleError:function(v,g,h,p){if(p.originalStack&&Error===rt)for(var R=p.originalStack.split(/\n/),V=!1,Oe=!1,nt=!1;R.length;){var pt=R.shift();if(/:\d+:\d+/.test(pt)){var st=pt.split("(")[0].split("@")[0],gt=on.transition;if(st.indexOf("ZoneAwareError")!==-1&&(Ef=pt),st.indexOf("runGuarded")!==-1?Oe=!0:st.indexOf("runTask")!==-1?nt=!0:st.indexOf("run")!==-1?V=!0:gt=on.blackList,yi[pt]=gt,V&&Oe&&nt){rt[Ba]=!0;break}}}return!1}}),by=function(){Si.run(function(){Si.runGuarded(function(){throw new Error("blacklistStackFrames")})})};return Si.runTask(Si.scheduleMacroTask("detect",by,null,function(){return null},null)),T.Zone=x}(typeof window=="object"&&window||typeof self=="object"&&self||global);var e=function(T){return"__zone_symbol__"+T},t=typeof window=="object"&&window||typeof self=="object"&&self||global;function n(T,x){for(var k=T.length-1;k>=0;k--)typeof T[k]=="function"&&(T[k]=Zone.current.wrap(T[k],x+"_"+k));return T}var s=!("nw"in t)&&typeof process<"u"&&{}.toString.call(process)==="[object process]",i=e("eventTasks"),o="addEventListener",a="removeEventListener";function c(T,x,k,j,te){var X=T[i];if(X)for(var ee=0;ee<X.length;ee++){var _e=X[ee],he=_e.data,re=he.handler;if((he.handler===x||re.listener===x)&&he.useCapturing===j&&he.eventName===k)return te&&X.splice(ee,1),_e}return null}function u(T,x,k,j){var te=T[i];if(te){for(var X=[],ee=te.length-1;ee>=0;ee--){var _e=te[ee],he=_e.data;he.eventName===x&&he.useCapturing===k&&(X.push(_e),j&&te.splice(ee,1))}return X}return null}function f(T,x,k){var j=T[i];j||(j=T[i]=[]),k?j.unshift(x):j.push(x)}var d=function(T,x){return{useCapturing:x[2],eventName:x[0],handler:x[1],target:T||t,name:x[0],invokeAddFunc:function(k,j){return j&&j.invoke?this.target[k](this.eventName,j.invoke,this.useCapturing):this.target[k](this.eventName,j,this.useCapturing)},invokeRemoveFunc:function(k,j){return j&&j.invoke?this.target[k](this.eventName,j.invoke,this.useCapturing):this.target[k](this.eventName,j,this.useCapturing)}}};function _(T,x,k,j,te,X){k===void 0&&(k=!0),j===void 0&&(j=!1),te===void 0&&(te=!1),X===void 0&&(X=d);var ee=e(T),_e=e(x),he=k?!1:void 0;function re(ye){var Te=ye.data;return f(Te.target,ye,te),Te.invokeAddFunc(ee,ye)}function Je(ye){var Te=ye.data;return c(Te.target,ye.invoke,Te.eventName,Te.useCapturing,!0),Te.invokeRemoveFunc(_e,ye)}return function(Te,dt){var de=X(Te,dt);de.useCapturing=de.useCapturing||he;var Qe=null;typeof de.handler=="function"?Qe=de.handler:de.handler&&de.handler.handleEvent&&(Qe=function(vi){return de.handler.handleEvent(vi)});var gi=!1;try{gi=de.handler&&de.handler.toString()==="[object FunctionWrapper]"}catch{return}if(!Qe||gi)return de.invokeAddFunc(ee,de.handler);if(!j){var _s=c(de.target,de.handler,de.eventName,de.useCapturing,!1);if(_s)return de.invokeAddFunc(ee,_s)}var ms=Zone.current,Es=de.target.constructor.name+"."+T+":"+de.eventName;ms.scheduleEventTask(Es,Qe,de,re,Je)}}function m(T,x,k){x===void 0&&(x=!0),k===void 0&&(k=d);var j=e(T),te=x?!1:void 0;return function(ee,_e){var he=k(ee,_e);he.useCapturing=he.useCapturing||te;var re=c(he.target,he.handler,he.eventName,he.useCapturing,!0);re?re.zone.cancelTask(re):he.invokeRemoveFunc(j,he.handler)}}function y(T,x){x===void 0&&(x=!0);var k=e(T),j=x?!1:void 0;return function(X,ee){var _e=X||t;if(ee.length===0){_e[i]=[],_e[k]();return}var he=ee[0],re=ee[1]||j;u(_e,he,re,!0),_e[k](he)}}function P(T){var x=e(T);return function(j,te){var X=te[0],ee=j||t;return ee[i]?ee[i].filter(function(_e){return _e.data.eventName===X}).map(function(_e){return _e.data.handler}):[]}}var M=_(o,a),W=m(a),L=e("originalInstance");function O(T,x){try{return Function("f","return function "+T+"(){return f(this, arguments)}")(x)}catch{return function(){return x(this,arguments)}}}function C(T,x,k){for(var j=T;j&&Object.getOwnPropertyNames(j).indexOf(x)===-1;)j=Object.getPrototypeOf(j);!j&&T[x]&&(j=T);var te=e(x),X;return j&&!(X=j[te])&&(X=j[te]=j[x],j[x]=O(x,k(X,te,x))),X}function U(T,x,k){var j=null;function te(X){var ee=X.data;return ee.args[ee.callbackIndex]=function(){X.invoke.apply(this,arguments)},j.apply(ee.target,ee.args),X}j=C(T,x,function(X){return function(ee,_e){var he=k(ee,_e);if(he.callbackIndex>=0&&typeof _e[he.callbackIndex]=="function"){var re=Zone.current.scheduleMacroTask(he.name,_e[he.callbackIndex],he,te,null);return re}else return X.apply(ee,_e)}})}var B=function(T){return function(x,k){return T(x,k),x}},q="addListener",S="prependListener",E="removeListener",w="removeAllListeners",G="listeners",I="on",D=B(_(q,E,!1,!0,!1)),H=B(_(S,E,!1,!0,!0)),Z=B(m(E,!1)),Ne=B(y(w,!1)),Fe=P(G);function Ie(T){return T&&T.addListener?(C(T,q,function(){return D}),C(T,S,function(){return H}),C(T,E,function(){return Z}),C(T,w,function(){return Ne}),C(T,G,function(){return Fe}),T[I]=T[q],!0):!1}var Q;try{Q=require("events")}catch{}Q&&Q.EventEmitter&&Ie(Q.EventEmitter.prototype);var le;try{le=require("fs")}catch{}var ae=["access","appendFile","chmod","chown","close","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readdir","readFile","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","write","writeFile"];le&&ae.filter(function(T){return!!le[T]&&typeof le[T]=="function"}).forEach(function(T){U(le,T,function(x,k){return{name:"fs."+T,args:k,callbackIndex:k.length>0?k.length-1:-1,target:x}})});function fe(T,x,k,j){var te=null,X=null;x+=j,k+=j;var ee={};function _e(re){var Je=re.data;return Je.args[0]=function(){re.invoke.apply(this,arguments),delete ee[Je.handleId]},Je.handleId=te.apply(T,Je.args),ee[Je.handleId]=re,re}function he(re){return delete ee[re.data.handleId],X(re.data.handleId)}te=C(T,x,function(re){return function(Je,ye){if(typeof ye[0]=="function"){var Te=Zone.current,dt={handleId:null,isPeriodic:j==="Interval",delay:j==="Timeout"||j==="Interval"?ye[1]||0:null,args:ye},de=Te.scheduleMacroTask(x,ye[0],dt,_e,he);if(!de)return de;var Qe=de.data.handleId;return Qe.ref&&Qe.unref&&(de.ref=Qe.ref.bind(Qe),de.unref=Qe.unref.bind(Qe)),de}else return re.apply(T,ye)}}),X=C(T,k,function(re){return function(Je,ye){var Te=typeof ye[0]=="number"?ee[ye[0]]:ye[0];Te&&typeof Te.type=="string"?(Te.cancelFn&&Te.data.isPeriodic||Te.runCount===0)&&Te.zone.cancelTask(Te):re.apply(T,ye)}})}var Se="set",qt="clear",Ht=typeof window=="object"&&window||typeof self=="object"&&self||global,Tt=require("timers");fe(Tt,Se,qt,"Timeout"),fe(Tt,Se,qt,"Interval"),fe(Tt,Se,qt,"Immediate");var rn=global.setTimeout!==Tt.setTimeout;rn&&(fe(Ht,Se,qt,"Timeout"),fe(Ht,Se,qt,"Interval"),fe(Ht,Se,qt,"Immediate")),vs();var Xe;try{Xe=require("crypto")}catch{}if(Xe){var ps=Xe.randomBytes;Xe.randomBytes=function(x,k){if(k){var j=Zone.current,te=Xe.constructor.name+".randomBytes";return ps(x,j.wrap(k,te))}else return ps(x)}.bind(Xe);var gs=Xe.pbkdf2;Xe.pbkdf2=function(){for(var x=[],k=0;k<arguments.length;k++)x[k]=arguments[k];var j=x[x.length-1];if(typeof j=="function"){var te=Zone.current,X=Xe.constructor.name+".pbkdf2";return x[x.length-1]=te.wrap(j,X),gs.apply(void 0,x)}else return gs.apply(void 0,x)}.bind(Xe)}var Ot;try{Ot=require("_http_client")}catch{}if(Ot&&Ot.ClientRequest){var nn=Ot.ClientRequest.bind(Ot);Ot.ClientRequest=function(T,x){if(x){var k=Zone.current;return new nn(T,k.wrap(x,"http.ClientRequest"))}else return new nn(T)}}function vs(){var T=null;function x(k){var j=k.data;return j[0]=function(){k.invoke.apply(this,arguments)},T.apply(process,j),k}T=C(process,"nextTick",function(k){return function(j,te){if(typeof te[0]=="function"){var X=Zone.current,ee=X.scheduleMicroTask("nextTick",te[0],te,x);return ee}else return k.apply(process,te)}})}})});var $n=l(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var __=ft(),m0=na(),E0=function(){function r(){}return r.getCurrentContext=function(){return r.enabled?Zone.current.get("context"):null},r.generateContextObject=function(e,t,n,s){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t},customProperties:new y0(s)}:null},r.runWithContext=function(e,t){if(r.enabled){var n=Zone.current.fork({name:"AI-"+(e&&e.operation.parentId||"Unknown"),properties:{context:e}});n.run(t)}else t()},r.wrapCallback=function(e){return r.enabled?Zone.current.wrap(e,"User-wrapped method"):e},r.enable=function(){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}if(!r.hasEverEnabled){this.hasEverEnabled=!0;try{typeof Zone>"u"&&v_()}catch{__.warn("Failed to require zone.js")}m0.registerContextPreservation(function(e){return Zone.current.wrap(e,"AI-ContextPreservation")}),this.patchError(),this.patchTimers(["setTimeout","setInterval"])}this.enabled=!0}},r.disable=function(){this.enabled=!1},r.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},r.patchTimers=function(e){e.forEach(function(t){var n=global[t];global[t]=function(){var s=n.apply(this,arguments);return s.toString=function(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)},s}})},r.patchError=function(){var e=global.Error;function t(){if(!(this instanceof t))return t.apply(Object.create(t.prototype),arguments);var o=e.stackRewrite;if(e.prepareStackTrace){e.stackRewrite=!1;var a=e.prepareStackTrace;e.prepareStackTrace=function(m,y){for(var P=!1,M=0;M<y.length;M++){var W=y[M].getFileName();if(W)if(W.indexOf("AutoCollection/CorrelationContextManager")===-1&&W.indexOf("AutoCollection\\CorrelationContextManager")===-1){if(P)break}else P=!0}return M=Math.max(0,M-1),P&&y.splice(0,M),a(m,y)}}if(e.apply(this,arguments),e.stackRewrite=o,this.stack&&typeof this.stack=="string"){var c=this.stack.split(`
`);c.length>3&&c[2].trim().indexOf("at Error.AppInsightsAsyncCorrelatedErrorWrapper")===0&&c.splice(2,1),this.stack=c.map(function(m){var y=m.indexOf(") [");return y>-1&&(m=m.substr(0,y+1)),m}).join(`
`)}for(var u=Object.getOwnPropertyNames(this).concat(Object.keys(this)),f=0;f<u.length;f++){var d=u[f],_=Zone.__symbol__(d);Object.defineProperty(this,d,{enumerable:!1}),Object.defineProperty(this,_,{enumerable:!1,writable:!0})}return this}t.prototype=e.prototype;for(var n=Object.getOwnPropertyNames(e),s=0;s<n.length;s++){var i=n[s];t[i]||Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}global.Error=t},r.enabled=!1,r.hasEverEnabled=!1,r}();sl.CorrelationContextManager=E0;var y0=function(){function r(e){this.props=[],this.addHeaderData(e)}return r.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map(function(n){var s=n.split("=");return{key:s[0],value:s[1]}}).concat(this.props)},r.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},r.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},r.prototype.setProperty=function(e,t){if(r.bannedCharacters.test(e)||r.bannedCharacters.test(t)){__.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+t);return}for(var n=0;n<this.props.length;++n){var s=this.props[n];if(s.key===e){s.value=t;return}}this.props.push({key:e,value:t})},r.bannedCharacters=/[,=]/,r}()});var tr=l((AL,m_)=>{"use strict";var b0=function(){function r(){}return r}();m_.exports=b0});var y_=l((il,E_)=>{"use strict";var S0=il&&il.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),C0=tr(),T0=function(r){S0(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return e}(C0);E_.exports=T0});var ol=l((NL,b_)=>{"use strict";var O0=function(){function r(){}return r}();b_.exports=O0});var C_=l((DL,S_)=>{"use strict";var w0=function(){function r(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return r}();S_.exports=w0});var O_=l((al,T_)=>{"use strict";var I0=al&&al.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R0=ol(),x0=function(r){I0(e,r);function e(){return r.call(this)||this}return e}(R0);T_.exports=x0});var ul=l((LL,w_)=>{"use strict";var cl;(function(r){r[r.Measurement=0]="Measurement",r[r.Aggregation=1]="Aggregation"})(cl||(cl={}));w_.exports=cl});var R_=l((qL,I_)=>{"use strict";var P0=ul(),A0=function(){function r(){this.kind=P0.Measurement}return r}();I_.exports=A0});var P_=l((kL,x_)=>{"use strict";var N0=function(){function r(){this.ver=1,this.sampleRate=100,this.tags={}}return r}();x_.exports=N0});var fl=l((ll,A_)=>{"use strict";var D0=ll&&ll.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),L0=tr(),q0=function(r){D0(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return e}(L0);A_.exports=q0});var D_=l((hl,N_)=>{"use strict";var k0=hl&&hl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),j0=tr(),F0=function(r){k0(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return e}(j0);N_.exports=F0});var q_=l((jL,L_)=>{"use strict";var M0=function(){function r(){this.hasFullStack=!0,this.parsedStack=[]}return r}();L_.exports=M0});var j_=l((dl,k_)=>{"use strict";var U0=dl&&dl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),G0=tr(),$0=function(r){U0(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t}return e}(G0);k_.exports=$0});var M_=l((pl,F_)=>{"use strict";var H0=pl&&pl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),B0=tr(),V0=function(r){H0(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return e}(B0);F_.exports=V0});var G_=l((gl,U_)=>{"use strict";var X0=gl&&gl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),W0=fl(),Y0=function(r){X0(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return e}(W0);U_.exports=Y0});var H_=l((vl,$_)=>{"use strict";var z0=vl&&vl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),K0=tr(),Z0=function(r){z0(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return e}(K0);$_.exports=Z0});var V_=l((_l,B_)=>{"use strict";var J0=_l&&_l.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Q0=tr(),eR=function(r){J0(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return e}(Q0);B_.exports=eR});var W_=l((FL,X_)=>{"use strict";var ml;(function(r){r[r.Verbose=0]="Verbose",r[r.Information=1]="Information",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.Critical=4]="Critical"})(ml||(ml={}));X_.exports=ml});var z_=l((ML,Y_)=>{"use strict";var tR=function(){function r(){}return r}();Y_.exports=tR});var El=l(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.AvailabilityData=y_();De.Base=ol();De.ContextTagKeys=C_();De.Data=O_();De.DataPoint=R_();De.DataPointType=ul();De.Domain=tr();De.Envelope=P_();De.EventData=fl();De.ExceptionData=D_();De.ExceptionDetails=q_();De.MessageData=j_();De.MetricData=M_();De.PageViewData=G_();De.RemoteDependencyData=H_();De.RequestData=V_();De.SeverityLevel=W_();De.StackFrame=z_()});var K_=l(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});var Br=El(),rR=function(){function r(){}return r.TYPE_HTTP="Http",r.TYPE_AI="Http (tracked component)",r}();sa.RemoteDependencyDataConstants=rR;function nR(r){return"properties"in r||r instanceof Br.EventData||r instanceof Br.ExceptionData||r instanceof Br.MessageData||r instanceof Br.MetricData||r instanceof Br.PageViewData||r instanceof Br.RemoteDependencyData||r instanceof Br.RequestData}sa.domainSupportsProperties=nR});var Z_=l(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});function sR(r){switch(r){case ht.Event:return"EventData";case ht.Exception:return"ExceptionData";case ht.Trace:return"MessageData";case ht.Metric:return"MetricData";case ht.Request:return"RequestData";case ht.Dependency:return"RemoteDependencyData"}}Hn.telemetryTypeToBaseType=sR;function iR(r){switch(r){case"EventData":return ht.Event;case"ExceptionData":return ht.Exception;case"MessageData":return ht.Trace;case"MetricData":return ht.Metric;case"RequestData":return ht.Request;case"RemoteDependencyData":return ht.Dependency}}Hn.baseTypeToTelemetryType=iR;var ht;(function(r){r[r.Event=0]="Event",r[r.Exception=1]="Exception",r[r.Trace=2]="Trace",r[r.Metric=3]="Metric",r[r.Request=4]="Request",r[r.Dependency=5]="Dependency"})(ht=Hn.TelemetryType||(Hn.TelemetryType={}))});var J_=l(ia=>{"use strict";function oR(r){for(var e in r)ia.hasOwnProperty(e)||(ia[e]=r[e])}Object.defineProperty(ia,"__esModule",{value:!0});oR(Z_())});var Dt=l(oa=>{"use strict";function yl(r){for(var e in r)oa.hasOwnProperty(e)||(oa[e]=r[e])}Object.defineProperty(oa,"__esModule",{value:!0});yl(K_());yl(El());yl(J_())});var rm=l(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});var Q_=Dt(),em=ke(),Bn=[],tm=function(r){Bn.forEach(function(e){var t=r.data.message;t.lastIndexOf(`
`)==t.length-1&&(t=t.substring(0,t.length-1)),e.trackTrace({message:t,severity:r.data.stderr?Q_.SeverityLevel.Warning:Q_.SeverityLevel.Information})})};function aR(r,e){r?(Bn.length===0&&em.channel.subscribe("console",tm),Bn.push(e)):(Bn=Bn.filter(function(t){return t!=e}),Bn.length===0&&em.channel.unsubscribe("console",tm))}bl.enable=aR});var im=l(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var Vn=Dt(),nm=ke(),Xn=[],cR={10:Vn.SeverityLevel.Verbose,20:Vn.SeverityLevel.Verbose,30:Vn.SeverityLevel.Information,40:Vn.SeverityLevel.Warning,50:Vn.SeverityLevel.Error,60:Vn.SeverityLevel.Critical},sm=function(r){Xn.forEach(function(e){var t=cR[r.data.level];e.trackTrace({message:r.data.result,severity:t})})};function uR(r,e){r?(Xn.length===0&&nm.channel.subscribe("bunyan",sm),Xn.push(e)):(Xn=Xn.filter(function(t){return t!=e}),Xn.length===0&&nm.channel.unsubscribe("bunyan",sm))}Sl.enable=uR});var cm=l(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});var Ue=Dt(),om=ke(),Wn=[],lR={syslog:function(r){var e={emerg:Ue.SeverityLevel.Critical,alert:Ue.SeverityLevel.Critical,crit:Ue.SeverityLevel.Critical,error:Ue.SeverityLevel.Error,warning:Ue.SeverityLevel.Warning,notice:Ue.SeverityLevel.Information,info:Ue.SeverityLevel.Information,debug:Ue.SeverityLevel.Verbose};return e[r]===void 0?Ue.SeverityLevel.Information:e[r]},npm:function(r){var e={error:Ue.SeverityLevel.Error,warn:Ue.SeverityLevel.Warning,info:Ue.SeverityLevel.Information,verbose:Ue.SeverityLevel.Verbose,debug:Ue.SeverityLevel.Verbose,silly:Ue.SeverityLevel.Verbose};return e[r]===void 0?Ue.SeverityLevel.Information:e[r]},unknown:function(r){return Ue.SeverityLevel.Information}},am=function(r){Wn.forEach(function(e){var t=lR[r.data.levelKind](r.data.level);e.trackTrace({message:r.data.message,severity:t,properties:r.data.meta})})};function fR(r,e){r?(Wn.length===0&&om.channel.subscribe("winston",am),Wn.push(e)):(Wn=Wn.filter(function(t){return t!=e}),Wn.length===0&&om.channel.unsubscribe("winston",am))}Cl.enable=fR});var lm=l((YL,um)=>{"use strict";var hR=na(),dR=function(){function r(e){if(r.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,r.INSTANCE=this}return r.prototype.enable=function(e,t){hR.IsInitialized&&(rm().enable(e&&t,this._client),im().enable(e,this._client),cm().enable(e,this._client))},r.prototype.isInitialized=function(){return this._isInitialized},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1,!1)},r._methodNames=["debug","info","log","warn","error"],r}();um.exports=dR});var hm=l((zL,fm)=>{"use strict";var pR=function(){function r(e){if(r.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");r.INSTANCE=this,this._client=e}return Object.defineProperty(r,"UNCAUGHT_EXCEPTION_HANDLER_NAME",{get:function(){return"uncaughtException"},enumerable:!0,configurable:!0}),Object.defineProperty(r,"UNHANDLED_REJECTION_HANDLER_NAME",{get:function(){return"unhandledRejection"},enumerable:!0,configurable:!0}),r.prototype.isInitialized=function(){return this._isInitialized},r.prototype.enable=function(e){var t=this;if(e){this._isInitialized=!0;var n=this;if(!this._exceptionListenerHandle){var s=function(i,o){if(t._client.trackException({exception:o}),t._client.flush({isAppCrashing:!0}),i)throw o};this._exceptionListenerHandle=s.bind(this,!0),this._rejectionListenerHandle=s.bind(this,!1),process.on(r.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(r.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)}}else this._exceptionListenerHandle&&(process.removeListener(r.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(r.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r.INSTANCE=null,r}();fm.exports=pR});var Ol=l((KL,dm)=>{"use strict";var Tl=require("os"),gR=ft(),vR=function(){function r(e){if(r.INSTANCE)throw new Error("Performance tracking should be configured from the applicationInsights object");r.INSTANCE=this,this._isInitialized=!1,this._client=e}return r.prototype.enable=function(e){var t=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=Tl.cpus(),this._lastRequests={totalRequestCount:r._totalRequestCount,totalFailedRequestCount:r._totalFailedRequestCount,time:+new Date},this._handle=setInterval(function(){return t.trackPerformance()},6e4),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},r.countRequest=function(e,t){var n=this;if(!!r.isEnabled()){var s=+new Date;if(!e||!t){gR.warn("AutoCollectPerformance.countRequest was called with invalid parameters: ",!!e,!!t);return}typeof t.once=="function"&&t.once("finish",function(){var i=+new Date;n._lastRequestExecutionTime=i-s,r._totalRequestCount++,t.statusCode>=400&&r._totalFailedRequestCount++})}},r.prototype.isInitialized=function(){return this._isInitialized},r.isEnabled=function(){return r.INSTANCE&&r.INSTANCE._isEnabled},r.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork()},r.prototype._trackCpu=function(){var e=Tl.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,s=0,i=0,o=0,a=0;!!e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],f="% cpu("+a+") ",d=c.model,_=c.speed,m=c.times,y=u.times,P=m.user-y.user||0;t+=P;var M=m.sys-y.sys||0;n+=M;var W=m.nice-y.nice||0;s+=W;var L=m.idle-y.idle||0;i+=L;var O=m.irq-y.irq||0;o+=O}var C=t+n+s+i+o||1;this._client.trackMetric({name:"\\Processor(_Total)\\% Processor Time",value:(C-i)/C*100}),this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\% Processor Time",value:t/C*100})}this._lastCpus=e},r.prototype._trackMemory=function(){var e=Tl.freemem(),t=process.memoryUsage().rss;this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\Private Bytes",value:t}),this._client.trackMetric({name:"\\Memory\\Available Bytes",value:e})},r.prototype._trackNetwork=function(){var e=this._lastRequests,t={totalRequestCount:r._totalRequestCount,totalFailedRequestCount:r._totalFailedRequestCount,time:+new Date},n=t.totalRequestCount-e.totalRequestCount||0,s=t.totalFailedRequestCount-e.totalFailedRequestCount||0,i=t.time-e.time,o=i/1e3;if(i>0){var a=n/o,c=s/o;this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",value:a}),this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time",value:r._lastRequestExecutionTime})}this._lastRequests=t},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r._totalRequestCount=0,r._totalFailedRequestCount=0,r._lastRequestExecutionTime=0,r}();dm.exports=vR});var Yn=l((ZL,pm)=>{"use strict";pm.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context"}});var rr=l((Rl,vm)=>{"use strict";var wl=Rl&&Rl.__assign||Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},_R=require("http"),gm=require("https"),Il=require("url"),aa=require("constants"),ca=ft(),mR=Yn(),ER=function(){function r(){}return r.getCookie=function(e,t){var n="";if(e&&e.length&&typeof t=="string")for(var s=e+"=",i=t.split(";"),o=0;o<i.length;o++){var t=i[o];if(t=r.trim(t),t&&t.indexOf(s)===0){n=t.substring(s.length,i[o].length);break}}return n},r.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},r.int32ArrayToBase64=function(e){var t=function(o,a){return String.fromCharCode(o>>a&255)},n=function(o){return t(o,24)+t(o,16)+t(o,8)+t(o,0)},s=e.map(n).join(""),i=new Buffer(s,"binary").toString("base64");return i.substr(0,i.indexOf("="))},r.random32=function(){return 4294967296*Math.random()|0},r.randomu32=function(){return r.random32()+2147483648},r.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t="",n,s=0;s<4;s++)n=r.random32(),t+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var i=e[8+Math.random()*4|0];return t.substr(0,8)+t.substr(9,4)+"4"+t.substr(13,3)+i+t.substr(16,3)+t.substr(19,12)},r.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},r.isError=function(e){return e instanceof Error},r.isPrimitive=function(e){var t=typeof e;return t==="string"||t==="number"||t==="boolean"},r.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},r.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,s=""+Math.floor(e/(1e3*60*60))%24,i=Math.floor(e/(1e3*60*60*24));t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,s=s.length<2?"0"+s:s;var o=i>0?i+".":"";return o+s+":"+n+":"+t},r.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},r.extractObject=function(e){return e instanceof Error?r.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},r.validateStringMap=function(e){if(typeof e!="object"){ca.info("Invalid properties dropped from payload");return}var t={};for(var n in e){var s="",i=e[n],o=typeof i;if(r.isPrimitive(i))s=i.toString();else if(i===null||o==="undefined")s="";else if(o==="function"){ca.info("key: "+n+" was function; will not serialize");continue}else{var a=r.isArray(i)?i:r.extractObject(i);try{r.isPrimitive(a)?s=a:s=JSON.stringify(a)}catch(c){s=i.constructor.name.toString()+" (Error: "+c.message+")",ca.info("key: "+n+", could not be serialized")}}t[n]=s.substring(0,r.MAX_PROPERTY_LENGTH)}return t},r.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!t)return!0;for(var s=0;s<n.length;s++){var i=new RegExp(n[s].replace(/\./g,".").replace(/\*/g,".*"));if(i.test(Il.parse(t).hostname))return!1}return!0},r.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[mR.requestContextHeader];if(n)for(var s=n.split(","),i=0;i<s.length;++i){var o=s[i].split("=");if(o.length==2&&o[0]==t)return o[1]}},r.makeRequest=function(e,t,n,s){t&&t.indexOf("//")===0&&(t="https:"+t);var i=Il.parse(t),o=wl({},n,{host:i.hostname,port:i.port,path:i.pathname}),a=void 0;if(i.protocol==="https:"&&(a=e.proxyHttpsUrl||void 0),i.protocol==="http:"&&(a=e.proxyHttpUrl||void 0),a){a.indexOf("//")===0&&(a="http:"+a);var c=Il.parse(a);c.protocol==="https:"?(ca.info("Proxies that use HTTPS are not supported"),a=void 0):o=wl({},o,{host:c.hostname,port:c.port||"80",path:t,headers:wl({},o.headers,{Host:i.hostname})})}var u=i.protocol==="https:"&&!a;return u&&e.httpsAgent!==void 0?o.agent=e.httpsAgent:!u&&e.httpAgent!==void 0?o.agent=e.httpAgent:u&&(o.agent=r.tlsRestrictedAgent),u?gm.request(o,s):_R.request(o,s)},r.MAX_PROPERTY_LENGTH=8192,r.tlsRestrictedAgent=new gm.Agent({secureOptions:aa.SSL_OP_NO_SSLv2|aa.SSL_OP_NO_SSLv3|aa.SSL_OP_NO_TLSv1|aa.SSL_OP_NO_TLSv1_1}),r}();vm.exports=ER});var xl=l((JL,_m)=>{"use strict";var yR=function(){function r(){}return r.prototype.getUrl=function(){return this.url},r.prototype.RequestParser=function(){this.startTime=+new Date},r.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var s=this.properties||{};if(t){if(typeof t=="string")s.error=t;else if(t instanceof Error)s.error=t.message;else if(typeof t=="object")for(var i in t)s[i]=t[i]&&t[i].toString&&t[i].toString()}this.properties=s},r.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},r}();_m.exports=yR});var la=l((QL,mm)=>{"use strict";var ua=rr(),Pl=ft(),bR=function(){function r(){}return r.queryCorrelationId=function(e,t){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId";if(r.completedLookups.hasOwnProperty(n)){t(r.completedLookups[n]);return}else if(r.pendingLookups[n]){r.pendingLookups[n].push(t);return}r.pendingLookups[n]=[t];var s=function(){if(!!r.pendingLookups[n]){var i={method:"GET",disableAppInsightsAutoCollection:!0};Pl.info(r.TAG,i);var o=ua.makeRequest(e,n,i,function(a){if(a.statusCode===200){var c="";a.setEncoding("utf-8"),a.on("data",function(u){c+=u}),a.on("end",function(){Pl.info(r.TAG,c);var u=r.correlationIdPrefix+c;r.completedLookups[n]=u,r.pendingLookups[n]&&r.pendingLookups[n].forEach(function(f){return f(u)}),delete r.pendingLookups[n]})}else a.statusCode>=400&&a.statusCode<500?(r.completedLookups[n]=void 0,delete r.pendingLookups[n]):setTimeout(s,e.correlationIdRetryIntervalMs)});o&&(o.on("error",function(a){Pl.warn(r.TAG,a)}),o.end())}};setTimeout(s,0)},r.cancelCorrelationIdQuery=function(e,t){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId",s=r.pendingLookups[n];s&&(r.pendingLookups[n]=s.filter(function(i){return i!=t}),r.pendingLookups[n].length==0&&delete r.pendingLookups[n])},r.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var t=(r.currentRootId++).toString(16);return r.appendSuffix(e,t,"_")}else return r.generateRootId()},r.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n=e[0]==="|"?1:0;return e.substring(n,t)},r.generateRootId=function(){return"|"+ua.w3cTraceId()+"."},r.appendSuffix=function(e,t,n){if(e.length+t.length<r.requestIdMaxLength)return e+t+n;var s=r.requestIdMaxLength-9;if(e.length>s)for(;s>1;--s){var i=e[s-1];if(i==="."||i==="_")break}if(s<=1)return r.generateRootId();for(t=ua.randomu32().toString(16);t.length<8;)t="0"+t;return e.substring(0,s)+t+"#"},r.TAG="CorrelationIdManager",r.correlationIdPrefix="cid-v1:",r.pendingLookups={},r.completedLookups={},r.requestIdMaxLength=1024,r.currentRootId=ua.randomu32(),r}();mm.exports=bR});var ym=l((Nl,Em)=>{"use strict";var SR=Nl&&Nl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ti=require("url"),Al=Dt(),CR=rr(),TR=Yn(),OR=xl(),wR=la(),IR=function(r){SR(e,r);function e(t,n){var s=r.call(this)||this;return n&&n.method&&t&&(s.method=n.method,s.url=e._getUrlFromRequestOptions(t,n),s.startTime=+new Date),s}return e.prototype.onError=function(t){this._setStatus(void 0,t)},e.prototype.onResponse=function(t){this._setStatus(t.statusCode,void 0),this.correlationId=CR.getCorrelationContextTarget(t,TR.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(t,n){var s=ti.parse(this.url);s.search=void 0,s.hash=void 0;var i=this.method.toUpperCase()+" "+s.pathname,o=Al.RemoteDependencyDataConstants.TYPE_HTTP,a=s.hostname;this.correlationId?(o=Al.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==wR.correlationIdPrefix&&(a=s.hostname+" | "+this.correlationId)):o=Al.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:n,name:i,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:a};if(t){for(var u in t)c[u]||(c[u]=t[u]);if(t.properties)for(var u in t.properties)c.properties[u]=t.properties[u]}return c},e._getUrlFromRequestOptions=function(t,n){if(typeof t=="string")t=ti.parse(t);else{var s=t;t={},s&&Object.keys(s).forEach(function(a){t[a]=s[a]})}if(t.path){var i=ti.parse(t.path);t.pathname=i.pathname,t.search=i.search}if(t.host&&t.port){var o=ti.parse("http://"+t.host);!o.port&&t.port&&(t.hostname=t.host,delete t.host)}return t.protocol=t.protocol||n.agent&&n.agent.protocol||void 0,t.hostname=t.hostname||"localhost",ti.format(t)},e}(OR);Em.exports=IR});var Sm=l(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});var bm=ke(),zn=[];Kn.subscriber=function(r){zn.forEach(function(e){var t=r.data.startedData&&r.data.startedData.databaseName||"Unknown database";e.trackDependency({target:t,data:r.data.event.commandName,name:r.data.event.commandName,duration:r.data.event.duration,success:r.data.succeeded,resultCode:r.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})};function RR(r,e){r?(zn.length===0&&bm.channel.subscribe("mongodb",Kn.subscriber),zn.push(e)):(zn=zn.filter(function(t){return t!=e}),zn.length===0&&bm.channel.unsubscribe("mongodb",Kn.subscriber))}Kn.enable=RR});var Tm=l(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});var Cm=ke(),Zn=[];Jn.subscriber=function(r){Zn.forEach(function(e){var t=r.data.query||{},n=t.sql||"Unknown query",s=!r.data.err,i=t._connection||{},o=i.config||{},a=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;e.trackDependency({target:a,data:n,name:n,duration:r.data.duration,success:s,resultCode:s?"0":"1",dependencyTypeName:"mysql"})})};function xR(r,e){r?(Zn.length===0&&Cm.channel.subscribe("mysql",Jn.subscriber),Zn.push(e)):(Zn=Zn.filter(function(t){return t!=e}),Zn.length===0&&Cm.channel.unsubscribe("mysql",Jn.subscriber))}Jn.enable=xR});var wm=l(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});var Om=ke(),Qn=[];es.subscriber=function(r){Qn.forEach(function(e){r.data.commandObj.command!=="info"&&e.trackDependency({target:r.data.address,name:r.data.commandObj.command,data:r.data.commandObj.command,duration:r.data.duration,success:!r.data.err,resultCode:r.data.err?"1":"0",dependencyTypeName:"redis"})})};function PR(r,e){r?(Qn.length===0&&Om.channel.subscribe("redis",es.subscriber),Qn.push(e)):(Qn=Qn.filter(function(t){return t!=e}),Qn.length===0&&Om.channel.unsubscribe("redis",es.subscriber))}es.enable=PR});var Rm=l(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});var Im=ke(),ts=[];rs.subscriber=function(r){ts.forEach(function(e){var t=r.data.query,n=t.preparable&&t.preparable.text||t.plan||t.text||"unknown query",s=!r.data.error,i=r.data.database.host+":"+r.data.database.port;e.trackDependency({target:i,data:n,name:n,duration:r.data.duration,success:s,resultCode:s?"0":"1",dependencyTypeName:"postgres"})})};function AR(r,e){r?(ts.length===0&&Im.channel.subscribe("postgres",rs.subscriber),ts.push(e)):(ts=ts.filter(function(t){return t!=e}),ts.length===0&&Im.channel.unsubscribe("postgres",rs.subscriber))}rs.enable=AR});var fa=l((sq,xm)=>{"use strict";var Vr=require("http"),ns=require("https"),NR=ft(),DR=rr(),Gt=Yn(),LR=ym(),qR=$n(),kR=na(),jR=function(){function r(e){if(r.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");r.INSTANCE=this,this._client=e}return r.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),kR.IsInitialized&&(Sm().enable(e,this._client),Tm().enable(e,this._client),wm().enable(e,this._client),Rm().enable(e,this._client))},r.prototype.isInitialized=function(){return this._isInitialized},r.prototype._initialize=function(){var e=this;this._isInitialized=!0;var t=Vr.get,n=Vr.request,s=ns.request,i=function(o,a){var c=!a[r.disableCollectionRequestOption]&&!o[r.alreadyAutoCollectedFlag];o[r.alreadyAutoCollectedFlag]=!0,o&&a&&c&&r.trackRequest(e._client,{options:a,request:o})};Vr.request=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=n.call.apply(n,[Vr,o].concat(a));return i(u,o),u},ns.request=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=s.call.apply(s,[ns,o].concat(a));return i(u,o),u},Vr.get=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(f=Vr.request).call.apply(f,[Vr,o].concat(a));return u.end(),u;var f},ns.get=function(o){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(f=ns.request).call.apply(f,[ns,o].concat(a));return u.end(),u;var f}},r.trackRequest=function(e,t){if(!t.options||!t.request||!e){NR.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!t.options,!t.request,!e);return}var n=new LR(t.options,t.request),s=qR.CorrelationContextManager.getCurrentContext(),i=s&&s.operation&&s.operation.parentId+r.requestNumber+++".";if(DR.canIncludeCorrelationHeader(e,n.getUrl())&&t.request.getHeader&&t.request.setHeader){if(e.config&&e.config.correlationId){var o=t.request.getHeader(Gt.requestContextHeader);if(o){var a=o.split(","),c=Gt.requestContextSourceKey+"=";a.some(function(f){return f.substring(0,c.length)===c})||t.request.setHeader(Gt.requestContextHeader,o+","+Gt.requestContextSourceKey+"="+e.config.correlationId)}else t.request.setHeader(Gt.requestContextHeader,Gt.requestContextSourceKey+"="+e.config.correlationId)}if(s&&s.operation){t.request.setHeader(Gt.requestIdHeader,i),t.request.setHeader(Gt.parentIdHeader,s.operation.id),t.request.setHeader(Gt.rootIdHeader,i);var u=s.customProperties.serializeToHeader();u&&t.request.setHeader(Gt.correlationContextHeader,u)}}t.request.on&&(t.request.on("response",function(f){n.onResponse(f);var d=n.getDependencyTelemetry(t,i);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=t.options,d.contextObjects["http.ClientRequest"]=t.request,d.contextObjects["http.ClientResponse"]=f,e.trackDependency(d)}),t.request.on("error",function(f){n.onError(f);var d=n.getDependencyTelemetry(t,i);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=t.options,d.contextObjects["http.ClientRequest"]=t.request,d.contextObjects.Error=f,e.trackDependency(d)}))},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r.disableCollectionRequestOption="disableAppInsightsAutoCollection",r.requestNumber=1,r.alreadyAutoCollectedFlag="_appInsightsAutoCollected",r}();xm.exports=jR});var Nm=l((Ll,Am)=>{"use strict";var FR=Ll&&Ll.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ha=require("url"),MR=Dt(),Pm=rr(),Xr=Yn(),UR=xl(),Dl=la(),GR=function(r){FR(e,r);function e(t,n){var s=r.call(this)||this;return t&&(s.method=t.method,s.url=s._getAbsoluteUrl(t),s.startTime=+new Date,s.socketRemoteAddress=t.socket&&t.socket.remoteAddress,s.parseHeaders(t,n),t.connection&&(s.connectionRemoteAddress=t.connection.remoteAddress,s.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),s}return e.prototype.onError=function(t,n){this._setStatus(void 0,t),n&&(this.duration=n)},e.prototype.onResponse=function(t,n){this._setStatus(t.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(t){var n={id:this.requestId,name:this.method+" "+ha.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(t){for(var s in t)n[s]||(n[s]=t[s]);if(t.properties)for(var s in t.properties)n.properties[s]=t.properties[s]}return n},e.prototype.getRequestTags=function(t){var n={};for(var s in t)n[s]=t[s];return n[e.keys.locationIp]=t[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=t[e.keys.sessionId]||this._getId("ai_session"),n[e.keys.userId]=t[e.keys.userId]||this._getId("ai_user"),n[e.keys.userAuthUserId]=t[e.keys.userAuthUserId]||this._getId("ai_authUser"),n[e.keys.operationName]=this.getOperationName(t),n[e.keys.operationParentId]=this.getOperationParentId(t),n[e.keys.operationId]=this.getOperationId(t),n},e.prototype.getOperationId=function(t){return t[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(t){return t[e.keys.operationParentId]||this.parentId||this.getOperationId(t)},e.prototype.getOperationName=function(t){return t[e.keys.operationName]||this.method+" "+ha.parse(this.url).pathname},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype._getAbsoluteUrl=function(t){if(!t.headers)return t.url;var n=t.connection?t.connection.encrypted:null,s=ha.parse(t.url),i=s.pathname,o=s.search,a=ha.format({protocol:n?"https":"http",host:t.headers.host,pathname:i,search:o});return a},e.prototype._getIp=function(){var t=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(i){var o=t.exec(i);if(o)return o[0]},s=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!s&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(s="127.0.0.1"),s},e.prototype._getId=function(t){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",s=e.parseId(Pm.getCookie(t,n));return s},e.prototype.parseHeaders=function(t,n){if(this.rawHeaders=t.headers||t.rawHeaders,this.userAgent=t.headers&&t.headers["user-agent"],this.sourceCorrelationId=Pm.getCorrelationContextTarget(t,Xr.requestContextSourceKey),t.headers){if(this.correlationContextHeader=t.headers[Xr.correlationContextHeader],t.headers[Xr.requestIdHeader])this.parentId=t.headers[Xr.requestIdHeader],this.requestId=Dl.generateRequestId(this.parentId),this.correlationContextHeader=t.headers[Xr.correlationContextHeader];else{var s=t.headers[Xr.rootIdHeader];this.parentId=t.headers[Xr.parentIdHeader],this.requestId=Dl.generateRequestId(s||this.parentId),this.correlationContextHeader=null}n&&(this.requestId=n),this.operationId=Dl.getRootId(this.requestId)}},e.parseId=function(t){return t.substr(0,t.indexOf("|"))},e.keys=new MR.ContextTagKeys,e}(UR);Am.exports=GR});var kl=l((iq,jm)=>{"use strict";var Dm=require("http"),Lm=require("https"),qm=ft(),$R=rr(),ss=Yn(),ql=Nm(),is=$n(),km=Ol(),HR=function(){function r(e){if(r.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");r.INSTANCE=this,this._client=e}return r.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||km.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},r.prototype.useAutoCorrelation=function(e){e&&!this._isAutoCorrelating?is.CorrelationContextManager.enable():!e&&this._isAutoCorrelating&&is.CorrelationContextManager.disable(),this._isAutoCorrelating=e},r.prototype.isInitialized=function(){return this._isInitialized},r.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},r.prototype._generateCorrelationContext=function(e){if(!!this._isAutoCorrelating)return is.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader())},r.prototype._initialize=function(){var e=this;this._isInitialized=!0;var t=function(o){if(!!o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(a,c){var u=a&&!a[r.alreadyAutoCollectedFlag];if(a&&u){var f=new ql(a),d=e._generateCorrelationContext(f);is.CorrelationContextManager.runWithContext(d,function(){e._isEnabled&&(a[r.alreadyAutoCollectedFlag]=!0,r.trackRequest(e._client,{request:a,response:c},f)),km.countRequest(a,c),typeof o=="function"&&o(a,c)})}else typeof o=="function"&&o(a,c)}}},n=function(o){var a=o.addListener.bind(o);o.addListener=function(c,u){switch(c){case"request":case"checkContinue":return a(c,t(u));default:return a(c,u)}},o.on=o.addListener},s=Dm.createServer;Dm.createServer=function(o){var a=s(t(o));return n(a),a};var i=Lm.createServer;Lm.createServer=function(o,a){var c=i(o,t(a));return n(c),c}},r.trackRequestSync=function(e,t){if(!t.request||!t.response||!e){qm.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!t.request,!t.response,!e);return}r.addResponseCorrelationIdHeader(e,t.response);var n=is.CorrelationContextManager.getCurrentContext(),s=new ql(t.request,n&&n.operation.parentId);n&&(n.operation.id=s.getOperationId(e.context.tags)||n.operation.id,n.operation.name=s.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=s.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(s.getCorrelationContextHeader())),r.endRequest(e,s,t,t.duration,t.error)},r.trackRequest=function(e,t,n){if(!t.request||!t.response||!e){qm.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!t.request,!t.response,!e);return}var s=is.CorrelationContextManager.getCurrentContext(),i=n||new ql(t.request,s&&s.operation.parentId);$R.canIncludeCorrelationHeader(e,i.getUrl())&&r.addResponseCorrelationIdHeader(e,t.response),s&&!n&&(s.operation.id=i.getOperationId(e.context.tags)||s.operation.id,s.operation.name=i.getOperationName(e.context.tags)||s.operation.name,s.operation.parentId=i.getOperationParentId(e.context.tags)||s.operation.parentId,s.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.response.once&&t.response.once("finish",function(){r.endRequest(e,i,t,null,null)}),t.request.on&&t.request.on("error",function(o){r.endRequest(e,i,t,null,o)})},r.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(ss.requestContextHeader);if(n){var s=n.split(","),i=ss.requestContextSourceKey+"=";s.some(function(o){return o.substring(0,i.length)===i})||t.setHeader(ss.requestContextHeader,n+","+ss.requestContextSourceKey+"="+e.config.correlationId)}else t.setHeader(ss.requestContextHeader,ss.requestContextSourceKey+"="+e.config.correlationId)}},r.endRequest=function(e,t,n,s,i){i?t.onError(i,s):t.onResponse(n.response,s);var o=t.getRequestTelemetry(n);if(o.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)o.tagOverrides[a]=n.tagOverrides[a];o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r.alreadyAutoCollectedFlag="_appInsightsAutoCollected",r}();jm.exports=HR});var Mm=l((oq,Fm)=>{"use strict";var jl=la(),BR=function(){function r(e){var t=this;this.endpointBase="https://dc.services.visualstudio.com",this.instrumentationKey=e||r._getInstrumentationKey(),this.endpointUrl=this.endpointBase+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net"],this.setCorrelationId=function(n){return t.correlationId=n},this.profileQueryEndpoint=process.env[r.ENV_profileQueryEndpoint]||this.endpointBase,this.proxyHttpUrl=process.env[r.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[r.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0}return Object.defineProperty(r.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){jl.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=jl.correlationIdPrefix,jl.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),r._getInstrumentationKey=function(){var e=process.env[r.ENV_iKey]||process.env[r.ENV_azurePrefix+r.ENV_iKey]||process.env[r.legacy_ENV_iKey]||process.env[r.ENV_azurePrefix+r.legacy_ENV_iKey];if(!e||e=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return e},r.ENV_azurePrefix="APPSETTING_",r.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",r.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",r.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",r.ENV_http_proxy="http_proxy",r.ENV_https_proxy="https_proxy",r}();Fm.exports=BR});var Bm=l((aq,Hm)=>{"use strict";var nr=require("os"),Um=require("fs"),Gm=require("path"),VR=Dt(),$m=ft(),XR=function(){function r(e){this.keys=new VR.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return r.prototype._loadApplicationContext=function(e){if(e=e||Gm.resolve(__dirname,"../../../../package.json"),!r.appVersion[e]){r.appVersion[e]="unknown";try{var t=JSON.parse(Um.readFileSync(e,"utf8"));t&&typeof t.version=="string"&&(r.appVersion[e]=t.version)}catch(n){$m.info("unable to read app version: ",n)}}this.tags[this.keys.applicationVersion]=r.appVersion[e]},r.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=nr&&nr.hostname(),this.tags[this.keys.deviceOSVersion]=nr&&nr.type()+" "+nr.release(),this.tags[this.keys.cloudRole]=r.DefaultRoleName,this.tags["ai.device.osArchitecture"]=nr&&nr.arch(),this.tags["ai.device.osPlatform"]=nr&&nr.platform()},r.prototype._loadInternalContext=function(){var e=Gm.resolve(__dirname,"../../package.json");if(!r.sdkVersion){r.sdkVersion="unknown";try{var t=JSON.parse(Um.readFileSync(e,"utf8"));t&&typeof t.version=="string"&&(r.sdkVersion=t.version)}catch(n){$m.info("unable to read app version: ",n)}}this.tags[this.keys.internalSdkVersion]="node:"+r.sdkVersion},r.DefaultRoleName="Web",r.appVersion={},r.sdkVersion=null,r}();Hm.exports=XR});var Wm=l((cq,Xm)=>{"use strict";var Vm=ft(),WR=function(){function r(e,t,n,s){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=s}return r.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},r.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e){Vm.warn("Cannot send null/undefined telemetry");return}var n=this._stringify(e);if(typeof n=="string"){if(this._buffer.push(n),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){t._timeoutHandle=null,t.triggerSend(!1)},this._getBatchIntervalMs()))}}},r.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;if(!n){var s=this._buffer.join(`
`);e?(this._sender.saveOnCrash(s),typeof t=="function"&&t("data saved on crash")):this._sender.send(new Buffer(s),t)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof t=="function"&&t("no data to send")},r.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){Vm.warn("Failed to serialize payload",t,e)}},r}();Xm.exports=WR});var Km=l(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});var Ym=Dt();function YR(r,e){var t=r.sampleRate,n=!1;return t==null||t>=100||r.data&&Ym.TelemetryType.Metric===Ym.baseTypeToTelemetryType(r.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=zm(e.correlationContext.operation.id)<t:n=Math.random()*100<t,n)}da.samplingTelemetryProcessor=YR;function zm(r){var e=-2147483648,t=2147483647,n=5381;if(!r)return 0;for(;r.length<8;)r=r+r;for(var s=0;s<r.length;s++)n=((n<<5)+n|0)+r.charCodeAt(s)|0;return n=n<=e?t:Math.abs(n),n/t*100}da.getSamplingHashCode=zm});var Zm=l(pa=>{"use strict";function zR(r){for(var e in r)pa.hasOwnProperty(e)||(pa[e]=r[e])}Object.defineProperty(pa,"__esModule",{value:!0});zR(Km())});var Qm=l((fq,Jm)=>{"use strict";var Ze=require("fs"),ga=require("os"),sr=require("path"),KR=require("zlib"),os=require("child_process"),Ve=ft(),ZR=fa(),JR=rr(),QR=function(){function r(e,t,n){if(this._config=e,this._onSuccess=t,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=r.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=r.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!r.OS_PROVIDES_FILE_PROTECTION)if(r.USE_ICACLS){try{r.OS_PROVIDES_FILE_PROTECTION=Ze.existsSync(r.ICACLS_PATH)}catch{}r.OS_PROVIDES_FILE_PROTECTION||Ve.warn(r.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else r.OS_PROVIDES_FILE_PROTECTION=!0}return r.prototype.setDiskRetryMode=function(e,t,n){this._enableDiskRetryMode=r.OS_PROVIDES_FILE_PROTECTION&&e,typeof t=="number"&&t>=0&&(this._resendInterval=Math.floor(t)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!r.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,Ve.warn(r.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},r.prototype.send=function(e,t){var n=this,s=this._config.endpointUrl,i={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};KR.gzip(e,function(o,a){var c=a;o?(Ve.warn(o),c=e,i.headers["Content-Length"]=e.length.toString()):(i.headers["Content-Encoding"]="gzip",i.headers["Content-Length"]=a.length),Ve.info(r.TAG,i),i[ZR.disableCollectionRequestOption]=!0;var u=function(d){d.setEncoding("utf-8");var _="";d.on("data",function(m){_+=m}),d.on("end",function(){n._numConsecutiveFailures=0,Ve.info(r.TAG,_),typeof n._onSuccess=="function"&&n._onSuccess(_),typeof t=="function"&&t(_),n._enableDiskRetryMode&&(d.statusCode===200?setTimeout(function(){return n._sendFirstFileOnDisk()},n._resendInterval):(d.statusCode===408||d.statusCode===429||d.statusCode===439||d.statusCode===500||d.statusCode===503)&&n._storeToDisk(e))})},f=JR.makeRequest(n._config,s,i,u);f.on("error",function(d){if(n._numConsecutiveFailures++,!n._enableDiskRetryMode||n._numConsecutiveFailures>0&&n._numConsecutiveFailures%r.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var _="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";n._enableDiskRetryMode&&(_="Ingestion endpoint could not be reached "+n._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),Ve.warn(r.TAG,_,d)}else{var _="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";Ve.info(r.TAG,_,d)}if(n._onErrorHelper(d),typeof t=="function"){var m="error sending telemetry";d&&typeof d.toString=="function"&&(m=d.toString()),t(m)}n._enableDiskRetryMode&&n._storeToDisk(e)}),f.write(c),f.end()})},r.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},r.prototype._runICACLS=function(e,t){var n=os.spawn(r.ICACLS_PATH,e,{windowsHide:!0});n.on("error",function(s){return t(s)}),n.on("close",function(s,i){return t(s===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+s+")"))})},r.prototype._runICACLSSync=function(e){if(os.spawnSync){var t=os.spawnSync(r.ICACLS_PATH,e,{windowsHide:!0});if(t.error)throw t.error;if(t.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+t.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},r.prototype._getACLIdentity=function(e){if(r.ACL_IDENTITY)return e(null,r.ACL_IDENTITY);var t=os.spawn(r.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";t.stdout.on("data",function(s){return n+=s}),t.on("error",function(s){return e(s,null)}),t.on("close",function(s,i){return r.ACL_IDENTITY=n&&n.trim(),e(s===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+s+")"),r.ACL_IDENTITY)})},r.prototype._getACLIdentitySync=function(){if(r.ACL_IDENTITY)return r.ACL_IDENTITY;if(os.spawnSync){var e=os.spawnSync(r.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return r.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),r.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},r.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},r.prototype._applyACLRules=function(e,t){var n=this;if(!r.USE_ICACLS)return t(null);if(r.ACLED_DIRECTORIES[e]===void 0)r.ACLED_DIRECTORIES[e]=!1,this._getACLIdentity(function(s,i){if(s)return r.ACLED_DIRECTORIES[e]=!1,t(s);n._runICACLS(n._getACLArguments(e,i),function(o){return r.ACLED_DIRECTORIES[e]=!o,t(o)})});else return t(r.ACLED_DIRECTORIES[e]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},r.prototype._applyACLRulesSync=function(e){if(r.USE_ICACLS){if(r.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),r.ACLED_DIRECTORIES[e]=!0;return}else if(!r.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},r.prototype._confirmDirExists=function(e,t){var n=this;Ze.lstat(e,function(s,i){s&&s.code==="ENOENT"?Ze.mkdir(e,function(o){o&&o.code!=="EEXIST"?t(o):n._applyACLRules(e,t)}):!s&&i.isDirectory()?n._applyACLRules(e,t):t(s||new Error("Path existed but was not a directory"))})},r.prototype._getShallowDirectorySize=function(e,t){Ze.readdir(e,function(n,s){if(n)return t(n,-1);var i=null,o=0,a=0;if(s.length===0){t(null,0);return}for(var c=0;c<s.length;c++)Ze.stat(sr.join(e,s[c]),function(u,f){a++,u?i=u:f.isFile()&&(o+=f.size),a===s.length&&(i?t(i,-1):t(i,o))})})},r.prototype._getShallowDirectorySizeSync=function(e){for(var t=Ze.readdirSync(e),n=0,s=0;s<t.length;s++)n+=Ze.statSync(sr.join(e,t[s])).size;return n},r.prototype._storeToDisk=function(e){var t=this,n=sr.join(ga.tmpdir(),r.TEMPDIR_PREFIX+this._config.instrumentationKey);Ve.info(r.TAG,"Checking existance of data storage directory: "+n),this._confirmDirExists(n,function(s){if(s){Ve.warn(r.TAG,"Error while checking/creating directory: "+(s&&s.message)),t._onErrorHelper(s);return}t._getShallowDirectorySize(n,function(i,o){if(i||o<0){Ve.warn(r.TAG,"Error while checking directory size: "+(i&&i.message)),t._onErrorHelper(i);return}else if(o>t._maxBytesOnDisk){Ve.warn(r.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+o);return}var a=new Date().getTime()+".ai.json",c=sr.join(n,a);Ve.info(r.TAG,"saving data to disk at: "+c),Ze.writeFile(c,e,{mode:384},function(u){return t._onErrorHelper(u)})})})},r.prototype._storeToDiskSync=function(e){var t=sr.join(ga.tmpdir(),r.TEMPDIR_PREFIX+this._config.instrumentationKey);try{Ve.info(r.TAG,"Checking existance of data storage directory: "+t),Ze.existsSync(t)||Ze.mkdirSync(t),this._applyACLRulesSync(t);var n=this._getShallowDirectorySizeSync(t);if(n>this._maxBytesOnDisk){Ve.info(r.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+n);return}var s=new Date().getTime()+".ai.json",i=sr.join(t,s);Ve.info(r.TAG,"saving data before crash to disk at: "+i),Ze.writeFileSync(i,e,{mode:384})}catch(o){Ve.warn(r.TAG,"Error while saving data to disk: "+(o&&o.message)),this._onErrorHelper(o)}},r.prototype._sendFirstFileOnDisk=function(){var e=this,t=sr.join(ga.tmpdir(),r.TEMPDIR_PREFIX+this._config.instrumentationKey);Ze.exists(t,function(n){n&&Ze.readdir(t,function(s,i){if(s)e._onErrorHelper(s);else if(i=i.filter(function(c){return sr.basename(c).indexOf(".ai.json")>-1}),i.length>0){var o=i[0],a=sr.join(t,o);Ze.readFile(a,function(c,u){c?e._onErrorHelper(c):Ze.unlink(a,function(f){f?e._onErrorHelper(f):e.send(u)})})}})})},r.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},r.TAG="Sender",r.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",r.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",r.ACLED_DIRECTORIES={},r.ACL_IDENTITY=null,r.WAIT_BETWEEN_RESEND=60*1e3,r.MAX_BYTES_ON_DISK=50*1e3*1e3,r.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,r.TEMPDIR_PREFIX="appInsights-node",r.OS_PROVIDES_FILE_PROTECTION=!1,r.USE_ICACLS=ga.type()==="Windows_NT",r}();Jm.exports=QR});var rE=l((hq,tE)=>{"use strict";var ne=Dt(),ir=rr(),ex=$n(),tx=function(){function r(){}return r.createEnvelope=function(e,t,n,s,i){var o=null;switch(t){case ne.TelemetryType.Trace:o=r.createTraceData(e);break;case ne.TelemetryType.Dependency:o=r.createDependencyData(e);break;case ne.TelemetryType.Event:o=r.createEventData(e);break;case ne.TelemetryType.Exception:o=r.createExceptionData(e);break;case ne.TelemetryType.Request:o=r.createRequestData(e);break;case ne.TelemetryType.Metric:o=r.createMetricData(e);break}if(n&&ne.domainSupportsProperties(o.baseData)){if(o&&o.baseData)if(!o.baseData.properties)o.baseData.properties=n;else for(var a in n)o.baseData.properties[a]||(o.baseData.properties[a]=n[a]);o.baseData.properties=ir.validateStringMap(o.baseData.properties)}var c=i&&i.instrumentationKey||"",u=new ne.Envelope;return u.data=o,u.iKey=c,u.name="Microsoft.ApplicationInsights."+c.replace(/-/g,"")+"."+o.baseType.substr(0,o.baseType.length-4),u.tags=this.getTags(s,e.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=i?i.samplingPercentage:100,t===ne.TelemetryType.Metric&&(u.sampleRate=100),u},r.createTraceData=function(e){var t=new ne.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=ne.SeverityLevel.Information:t.severityLevel=e.severity;var n=new ne.Data;return n.baseType=ne.telemetryTypeToBaseType(ne.TelemetryType.Trace),n.baseData=t,n},r.createDependencyData=function(e){var t=new ne.RemoteDependencyData;t.name=e.name,t.data=e.data,t.target=e.target,t.duration=ir.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=ir.w3cTraceId();var n=new ne.Data;return n.baseType=ne.telemetryTypeToBaseType(ne.TelemetryType.Dependency),n.baseData=t,n},r.createEventData=function(e){var t=new ne.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new ne.Data;return n.baseType=ne.telemetryTypeToBaseType(ne.TelemetryType.Event),n.baseData=t,n},r.createExceptionData=function(e){var t=new ne.ExceptionData;t.properties=e.properties,t.severityLevel=ne.SeverityLevel.Error,t.measurements=e.measurements,t.exceptions=[];var n=e.exception.stack,s=new ne.ExceptionDetails;s.message=e.exception.message,s.typeName=e.exception.name,s.parsedStack=this.parseStack(n),s.hasFullStack=ir.isArray(s.parsedStack)&&s.parsedStack.length>0,t.exceptions.push(s);var i=new ne.Data;return i.baseType=ne.telemetryTypeToBaseType(ne.TelemetryType.Exception),i.baseData=t,i},r.createRequestData=function(e){var t=new ne.RequestData;e.id?t.id=e.id:t.id=ir.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=ir.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var n=new ne.Data;return n.baseType=ne.telemetryTypeToBaseType(ne.TelemetryType.Request),n.baseData=t,n},r.createMetricData=function(e){var t=new ne.MetricData;t.metrics=[];var n=new ne.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=ne.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var s=new ne.Data;return s.baseType=ne.telemetryTypeToBaseType(ne.TelemetryType.Metric),s.baseData=t,s},r.getTags=function(e,t){var n=ex.CorrelationContextManager.getCurrentContext(),s={};if(e&&e.tags)for(var i in e.tags)s[i]=e.tags[i];if(t)for(var i in t)s[i]=t[i];return n&&(s[e.keys.operationId]=s[e.keys.operationId]||n.operation.id,s[e.keys.operationName]=s[e.keys.operationName]||n.operation.name,s[e.keys.operationParentId]=s[e.keys.operationParentId]||n.operation.parentId),s},r.parseStack=function(e){var t=void 0;if(typeof e=="string"){var n=e.split(`
`);t=[];for(var s=0,i=0,o=0;o<=n.length;o++){var a=n[o];if(eE.regex.test(a)){var c=new eE(n[o],s++);i+=c.sizeInBytes,t.push(c)}}var u=32*1024;if(i>u)for(var f=0,d=t.length-1,_=0,m=f,y=d;f<d;){var P=t[f].sizeInBytes,M=t[d].sizeInBytes;if(_+=P+M,_>u){var W=y-m+1;t.splice(m,W);break}m=f,y=d,f++,d--}}return t},r}(),eE=function(){function r(e,t){this.sizeInBytes=0,this.level=t,this.method="<no_method>",this.assembly=ir.trim(e);var n=e.match(r.regex);n&&n.length>=5&&(this.method=ir.trim(n[2])||this.method,this.fileName=ir.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=r.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return r.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,r.baseSize=58,r}();tE.exports=tx});var oE=l((dq,iE)=>{"use strict";var rx=require("url"),nx=Mm(),sx=Bm(),Wr=Dt(),ix=Wm(),ox=Zm(),nE=$n(),ax=Qm(),cx=rr(),sE=ft(),ux=rE(),lx=function(){function r(e){this._telemetryProcessors=[];var t=new nx(e);this.config=t,this.context=new sx,this.commonProperties={};var n=new ax(this.config);this.channel=new ix(function(){return t.disableAppInsights},function(){return t.maxBatchSize},function(){return t.maxBatchIntervalMs},n)}return r.prototype.trackTrace=function(e){this.track(e,Wr.TelemetryType.Trace)},r.prototype.trackMetric=function(e){this.track(e,Wr.TelemetryType.Metric)},r.prototype.trackException=function(e){e&&e.exception&&!cx.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,Wr.TelemetryType.Exception)},r.prototype.trackEvent=function(e){this.track(e,Wr.TelemetryType.Event)},r.prototype.trackRequest=function(e){this.track(e,Wr.TelemetryType.Request)},r.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=rx.parse(e.data).host),this.track(e,Wr.TelemetryType.Dependency)},r.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},r.prototype.track=function(e,t){if(e&&Wr.telemetryTypeToBaseType(t)){var n=ux.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var s=this.runTelemetryProcessors(n,e.contextObjects);s=s&&ox.samplingTelemetryProcessor(n,{correlationContext:nE.CorrelationContextManager.getCurrentContext()}),s&&this.channel.send(n)}else sE.warn("track() requires telemetry object and telemetryType to be specified.")},r.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},r.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},r.prototype.runTelemetryProcessors=function(e,t){var n=!0,s=this._telemetryProcessors.length;if(s===0)return n;t=t||{},t.correlationContext=nE.CorrelationContextManager.getCurrentContext();for(var i=0;i<s;++i)try{var o=this._telemetryProcessors[i];if(o&&o.apply(null,[e,t])===!1){n=!1;break}}catch(a){n=!0,sE.warn("One of telemetry processors failed, telemetry item will be sent.",a,e)}return n},r}();iE.exports=lx});var uE=l((Fl,cE)=>{"use strict";var fx=Fl&&Fl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hx=oE(),aE=kl(),dx=fa(),va=ft(),px=function(r){fx(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(t){t&&t.request&&t.response&&t.duration?aE.trackRequestSync(this,t):va.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(t){(t.duration||t.error)&&va.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),t&&t.request&&t.response?aE.trackRequest(this,t):va.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(t){t&&t.request?dx.trackRequest(this,t):va.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(hx);cE.exports=px});var bE=l(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});var lE=$n(),gx=lm(),vx=hm(),_x=Ol(),mx=fa(),Ex=kl(),_a=ft();Ee.TelemetryClient=uE();Ee.Contracts=Dt();var fE=!0,hE=!1,dE=!0,pE=!0,gE=!0,vE=!0,_E=!0,Ml=!0,mE=void 0,EE=void 0,ri,ni,si,Yr,ii,_r=!1;function yx(r){return Ee.defaultClient?_a.info("The default client is already setup"):(Ee.defaultClient=new Ee.TelemetryClient(r),ri=new gx(Ee.defaultClient),ni=new vx(Ee.defaultClient),si=new _x(Ee.defaultClient),Yr=new Ex(Ee.defaultClient),ii=new mx(Ee.defaultClient)),Ee.defaultClient&&Ee.defaultClient.channel&&Ee.defaultClient.channel.setUseDiskRetryCaching(_E,mE,EE),Ul}Ee.setup=yx;function yE(){return Ee.defaultClient?(_r=!0,ri.enable(fE,hE),ni.enable(dE),si.enable(pE),Yr.useAutoCorrelation(Ml),Yr.enable(gE),ii.enable(vE)):_a.warn("Start cannot be called before setup"),Ul}Ee.start=yE;function bx(){return Ml?lE.CorrelationContextManager.getCurrentContext():null}Ee.getCorrelationContext=bx;function Sx(r){return lE.CorrelationContextManager.wrapCallback(r)}Ee.wrapWithCorrelationContext=Sx;var Ul=function(){function r(){}return r.setAutoCollectConsole=function(e,t){return t===void 0&&(t=!1),fE=e,hE=t,_r&&ri.enable(e,t),r},r.setAutoCollectExceptions=function(e){return dE=e,_r&&ni.enable(e),r},r.setAutoCollectPerformance=function(e){return pE=e,_r&&si.enable(e),r},r.setAutoCollectRequests=function(e){return gE=e,_r&&Yr.enable(e),r},r.setAutoCollectDependencies=function(e){return vE=e,_r&&ii.enable(e),r},r.setAutoDependencyCorrelation=function(e){return Ml=e,_r&&Yr.useAutoCorrelation(e),r},r.setUseDiskRetryCaching=function(e,t,n){return _E=e,mE=t,EE=n,Ee.defaultClient&&Ee.defaultClient.channel&&Ee.defaultClient.channel.setUseDiskRetryCaching(e,t,n),r},r.setInternalLogging=function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!0),_a.enableDebug=e,_a.disableWarnings=!t,r},r.start=yE,r}();Ee.Configuration=Ul;function Cx(){Ee.defaultClient=null,_r=!1,ri&&ri.dispose(),ni&&ni.dispose(),si&&si.dispose(),Yr&&Yr.dispose(),ii&&ii.dispose()}Ee.dispose=Cx});var ai=l(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.WorkspaceContextUtil=zr.WORKSPACE_CONTEXT_ORG_ID_ERROR=void 0;var Gl=require("@salesforce/core"),SE=require("vscode"),CE=jr(),TE=$o(),Tx=gr(),Ox=zt();zr.WORKSPACE_CONTEXT_ORG_ID_ERROR="workspace_context_org_id_error";var oi=class{constructor(){this.sessionConnections=new Map,this.onOrgChangeEmitter=new SE.EventEmitter,this.onOrgChange=this.onOrgChangeEmitter.event;let e=()=>this.handleCliConfigChange(),t=Tx.projectPaths.salesforceProjectConfig();this.cliConfigWatcher=SE.workspace.createFileSystemWatcher(t),this.cliConfigWatcher.onDidChange(e),this.cliConfigWatcher.onDidCreate(e),this.cliConfigWatcher.onDidDelete(e)}async initialize(e){e.subscriptions.push(this.cliConfigWatcher,this.onOrgChangeEmitter,this.cliConfigWatcher),await this.handleCliConfigChange()}static getInstance(e=!1){return(!this.instance||e)&&(this.instance=new oi),this.instance}async getConnection(){if(!this._username)throw new Error(Ox.nls.localize("error_no_target_org"));let e=this.sessionConnections.get(this._username);return e||(e=await Gl.Connection.create({authInfo:await Gl.AuthInfo.create({username:this._username})}),this.sessionConnections.set(this._username,e)),e}async handleCliConfigChange(){await CE.ConfigAggregatorProvider.getInstance().reloadConfigAggregators(),Gl.StateAggregator.clearInstance();let e=await TE.ConfigUtil.getTargetOrgOrAlias();if(e){this._username=await TE.ConfigUtil.getUsernameFor(e),this._alias=e!==this._username?e:void 0;try{let t=await this.getConnection();this._orgId=t?.getAuthInfoFields().orgId}catch(t){this._orgId="",t instanceof Error&&(console.log("There was an problem getting the orgId of the default org: ",t),CE.TelemetryService.getInstance().sendException(zr.WORKSPACE_CONTEXT_ORG_ID_ERROR,`name: ${t.name}, message: ${t.message}`))}}else this._username=void 0,this._alias=void 0;this.onOrgChangeEmitter.fire({username:this._username,alias:this._alias})}get username(){return this._username}get alias(){return this._alias}get orgId(){return this._orgId}};zr.WorkspaceContextUtil=oi});var $l=l(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.AppInsights=void 0;var ma=bE(),Ea=require("os"),ot=require("vscode"),OE=ai(),or=class extends ot.Disposable{constructor(e,t,n,s){super(()=>this.toDispose.forEach(i=>i&&i.dispose())),this.extensionId=e,this.extensionVersion=t,this.userOptIn=!1,this.toDispose=[],this.uniqueUserMetrics=!1,s&&(this.uniqueUserMetrics=!0),this.setTelemetryTag(),this.updateUserOptIn(n),this.toDispose.push(ot.workspace.onDidChangeConfiguration(()=>this.updateUserOptIn(n)))}updateUserOptIn(e){let t=ot.workspace.getConfiguration(or.TELEMETRY_CONFIG_ID);this.userOptIn!==t.get(or.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=t.get(or.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(e):this.dispose())}createAppInsightsClient(e){ma.defaultClient?(this.appInsightsClient=new ma.TelemetryClient(e),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(ma.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=ma.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),this.uniqueUserMetrics&&ot.env&&(this.appInsightsClient.context.tags["ai.user.id"]=ot.env.machineId,this.appInsightsClient.context.tags["ai.session.id"]=ot.env.sessionId,this.appInsightsClient.context.tags["ai.cloud.roleInstance"]="DEPRECATED"),e&&e.indexOf("AIF-")===0&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}getCommonProperties(){let e={"common.os":Ea.platform(),"common.platformversion":(Ea.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.systemmemory":`${(Ea.totalmem()/1073741824).toFixed(2)} GB`,"common.extname":this.extensionId,"common.extversion":this.extensionVersion},t=Ea.cpus();return t&&t.length>0&&(e["common.cpus"]=`${t[0].model}(${t.length} x ${t[0].speed})`),ot.env&&(e["common.vscodemachineid"]=ot.env.machineId,e["common.vscodesessionid"]=ot.env.sessionId,e["common.vscodeversion"]=ot.version,ot.env.uiKind&&(e["common.vscodeuikind"]=ot.UIKind[ot.env.uiKind])),e}sendTelemetryEvent(e,t,n){if(this.userOptIn&&e&&this.appInsightsClient){let s=OE.WorkspaceContextUtil.getInstance().orgId,i=t||{};i=this.applyTelemetryTag(s?{...i,orgId:s}:i),this.appInsightsClient.trackEvent({name:`${this.extensionId}/${e}`,properties:i,measurements:n})}}sendExceptionEvent(e,t,n){if(this.userOptIn&&t&&this.appInsightsClient){let s=new Error;s.name=`${this.extensionId}/${e}`,s.message=t,s.stack="DEPRECATED";let i=OE.WorkspaceContextUtil.getInstance().orgId||"",o=this.applyTelemetryTag({orgId:i});this.appInsightsClient.trackException({exception:s,properties:o,measurements:n})}}dispose(){return new Promise(t=>{this.appInsightsClient?this.appInsightsClient.flush({callback:()=>{this.appInsightsClient=void 0,t(void 0)}}):t(void 0)})}setTelemetryTag(){let e=ot.workspace.getConfiguration();this.telemetryTag=e?.get("salesforcedx-vscode-core.telemetry-tag")||void 0}applyTelemetryTag(e){return this.telemetryTag?{...e,telemetryTag:this.telemetryTag}:e}};ya.AppInsights=or;or.TELEMETRY_CONFIG_ID="telemetry";or.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry"});var RE=l(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.LogStream=void 0;var wx=require("fs"),Ix=require("path"),wE=require("vscode"),IE=ai(),Hl=class extends wE.Disposable{constructor(e,t){super(()=>this.toDispose.forEach(n=>n&&n.dispose())),this.extensionId=e,this.logFilePath=t,this.toDispose=[],t=Ix.join(t,`${this.extensionId}.txt`),this.stream=wx.createWriteStream(t,{flags:"a",encoding:"utf8",autoClose:!0}),this.toDispose.push(wE.workspace.onDidChangeConfiguration(()=>()=>{})),console.log("VS Code telemetry event logging enabled for: "+this.extensionId+". Telemetry events will be written via write stream to a file at: "+this.logFilePath+".")}sendTelemetryEvent(e,t,n){let s=IE.WorkspaceContextUtil.getInstance().orgId;s&&t?t.orgId=s:s&&(t={orgId:s}),this.stream&&this.stream.write(`telemetry/${e} ${JSON.stringify({properties:t,measurements:n})}
`)}sendExceptionEvent(e,t,n){let i={orgId:IE.WorkspaceContextUtil.getInstance().orgId||""};console.log("LogStream.sendExceptionEvent - exceptionMessage: "+t),this.stream&&this.stream.write(`telemetry/${e} ${JSON.stringify({properties:i,measurements:n})}
`)}dispose(){return new Promise(t=>{if(!this.stream)return t(void 0);this.stream.on("finish",t),this.stream.end()})}};ba.LogStream=Hl});var xE=l(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.LogStreamConfig=void 0;var ci=class{static logFilePath(){return process.env.VSCODE_LOGS??""}static isEnabledFor(e){let t=process.env.VSCODE_LOG_LEVEL==="trace";return!!(ci.logFilePath()&&e&&t)}};Sa.LogStreamConfig=ci});var PE=l(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.TelemetryFile=void 0;var Rx=require("fs"),xx=require("path"),Px=jr(),Ax=Dr(),Bl=class{constructor(e){this.filePath=this.logFilePathFor(e),console.log("Local telemetry event logging enabled for: "+e+". Telemetry events will be appended to the file at: "+this.filePath+".")}sendTelemetryEvent(e,t,n){this.writeToFile(e,{...t,...n})}sendExceptionEvent(e,t,n){this.writeToFile(e,{exceptionMessage:t,...n})}dispose(){return new Promise((e,t)=>{try{console.log("dispose called on Local Telemetry Logger."),e()}catch(n){t(n)}})}async writeToFile(e,t){let n=new Date().toISOString();await Rx.promises.appendFile(this.filePath,JSON.stringify({timestamp:n,command:e,data:t},null,2)+",")}logFilePathFor(e){return xx.join((0,Px.getRootWorkspacePath)(),`${e}-${Ax.LOCAL_TELEMETRY_FILE}`)}};Ca.TelemetryFile=Bl});var Ho=l(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.TelemetryService=mr.TelemetryServiceProvider=mr.TelemetryBuilder=void 0;var Nx=require("util"),Vl=require("vscode"),ui=Dr(),AE=Eo(),NE=Ev(),Dx=$l(),Lx=RE(),DE=xE(),qx=PE(),Ta=class{addProperty(e,t){return this.properties=this.properties||{},t!==void 0&&(this.properties[e]=t),this}addMeasurement(e,t){return this.measurements=this.measurements||{},t!==void 0&&(this.measurements[e]=t),this}build(){return{properties:this.properties,measurements:this.measurements}}};mr.TelemetryBuilder=Ta;var Er=class{static getInstance(e){let t=e||ui.SFDX_CORE_EXTENSION_NAME,n=Er.instances.get(t);return n||(n=new Oa,Er.instances.set(t,n)),n}};mr.TelemetryServiceProvider=Er;Er.instances=new Map;var Oa=class{constructor(){this.reporters=[],this.aiKey=ui.DEFAULT_AIKEY,this.version="",this.cliAllowsTelemetryPromise=void 0,this.extensionName="unknown"}static getInstance(e){return Er.getInstance(e)}async initializeService(e){let{name:t,version:n,aiKey:s}=e.extension.packageJSON;t||console.log("Extension name is not defined in package.json"),n||console.log("Extension version is not defined in package.json"),this.extensionContext=e,this.extensionName=t,this.version=n,this.aiKey=s||this.aiKey,this.checkCliTelemetry().then(async o=>{this.setCliTelemetryEnabled(this.isTelemetryExtensionConfigurationEnabled()&&o)}).catch(o=>{console.log("Error initializing telemetry service: "+o)});let i=e.extensionMode!==Vl.ExtensionMode.Production;this.reporters.length===0&&await this.isTelemetryEnabled()&&(i?AE.SettingsService.isAdvancedSettingEnabledFor(this.extensionName,AE.AdvancedSettings.LOCAL_TELEMETRY_LOGGING)&&this.reporters.push(new qx.TelemetryFile(this.extensionName)):(console.log("adding AppInsights reporter."),this.reporters.push(new Dx.AppInsights(this.getTelemetryReporterName(),this.version,this.aiKey,!0)),DE.LogStreamConfig.isEnabledFor(this.extensionName)&&this.reporters.push(new Lx.LogStream(this.getTelemetryReporterName(),DE.LogStreamConfig.logFilePath())))),this.extensionContext.subscriptions.push(...this.reporters)}getTelemetryReporterName(){return this.extensionName.startsWith(ui.SFDX_EXTENSION_PACK_NAME)?ui.SFDX_EXTENSION_PACK_NAME:this.extensionName}getReporters(){return this.reporters}async isTelemetryEnabled(){return this.isTelemetryExtensionConfigurationEnabled()&&await this.checkCliTelemetry()}async checkCliTelemetry(){return typeof this.cliAllowsTelemetryPromise<"u"?this.cliAllowsTelemetryPromise:(this.cliAllowsTelemetryPromise=(0,NE.isCLITelemetryAllowed)(),await this.cliAllowsTelemetryPromise)}isTelemetryExtensionConfigurationEnabled(){return Vl.workspace.getConfiguration("telemetry").get("enableTelemetry",!0)&&Vl.workspace.getConfiguration(ui.SFDX_CORE_CONFIGURATION_NAME).get("telemetry.enabled",!0)}setCliTelemetryEnabled(e){e||(0,NE.disableCLITelemetry)()}sendActivationEventInfo(e){let n=new Ta().addProperty("activateStartDate",e.activateStartDate?.toISOString()).addProperty("activateEndDate",e.activateEndDate?.toISOString()).addProperty("loadStartDate",e.loadStartDate?.toISOString()).addMeasurement("extensionActivationTime",e.extensionActivationTime).build();this.sendExtensionActivationEvent(e.startActivateHrTime,e.markEndTime,n)}sendExtensionActivationEvent(e,t,n){let s=t??this.getEndHRTime(e),i={extensionName:this.extensionName,...n?.properties?n.properties:{}},o={startupTime:s,...n?.measurements?n.measurements:{}};this.validateTelemetry(()=>{this.reporters.forEach(a=>{a.sendTelemetryEvent("activationEvent",i,o)})})}sendExtensionDeactivationEvent(){this.validateTelemetry(()=>{this.reporters.forEach(e=>{e.sendTelemetryEvent("deactivationEvent",{extensionName:this.extensionName})})})}sendCommandEvent(e,t,n,s){this.validateTelemetry(()=>{if(e){let i={extensionName:this.extensionName,commandName:e},o=Object.assign(i,n),a;(t||s)&&(a=Object.assign({},s),t&&(a.executionTime=this.getEndHRTime(t))),this.reporters.forEach(c=>{c.sendTelemetryEvent("commandExecution",o,a)})}})}sendException(e,t){this.validateTelemetry(()=>{this.reporters.forEach(n=>{try{n.sendExceptionEvent(e,t)}catch{console.log("There was an error sending an exception report to: "+typeof n+" name: "+e+" message: "+t)}})})}sendEventData(e,t,n){this.validateTelemetry(()=>{this.reporters.forEach(s=>{s.sendTelemetryEvent(e,t,n)})})}dispose(){this.reporters.forEach(e=>{e.dispose().catch(t=>console.log(t))})}getEndHRTime(e){let t=process.hrtime(e);return Number(Nx.format("%d%d",t[0],t[1]/1e6))}hrTimeToMilliseconds(e){return e[0]*1e3+e[1]/1e6}validateTelemetry(e){this.reporters.length>0&&this.isTelemetryEnabled().then(t=>t?e():void 0).catch(t=>console.error(t))}};mr.TelemetryService=Oa});var LE=l(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.telemetryService=void 0;var kx=Ho();wa.telemetryService=kx.TelemetryService.getInstance()});var kE=l(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.fileUtils=je.asyncFilter=je.flushFilePaths=je.flushFilePath=je.extractJsonObject=je.isNullOrUndefined=void 0;var qE=require("path"),jx=LE(),Fx=r=>r==null;je.isNullOrUndefined=Fx;var Mx=r=>{let e=r.indexOf("{")!==-1&&r.lastIndexOf("}")!==-1,t;if(e)return t=r.substring(r.indexOf("{"),r.lastIndexOf("}")+1),JSON.parse(t);throw new Error(`The string "${r}" is not a valid JSON string.`)};je.extractJsonObject=Mx;var Ux=r=>{if(r==="")return r;let e=r;return/^win32/.test(process.platform)&&(e=e.charAt(0).toLowerCase()+e.slice(1)),r!==e&&r.toLowerCase()===e.toLowerCase()&&jx.telemetryService.sendEventData("FilePathCaseMismatch",{originalPath:(0,qE.basename)(r),nativePath:(0,qE.basename)(e)}),e};je.flushFilePath=Ux;var Gx=r=>{for(let e=0;e<r.length;e++)r[e]=(0,je.flushFilePath)(r[e]);return r};je.flushFilePaths=Gx;var $x=async(r,e)=>{let t=await Promise.all(r.map(e));return r.filter((n,s)=>t[s])};je.asyncFilter=$x;je.fileUtils={flushFilePaths:je.flushFilePaths,flushFilePath:je.flushFilePath,extractJsonObject:je.extractJsonObject}});var jE=l(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.isAlphaNumSpaceString=at.isRecordIdFormat=at.isAlphaNumString=at.isIntegerInRange=at.isInteger=void 0;var Hx=r=>r!==void 0&&!/\D/.test(r)&&Number.isSafeInteger(Number.parseInt(r,10));at.isInteger=Hx;var Bx=(r,e)=>r!==void 0&&(0,at.isInteger)(r)&&Number.parseInt(r,10)>=e[0]&&Number.parseInt(r,10)<=e[1];at.isIntegerInRange=Bx;var Vx=r=>r!==void 0&&r!==""&&!/\W/.test(r);at.isAlphaNumString=Vx;var Xx=(r="",e)=>(0,at.isAlphaNumString)(r)&&r.startsWith(e)&&(r.length===15||r.length===18);at.isRecordIdFormat=Xx;var Wx=r=>r!==void 0&&/^\w+( *\w*)*$/.test(r);at.isAlphaNumSpaceString=Wx});var FE=l(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.isSFContainerMode=void 0;var Yx=()=>!!process.env.SF_CONTAINER_MODE;Ia.isSFContainerMode=Yx});var UE=l(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.getSalesforceExtensions=Ae.getExtensionInfo=Ae.getExtensionsInfo=Ae.getExtensionHostLogActivationRecords=Ae.getExtensionHostLogLocation=Ae.readExtensionHostLog=Ae.isProcessAlive=void 0;var zx=require("fs/promises"),Kx=require("os"),Xl=require("path"),Ra=require("vscode"),Zx=/(?<dateTimeStr>\S+?\s?\S+?)\s?\[(?<level>\S+?)\]\s?(?<eventName>\S+?)\s(?<extensionId>\S+?),\s+?(?<properties>.*)/,ME=/.*?Extension host with pid\s?(?<pid>[0-9]+?)\s+?started/,Jx=r=>{try{return process.kill(parseInt(r,10),0),!0}catch{return!1}};Ae.isProcessAlive=Jx;var Qx=async r=>{let e=(0,Xl.join)(r.fsPath,"exthost.log");try{return(await(0,zx.readFile)(e,"utf8")).split(Kx.EOL).filter(n=>n)}catch{return[]}};Ae.readExtensionHostLog=Qx;var eP=r=>{let e=r.logUri,t="exthost",n=e.fsPath.split(Xl.sep),s=n.indexOf(t);if(!(s<0))return Ra.Uri.file(n.slice(0,s+1).join(Xl.sep))};Ae.getExtensionHostLogLocation=eP;var tP=async r=>{let e=(0,Ae.getExtensionHostLogLocation)(r);if(!e)return;let t=await(0,Ae.readExtensionHostLog)(e),n=t.reduce((c,u,f)=>ME.test(u)?f:c,-1);if(n===-1)return;let s=ME.exec(t[n]),{pid:i}=s.groups;return!i||!(0,Ae.isProcessAlive)(i)?void 0:t.slice(n).filter(c=>c.includes("ExtensionService#_doActivateExtension")).reduce((c,u)=>{let f=Zx.exec(u.trim());if(!f)return c;let{dateTimeStr:d,level:_,eventName:m,extensionId:y,properties:P}=f.groups,M=new Date(d),L=P.split(", ").reduce((O,C)=>{let[U,B]=C.split(": ");return{...O,[U]:B}},{});return{...c,[y]:{dateTime:M,level:_,eventName:m,properties:L}}},{})};Ae.getExtensionHostLogActivationRecords=tP;var rP=async r=>{let e=await(0,Ae.getExtensionHostLogActivationRecords)(r);return e?Object.keys(e).reduce((n,s)=>{let i=e[s];if(!i)return{};let o=Ra.extensions.getExtension(s);return{...n,[s]:{isActive:o?.isActive||!1,path:o?.extensionPath,kind:o?.extensionKind,uri:o?.extensionUri,loadStartDate:i.dateTime}}},{}):void 0};Ae.getExtensionsInfo=rP;var nP=async(r,e=12e4,t=1e4)=>{let n=Date.now()+e;for(;Date.now()<n;){let s=await(0,Ae.getExtensionsInfo)(r);if(s){let i=s[r.extension.id];if(i)return i}await new Promise(i=>setTimeout(i,t))}};Ae.getExtensionInfo=nP;var sP=()=>{let r="salesforce.salesforcedx-vscode",e=Ra.extensions.getExtension(r);if(!e)throw new Error(`Extension pack ${r} not found`);return Ra.extensions.all.filter(t=>t.id!=="salesforce.salesforce-vscode-slds"&&e.packageJSON.extensionPack.includes(t.id))};Ae.getSalesforceExtensions=sP});var GE=l(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.ActivationTracker=void 0;var iP=UE(),Wl=class{constructor(e,t){this.extensionContext=e,this.telemetryService=t,this._activationInfo={startActivateHrTime:process.hrtime(),activateStartDate:new Date,extensionActivationTime:0}}async markActivationStop(e){let t=e??new Date,n=this.telemetryService.getEndHRTime(this._activationInfo.startActivateHrTime),s=await(0,iP.getExtensionInfo)(this.extensionContext),i=-1;s?.loadStartDate&&t.getTime()>=s.loadStartDate.getTime()&&(i=t.getTime()-s.loadStartDate.getTime()),i<0?this.telemetryService.sendExtensionActivationEvent(this._activationInfo.startActivateHrTime):(this._activationInfo={...this._activationInfo,...s,extensionActivationTime:i,activateEndDate:t,markEndTime:n},this.telemetryService.sendActivationEventInfo(this.activationInfo))}get activationInfo(){return this._activationInfo}};xa.ActivationTracker=Wl});var gr=l(z=>{"use strict";var oP=z&&z.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),aP=z&&z.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&oP(e,r,t)};Object.defineProperty(z,"__esModule",{value:!0});z.ActivationTracker=z.isSFContainerMode=z.isRecordIdFormat=z.isIntegerInRange=z.isInteger=z.isAlphaNumString=z.isAlphaNumSpaceString=z.fileUtils=z.isNullOrUndefined=z.extractJsonObject=z.asyncFilter=z.TraceFlagsRemover=z.TraceFlags=z.projectPaths=z.getRelativeProjectPath=z.getTestResultsFolder=z.fileExtensionsMatch=z.ensureDirectoryExists=z.TOOLS=void 0;var as=hv();Object.defineProperty(z,"TOOLS",{enumerable:!0,get:function(){return as.TOOLS}});Object.defineProperty(z,"ensureDirectoryExists",{enumerable:!0,get:function(){return as.ensureDirectoryExists}});Object.defineProperty(z,"fileExtensionsMatch",{enumerable:!0,get:function(){return as.fileExtensionsMatch}});Object.defineProperty(z,"getTestResultsFolder",{enumerable:!0,get:function(){return as.getTestResultsFolder}});Object.defineProperty(z,"getRelativeProjectPath",{enumerable:!0,get:function(){return as.getRelativeProjectPath}});Object.defineProperty(z,"projectPaths",{enumerable:!0,get:function(){return as.projectPaths}});aP(pv(),z);var cP=Ru();Object.defineProperty(z,"TraceFlags",{enumerable:!0,get:function(){return cP.TraceFlags}});var uP=gv();Object.defineProperty(z,"TraceFlagsRemover",{enumerable:!0,get:function(){return uP.TraceFlagsRemover}});var Pa=kE();Object.defineProperty(z,"asyncFilter",{enumerable:!0,get:function(){return Pa.asyncFilter}});Object.defineProperty(z,"extractJsonObject",{enumerable:!0,get:function(){return Pa.extractJsonObject}});Object.defineProperty(z,"isNullOrUndefined",{enumerable:!0,get:function(){return Pa.isNullOrUndefined}});Object.defineProperty(z,"fileUtils",{enumerable:!0,get:function(){return Pa.fileUtils}});var li=jE();Object.defineProperty(z,"isAlphaNumSpaceString",{enumerable:!0,get:function(){return li.isAlphaNumSpaceString}});Object.defineProperty(z,"isAlphaNumString",{enumerable:!0,get:function(){return li.isAlphaNumString}});Object.defineProperty(z,"isInteger",{enumerable:!0,get:function(){return li.isInteger}});Object.defineProperty(z,"isIntegerInRange",{enumerable:!0,get:function(){return li.isIntegerInRange}});Object.defineProperty(z,"isRecordIdFormat",{enumerable:!0,get:function(){return li.isRecordIdFormat}});var lP=FE();Object.defineProperty(z,"isSFContainerMode",{enumerable:!0,get:function(){return lP.isSFContainerMode}});var fP=GE();Object.defineProperty(z,"ActivationTracker",{enumerable:!0,get:function(){return fP.ActivationTracker}})});var $E=l(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.DiffResultParser=void 0;var hP=gr(),Yl=class{constructor(e){try{this.response=(0,hP.extractJsonObject)(e)}catch{let n=new Error("Error parsing diff result");throw n.name="DiffResultParserFail",n}}isSuccessful(){return!!(this.response&&this.response.status===0)}getSuccessResponse(){if(this.isSuccessful())return this.response}getErrorResponse(){if(!this.isSuccessful())return this.response}};Aa.DiffResultParser=Yl});var HE=l(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.ConfigGet=Kr.CONFIG_GET_COMMAND=void 0;var dP=Ro(),pP=Ms(),gP=qo();Kr.CONFIG_GET_COMMAND="config:get";var zl=class{async getConfig(e,...t){let n=new dP.SfCommandBuilder().withArg(Kr.CONFIG_GET_COMMAND);t.forEach(a=>n.withArg(a));let s=new pP.CliCommandExecutor(n.withJson().build(),{cwd:e}).execute(),o=await new gP.CommandOutput().getCmdResult(s);try{let a=new Map;return JSON.parse(o).result.forEach(u=>a.set(u.key,u.value)),Promise.resolve(a)}catch(a){return Promise.reject(a)}}};Kr.ConfigGet=zl});var BE=l(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.LocalCommandExecution=void 0;var vP=require("events");Di();var Na=Vt(),ct=class{constructor(e){this.cmdEmitter=new vP.EventEmitter,this.command=e,this.processExitSubject=Na.Observable.fromEvent(this.cmdEmitter,ct.EXIT_EVENT),this.processErrorSubject=Na.Observable.fromEvent(this.cmdEmitter,ct.ERROR_EVENT),this.stdoutSubject=Na.Observable.fromEvent(this.cmdEmitter,ct.STDOUT_EVENT),this.stderrSubject=Na.Observable.fromEvent(this.cmdEmitter,ct.STDERR_EVENT)}};Da.LocalCommandExecution=ct;ct.EXIT_EVENT="exitEvent";ct.ERROR_EVENT="errorEvent";ct.STDOUT_EVENT="stdoutEvent";ct.STDERR_EVENT="stderrEvent";ct.SUCCESS_CODE=0;ct.FAILURE_CODE=1});var VE=l(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.OrgCreateResultParser=void 0;var _P=gr(),Kl=class{constructor(e){try{e&&(this.response=(0,_P.extractJsonObject)(e))}catch{let n=new Error("Error parsing org create result");throw n.name="OrgCreateParserFail",n}}createIsSuccessful(){return!!(this.response&&this.response.status===0)}getResult(){return this.createIsSuccessful()?this.response:this.response}};La.OrgCreateResultParser=Kl});var XE=l(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.OrgDisplay=Zr.ORG_DISPLAY_COMMAND=void 0;var mP=Ro(),EP=Ms(),yP=qo();Zr.ORG_DISPLAY_COMMAND="org:display";var Zl=class{async getOrgInfo(e){let t=new EP.CliCommandExecutor(new mP.SfCommandBuilder().withArg(Zr.ORG_DISPLAY_COMMAND).withJson().build(),{cwd:e}).execute(),s=await new yP.CommandOutput().getCmdResult(t);try{let i=JSON.parse(s).result;return Promise.resolve(i)}catch{return Promise.reject(s)}}};Zr.OrgDisplay=Zl});var WE=l(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.OrgOpenContainerResultParser=void 0;var Jl=class{constructor(e){try{let t=e.substring(e.indexOf("{"),e.lastIndexOf("}")+1);this.response=JSON.parse(t)}catch{let n=new Error("Error parsing org open result");throw n.name="OrgOpenContainerParserFail",n}}openIsSuccessful(){return!!(this.response&&this.response.status===0)}getResult(){return this.openIsSuccessful()?this.response:this.response}};qa.OrgOpenContainerResultParser=Jl});var YE=l(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.ProjectRetrieveStartResultParser=Jr.CONFLICT_ERROR_NAME=void 0;var bP=gr();Jr.CONFLICT_ERROR_NAME="SourceConflictError";var Ql=class{constructor(e){try{this.response=(0,bP.extractJsonObject)(e)}catch{let n=new Error("Error parsing pull result");throw n.name="ProjectRetrieveStartParserFail",n}}getErrors(){if(this.response.status===1)return{message:this.response.message??"Pull failed. ",name:this.response.name??"RetrieveFailed",status:this.response.status,files:(this.response.data??this.response.result.files).filter(e=>e.state==="Failed"||e.state==="Conflict")}}getSuccesses(){let{status:e,result:t,partialSuccess:n}=this.response;if(e===0){let{pulledSource:s}=t;return s?{status:e,result:{files:s}}:this.response}if(n)return{status:e,result:{files:n}}}hasConflicts(){return this.response.status===1&&this.response.name===Jr.CONFLICT_ERROR_NAME}};Jr.ProjectRetrieveStartResultParser=Ql});var zE=l(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.ProjectDeployStartResultParser=Qr.CONFLICT_ERROR_NAME=void 0;var SP=gr();Qr.CONFLICT_ERROR_NAME="SourceConflictError";var ef=class{constructor(e){try{this.response=(0,SP.extractJsonObject)(e)}catch{let n=new Error("Error parsing project deploy start result");throw n.name="ProjectDeployStartParserFail",n}}getErrors(){if(this.response.status===1)return{message:this.response.message??"Push failed. ",name:this.response.name??"DeployFailed",status:this.response.status,files:(this.response.data??this.response.result.files).filter(e=>e.state==="Failed"||e.state==="Conflict")}}getSuccesses(){let{status:e,result:t,partialSuccess:n}=this.response;if(e===0){let{pushedSource:s}=t;return s?{status:e,result:{files:s}}:this.response}if(n)return{status:e,result:{files:n}}}hasConflicts(){return this.response.status===1&&this.response.name===Qr.CONFLICT_ERROR_NAME}};Qr.ProjectDeployStartResultParser=ef});var Bo=l(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.ProjectDeployStartResultParser=ie.CONFLICT_ERROR_NAME=ie.ProjectRetrieveStartResultParser=ie.OrgOpenContainerResultParser=ie.OrgDisplay=ie.OrgCreateResultParser=ie.LocalCommandExecution=ie.ConfigGet=ie.DiffResultParser=ie.CommandOutput=ie.GlobalCliEnvironment=ie.CompositeCliCommandExecutor=ie.CompositeCliCommandExecution=ie.CliCommandExecutor=ie.CliCommandExecution=ie.SfCommandBuilder=ie.CommandBuilder=void 0;var KE=Ro();Object.defineProperty(ie,"CommandBuilder",{enumerable:!0,get:function(){return KE.CommandBuilder}});Object.defineProperty(ie,"SfCommandBuilder",{enumerable:!0,get:function(){return KE.SfCommandBuilder}});var fi=Ms();Object.defineProperty(ie,"CliCommandExecution",{enumerable:!0,get:function(){return fi.CliCommandExecution}});Object.defineProperty(ie,"CliCommandExecutor",{enumerable:!0,get:function(){return fi.CliCommandExecutor}});Object.defineProperty(ie,"CompositeCliCommandExecution",{enumerable:!0,get:function(){return fi.CompositeCliCommandExecution}});Object.defineProperty(ie,"CompositeCliCommandExecutor",{enumerable:!0,get:function(){return fi.CompositeCliCommandExecutor}});Object.defineProperty(ie,"GlobalCliEnvironment",{enumerable:!0,get:function(){return fi.GlobalCliEnvironment}});var CP=qo();Object.defineProperty(ie,"CommandOutput",{enumerable:!0,get:function(){return CP.CommandOutput}});var TP=$E();Object.defineProperty(ie,"DiffResultParser",{enumerable:!0,get:function(){return TP.DiffResultParser}});var OP=HE();Object.defineProperty(ie,"ConfigGet",{enumerable:!0,get:function(){return OP.ConfigGet}});var wP=BE();Object.defineProperty(ie,"LocalCommandExecution",{enumerable:!0,get:function(){return wP.LocalCommandExecution}});var IP=VE();Object.defineProperty(ie,"OrgCreateResultParser",{enumerable:!0,get:function(){return IP.OrgCreateResultParser}});var RP=XE();Object.defineProperty(ie,"OrgDisplay",{enumerable:!0,get:function(){return RP.OrgDisplay}});var xP=WE();Object.defineProperty(ie,"OrgOpenContainerResultParser",{enumerable:!0,get:function(){return xP.OrgOpenContainerResultParser}});var PP=YE();Object.defineProperty(ie,"ProjectRetrieveStartResultParser",{enumerable:!0,get:function(){return PP.ProjectRetrieveStartResultParser}});var ZE=zE();Object.defineProperty(ie,"CONFLICT_ERROR_NAME",{enumerable:!0,get:function(){return ZE.CONFLICT_ERROR_NAME}});Object.defineProperty(ie,"ProjectDeployStartResultParser",{enumerable:!0,get:function(){return ZE.ProjectDeployStartResultParser}})});var QE=l(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.LibraryCommandletExecutor=us.SfCommandletExecutor=void 0;var ka=require("vscode"),AP=Bo(),rf=jr(),tf=zt(),NP=Eo(),DP=Rn(),JE=iu(),cs=qs(),nf=class{constructor(e){this.showChannelOutput=!0,this.executionCwd=(0,DP.getRootWorkspacePath)(),this.onDidFinishExecutionEventEmitter=new ka.EventEmitter,this.onDidFinishExecution=this.onDidFinishExecutionEventEmitter.event,this.outputChannel=e}attachExecution(e,t,n){let s;this.outputChannel&&(s=new JE.ChannelService(this.outputChannel),s.streamCommandOutput(e),this.showChannelOutput&&s.showChannelOutput()),cs.notificationService.reportCommandExecutionStatus(e,s,n),cs.ProgressNotification.show(e,t)}logMetric(e,t,n,s){rf.TelemetryService.getInstance().sendCommandEvent(e,t,n,s)}execute(e){let t=process.hrtime(),n=new ka.CancellationTokenSource,s=n.token,i=new AP.CliCommandExecutor(this.build(e.data),{cwd:this.executionCwd,env:{SF_JSON_TO_STDOUT:"true"}}).execute(s),o="";i.stdoutSubject.subscribe(a=>{o+=a.toString()}),i.processExitSubject.subscribe(a=>{let c=this.getTelemetryData(a===0,e,o),u,f;c&&(u=c.properties,f=c.measurements),this.logMetric(i.command.logName,t,u,f),this.onDidFinishExecutionEventEmitter.fire(t)}),this.attachExecution(i,n,s)}getTelemetryData(e,t,n){}};us.SfCommandletExecutor=nf;var sf=class{constructor(e,t,n){this.cancellable=!1,this.cancelled=!1,this.showChannelOutput=!0,this.telemetry=new rf.TelemetryBuilder,this.executionName=e,this.logName=t,this.outputChannel=n}async execute(e){let t=process.hrtime(),n=new JE.ChannelService(this.outputChannel),s=rf.TelemetryService.getInstance();NP.SettingsService.getEnableClearOutputBeforeEachCommand()&&n.clear(),n.showCommandWithTimestamp(`${tf.nls.localize("channel_starting_message")}${this.executionName}
`);try{let i=await ka.window.withProgress({title:tf.nls.localize("progress_notification_text",this.executionName),location:ka.ProgressLocation.Notification,cancellable:this.cancellable},(c,u)=>(u.onCancellationRequested(()=>{this.cancelled=!0,cs.notificationService.showCanceledExecution(this.executionName),s.sendCommandEvent(`${this.logName}_cancelled`,t,o,a)}),this.run(e,c,u)));n.showCommandWithTimestamp(`${tf.nls.localize("channel_end")} ${this.executionName}`),this.showChannelOutput&&n.showChannelOutput(),this.cancelled||(i?cs.notificationService.showSuccessfulExecution(this.executionName,n).catch(c=>console.error(c)):cs.notificationService.showFailedExecution(this.executionName)),this.telemetry.addProperty("success",String(i));let{properties:o,measurements:a}=this.telemetry.build();s.sendCommandEvent(this.logName,t,o,a)}catch(i){i instanceof Error&&(s.sendException(i.name,i.message),cs.notificationService.showFailedExecution(this.executionName),n.appendLine(i.message)),n.showChannelOutput()}}get telemetryData(){return this.telemetry.build()}};us.LibraryCommandletExecutor=sf});var ey=l(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.SfCommandlet=void 0;var LP=qs(),qP=lu(),of=class{constructor(e,t,n,s=new qP.EmptyPostChecker){this.prechecker=e,this.gatherer=t,this.executor=n,this.postchecker=s,this.executor.onDidFinishExecution&&(this.onDidFinishExecution=this.executor.onDidFinishExecution)}async run(){if(await this.prechecker.check()){let e=await this.gatherer.gather();switch(e=await this.postchecker.check(e),e.type){case"CONTINUE":return this.executor.execute(e);case"CANCEL":e.msg&&LP.notificationService.showErrorMessage(e.msg);return}}}};ja.SfCommandlet=of});var ty=l(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.optionMMddYYYY=Ge.optionHHmm=Ge.optionYYYYMMddHHmmss=Ge.makeDoubleDigit=Ge.getYYYYMMddHHmmssDateFormat=void 0;var kP=require("util"),jP=r=>{let e=(0,Ge.makeDoubleDigit)(r.getMonth()+1),t=(0,Ge.makeDoubleDigit)(r.getDate()),n=(0,Ge.makeDoubleDigit)(r.getHours()),s=(0,Ge.makeDoubleDigit)(r.getMinutes()),i=(0,Ge.makeDoubleDigit)(r.getSeconds());return`${r.getFullYear()}${e}${t}${n}${s}${i}`};Ge.getYYYYMMddHHmmssDateFormat=jP;var FP=r=>(0,kP.format)("%d",r).padStart(2,"0");Ge.makeDoubleDigit=FP;Ge.optionYYYYMMddHHmmss={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};Ge.optionHHmm={hour:"2-digit",minute:"2-digit"};Ge.optionMMddYYYY={month:"2-digit",day:"2-digit",year:"numeric"}});var ry=l(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.optionYYYYMMddHHmmss=Ct.optionMMddYYYY=Ct.optionHHmm=Ct.makeDoubleDigit=Ct.getYYYYMMddHHmmssDateFormat=void 0;var hi=ty();Object.defineProperty(Ct,"getYYYYMMddHHmmssDateFormat",{enumerable:!0,get:function(){return hi.getYYYYMMddHHmmssDateFormat}});Object.defineProperty(Ct,"makeDoubleDigit",{enumerable:!0,get:function(){return hi.makeDoubleDigit}});Object.defineProperty(Ct,"optionHHmm",{enumerable:!0,get:function(){return hi.optionHHmm}});Object.defineProperty(Ct,"optionMMddYYYY",{enumerable:!0,get:function(){return hi.optionMMddYYYY}});Object.defineProperty(Ct,"optionYYYYMMddHHmmss",{enumerable:!0,get:function(){return hi.optionYYYYMMddHHmmss}})});var ny=l(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.Table=void 0;var MP="  ",Fa=" ",UP="\u2500",af=class{createTable(e,t,n){if(!e)throw Error("rows cannot be undefined");if(!t)throw Error("columns cannot be undefined");let s=this.calculateMaxColumnWidths(e,t),i=n?`=== ${n}`:"",o="",a="";return t.forEach((c,u,f)=>{let d=s.get(c.key);if(d){let _=u===f.length-1;o+=this.fillColumn(c.label||c.key,d,Fa,_),a+=this.fillColumn("",d,UP,_)}}),o&&a&&(i+=`${n?`
`:""}${o}
${a}
`),e.forEach(c=>{let u="";t.forEach((f,d,_)=>{let m=c[f.key],y=d===_.length-1,P=u.length;m.split(`
`).forEach((M,W)=>{let L=s.get(f.key);L&&(W===0?u+=this.fillColumn(M,L,Fa,y):u+=`
`+this.fillColumn("",P,Fa,y)+this.fillColumn(M,P,Fa,y))})}),i+=u+`
`}),i}calculateMaxColumnWidths(e,t){let n=new Map;return t.forEach(s=>{e.forEach(i=>{let o=i[s.key];if(o===void 0)throw Error(`Row is missing the key ${s.key}`);let a=n.get(s.key);a===void 0&&(a=(s.label||s.key).length,n.set(s.key,a));let c=o.split(`
`).reduce((u,f)=>f.length>u.length?f:u).length;c>a&&n.set(s.key,c)})}),n}fillColumn(e,t,n,s){let i=e;for(let o=0;o<t-e.length;o++)i+=n;return s||(i+=MP),i}};Ma.Table=af});var cf=l(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.Table=void 0;var GP=ny();Object.defineProperty(Ua,"Table",{enumerable:!0,get:function(){return GP.Table}})});var iy=l(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.SourceStatusSummary=fs.SourceTrackingService=void 0;var $P=ai(),ls=zt(),HP=cf(),sy=Go(),BP=Rn(),uf=class{static async getSourceTracking(e,t){return sy.SourceTrackingProvider.getInstance().getSourceTracker(e,t)}static async updateSourceTrackingAfterRetrieve(e,t){await e.updateTrackingFromRetrieve(t)}static async getSourceStatusSummary({local:e=!0,remote:t=!0}){let s=await(await this.getSourceTrackingForCurrentProject()).getStatus({local:e,remote:t});return new ar(s).format()}static async getSourceTrackingForCurrentProject(){let e=(0,BP.getRootWorkspacePath)(),n=await $P.WorkspaceContextUtil.getInstance().getConnection();return await sy.SourceTrackingProvider.getInstance().getSourceTracker(e,n)}};fs.SourceTrackingService=uf;var ar=class{constructor(e){this.statusOutputRows=e,this.resultConverter=t=>{let{fullName:n,type:s,ignored:i,filePath:o,conflict:a}=t,c=ar.originMap.get(t.origin)||"Local",u=ar.stateMap.get(t.state);return{fullName:n,type:s,state:`${c} ${u}${a?" (Conflict)":""}`,ignored:i,filePath:o,origin:c,actualState:u,conflict:a}},this.rowSortFunction=(t,n)=>t.state.toLowerCase()===n.state.toLowerCase()?t.type.toLowerCase()===n.type.toLowerCase()?t.fullName.toLowerCase()<n.fullName.toLowerCase()?-1:1:t.type.toLowerCase()<n.type.toLowerCase()?-1:1:t.state.toLowerCase()<n.state.toLowerCase()?-1:1}format(){let e=this.statusOutputRows.map(n=>this.resultConverter(n));if(e.length===0)return ls.nls.localize("no_local_or_remote_changes_found");let t=e.sort(this.rowSortFunction);return new en(t).value()}};fs.SourceStatusSummary=ar;ar.originMap=new Map([["local","Local"],["remote","Remote"]]);ar.stateMap=new Map([["delete","Deleted"],["add","Add"],["modify","Changed"],["nondelete","Changed"]]);var en=class{constructor(e){this.statusResults=e,this.columns=this.statusResults.some(t=>t.ignored)?[{label:ls.nls.localize("ignored"),key:"ignored"},...en.baseColumns]:en.baseColumns}value(){return this.statusResults.forEach(t=>this.convertToTableRow(t)),new HP.Table().createTable(this.statusResults,this.columns)}convertToTableRow(e){return Object.assign(e,{ignored:e.ignored?"true":"false",filePath:e.filePath?e.filePath:""})}};en.baseColumns=[{label:ls.nls.localize("state"),key:"state"},{label:ls.nls.localize("full_name"),key:"fullName"},{label:ls.nls.localize("type"),key:"type"},{label:ls.nls.localize("project_path"),key:"filePath"}]});var oy=l(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.SourceTrackingService=void 0;var VP=iy();Object.defineProperty(Ga,"SourceTrackingService",{enumerable:!0,get:function(){return VP.SourceTrackingService}})});var jr=l(F=>{"use strict";var XP=F&&F.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Lt=F&&F.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&XP(e,r,t)};Object.defineProperty(F,"__esModule",{value:!0});F.workspaceUtils=F.getRootWorkspacePath=F.getRootWorkspace=F.hasRootWorkspace=F.AppInsights=F.TraceFlags=F.TelemetryBuilder=F.TelemetryService=F.WorkspaceContextUtil=F.SFDX_CORE_EXTENSION_NAME=F.SFDX_CORE_CONFIGURATION_NAME=F.SETTING_CLEAR_OUTPUT_TAB=F.ConfigUtil=F.ConfigSource=F.SfCommandlet=F.LibraryCommandletExecutor=F.SfCommandletExecutor=F.SfWorkspaceChecker=F.EmptyPreChecker=F.EmptyPostChecker=F.EmptyParametersGatherer=F.CompositeParametersGatherer=void 0;Lt(qs(),F);var ay=Yg();Object.defineProperty(F,"CompositeParametersGatherer",{enumerable:!0,get:function(){return ay.CompositeParametersGatherer}});Object.defineProperty(F,"EmptyParametersGatherer",{enumerable:!0,get:function(){return ay.EmptyParametersGatherer}});var WP=lu();Object.defineProperty(F,"EmptyPostChecker",{enumerable:!0,get:function(){return WP.EmptyPostChecker}});var cy=rv();Object.defineProperty(F,"EmptyPreChecker",{enumerable:!0,get:function(){return cy.EmptyPreChecker}});Object.defineProperty(F,"SfWorkspaceChecker",{enumerable:!0,get:function(){return cy.SfWorkspaceChecker}});var uy=QE();Object.defineProperty(F,"SfCommandletExecutor",{enumerable:!0,get:function(){return uy.SfCommandletExecutor}});Object.defineProperty(F,"LibraryCommandletExecutor",{enumerable:!0,get:function(){return uy.LibraryCommandletExecutor}});var YP=ey();Object.defineProperty(F,"SfCommandlet",{enumerable:!0,get:function(){return YP.SfCommandlet}});var ly=$o();Object.defineProperty(F,"ConfigSource",{enumerable:!0,get:function(){return ly.ConfigSource}});Object.defineProperty(F,"ConfigUtil",{enumerable:!0,get:function(){return ly.ConfigUtil}});var lf=Dr();Object.defineProperty(F,"SETTING_CLEAR_OUTPUT_TAB",{enumerable:!0,get:function(){return lf.SETTING_CLEAR_OUTPUT_TAB}});Object.defineProperty(F,"SFDX_CORE_CONFIGURATION_NAME",{enumerable:!0,get:function(){return lf.SFDX_CORE_CONFIGURATION_NAME}});Object.defineProperty(F,"SFDX_CORE_EXTENSION_NAME",{enumerable:!0,get:function(){return lf.SFDX_CORE_EXTENSION_NAME}});var zP=ai();Object.defineProperty(F,"WorkspaceContextUtil",{enumerable:!0,get:function(){return zP.WorkspaceContextUtil}});var fy=Ho();Object.defineProperty(F,"TelemetryService",{enumerable:!0,get:function(){return fy.TelemetryService}});Object.defineProperty(F,"TelemetryBuilder",{enumerable:!0,get:function(){return fy.TelemetryBuilder}});Lt(gr(),F);var KP=Ru();Object.defineProperty(F,"TraceFlags",{enumerable:!0,get:function(){return KP.TraceFlags}});var ZP=$l();Object.defineProperty(F,"AppInsights",{enumerable:!0,get:function(){return ZP.AppInsights}});var $a=Rn();Object.defineProperty(F,"hasRootWorkspace",{enumerable:!0,get:function(){return $a.hasRootWorkspace}});Object.defineProperty(F,"getRootWorkspace",{enumerable:!0,get:function(){return $a.getRootWorkspace}});Object.defineProperty(F,"getRootWorkspacePath",{enumerable:!0,get:function(){return $a.getRootWorkspacePath}});Object.defineProperty(F,"workspaceUtils",{enumerable:!0,get:function(){return $a.workspaceUtils}});Lt(Bo(),F);Lt(Ms(),F);Lt(nu(),F);Lt(hu(),F);Lt(ry(),F);Lt(cf(),F);Lt(fu(),F);Lt(Go(),F);Lt(oy(),F)});var oA={};Iy(oA,{activate:()=>sA,deactivate:()=>iA,getDebuggerType:()=>df,getExceptionBreakpointCache:()=>tA,mergeExceptionBreakpointInfos:()=>gy,updateExceptionBreakpointCache:()=>vy});module.exports=Ry(oA);var pe=Bt(Wa()),ge=Bt(require("vscode"));var bn=Bt(Wa()),Ar=Bt(require("vscode"));var xt=Bt(fo());var xg={config_name_text:"Launch Apex Debugger",select_exception_text:"Select an exception",select_break_option_text:"Select break option",always_break_text:"Always break",never_break_text:"Never break",language_client_not_ready:"Unable to retrieve breakpoint info from language server, language server is not ready",isv_debug_config_environment_error:"Salesforce Extensions for VS Code encountered a problem while configuring your environment. Some features might not work. For details, click Help > Toggle Developer Tools or check the Salesforce CLI logs in ~/.sfdx/sfdx.log."};var Pg={config_name_text:"Apex \u30C7\u30D0\u30C3\u30AC\u3092\u8D77\u52D5",select_exception_text:"\u4F8B\u5916\u3092\u9078\u629E",select_break_option_text:"\u4E2D\u65AD\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u9078\u629E",always_break_text:"\u5E38\u306B\u4E2D\u65AD",never_break_text:"\u4E2D\u65AD\u3057\u306A\u3044",language_client_not_ready:"\u8A00\u8A9E\u30B5\u30FC\u30D0\u304B\u3089\u30D6\u30EC\u30FC\u30AF\u30DD\u30A4\u30F3\u30C8\u306E\u60C5\u5831\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u8A00\u8A9E\u30B5\u30FC\u30D0\u304C\u8D77\u52D5\u3057\u3066\u3044\u307E\u305B\u3093\u3002",isv_debug_config_environment_error:"\u74B0\u5883\u3092\u8A2D\u5B9A\u3057\u3066\u3044\u308B\u969B\u306B VS Code \u306E Salesforce \u62E1\u5F35\u6A5F\u80FD\u3067\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u4E00\u90E8\u306E\u6A5F\u80FD\u304C\u52D5\u4F5C\u3057\u306A\u3044\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001[\u30D8\u30EB\u30D7] > [\u958B\u767A\u8005\u30C4\u30FC\u30EB\u306E\u5207\u308A\u66FF\u3048] \u3092\u53C2\u7167\u3059\u308B\u304B\u3001~/.sfdx/sfdx.log \u5185\u306ESalesforce CLI \u306E\u30ED\u30B0\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002"};var YO=[xt.DEFAULT_LOCALE,xt.LOCALE_JA],zO=r=>{let e=new xt.Message(xg),t=r?r.locale:xt.DEFAULT_LOCALE;return t===xt.LOCALE_JA?new xt.Message(Pg,e):(YO.indexOf(t)===-1&&console.error(`Cannot find ${t}, defaulting to en`),e)},Pt=new xt.Localization(zO(process.env.VSCODE_NLS_CONFIG?JSON.parse(process.env.VSCODE_NLS_CONFIG):void 0));var Sn=class{constructor(){this.salesforceApexExtension=Ar.extensions.getExtension("salesforce.salesforcedx-vscode-apex")}static getConfig(e){return{name:Pt.localize("config_name_text"),type:bn.DEBUGGER_TYPE,request:bn.DEBUGGER_LAUNCH_TYPE,userIdFilter:[],requestTypeFilter:[],entryPointFilter:"",salesforceProject:e?e.uri.fsPath:"${workspaceRoot}"}}provideDebugConfigurations(e,t){return[Sn.getConfig(e)]}resolveDebugConfiguration(e,t,n){return this.asyncDebugConfig(e,t).catch(async s=>Ar.window.showErrorMessage(s.message,{modal:!0}).then(()=>{}))}async asyncDebugConfig(e,t){if(t.name=t.name||Pt.localize("config_name_text"),t.type=t.type||bn.DEBUGGER_TYPE,t.request=t.request||bn.DEBUGGER_LAUNCH_TYPE,t.userIdFilter===void 0&&(t.userIdFilter=[]),t.requestTypeFilter===void 0&&(t.requestTypeFilter=[]),t.entryPointFilter===void 0&&(t.entryPointFilter=""),t.salesforceProject=t.salesforceProject||(e?e.uri.fsPath:"${workspaceRoot}"),Ar.workspace){let n=Ar.workspace.getConfiguration();t.workspaceSettings={proxyUrl:n.get("http.proxy",""),proxyStrictSSL:n.get("http.proxyStrictSSL",!1),proxyAuth:n.get("http.proxyAuthorization",""),connectionTimeoutMs:n.get("salesforcedx-vscode-apex-debugger.connectionTimeoutMs")}}return this.salesforceApexExtension&&this.salesforceApexExtension.exports&&(await this.isLanguageClientReady(),t.lineBreakpointInfo=await this.salesforceApexExtension.exports.getLineBreakpointInfo()),t}async isLanguageClientReady(){let e=!1,t=0;for(;this.salesforceApexExtension&&this.salesforceApexExtension.exports&&!this.salesforceApexExtension.exports.languageClientUtils.getStatus().isReady()&&!e;){if(this.salesforceApexExtension.exports.languageClientUtils.getStatus().failedToInitialize())throw Error(this.salesforceApexExtension.exports.languageClientUtils.getStatus().getStatusMessage());await new Promise(n=>setTimeout(n,100)),t>=30&&(e=!0),t++}if(e)throw Error(Pt.localize("language_client_not_ready"))}};var hy=Bt(Ng()),dy=Bt(jr()),$t=Bt(require("vscode")),hs=async()=>{let r=new hy.IsvContextUtil;if($t.workspace&&$t.workspace.workspaceFolders&&$t.workspace.workspaceFolders[0]){let e=await r.setIsvDebuggerContext($t.workspace.workspaceFolders[0].uri.fsPath);await $t.commands.executeCommand("setContext","sf:isv_debug_project",e),console.log(e?"Configured ISV Project Authentication":"Project is not for ISV Debugger")}r.resetCliEnvironmentVars()},ff=r=>{if($t.workspace.workspaceFolders instanceof Array&&$t.workspace.workspaceFolders.length>0){let e=dy.projectPaths.salesforceProjectConfig(),t=$t.workspace.createFileSystemWatcher(e);t.onDidChange(n=>hs()),t.onDidCreate(n=>hs()),t.onDidDelete(n=>hs()),r.subscriptions.push(t)}};var py=Bt(require("util")),hf="salesforcedx-vscode-apex-debugger",cr=class{constructor(){this.isTelemetryEnabled=!1}static getInstance(){return cr.instance||(cr.instance=new cr),cr.instance}initializeService(e,t){this.isTelemetryEnabled=t,this.reporters=e}sendExtensionActivationEvent(e){if(this.reporters!==void 0&&this.isTelemetryEnabled){let t=this.getEndHRTime(e);this.reporters.forEach(n=>{n.sendTelemetryEvent("activationEvent",{extensionName:hf},{startupTime:t})})}}sendExtensionDeactivationEvent(){this.reporters!==void 0&&this.isTelemetryEnabled&&this.reporters.forEach(e=>{e.sendTelemetryEvent("deactivationEvent",{extensionName:hf})})}getEndHRTime(e){let t=process.hrtime(e);return Number(py.format("%d%d",t[0],t[1]/1e6))}sendMetricEvent(e){this.reporters!==void 0&&this.isTelemetryEnabled&&this.reporters.forEach(t=>{let n={eventName:e.body.type,message:e.body.subject};t.sendTelemetryEvent(n.eventName,{extensionName:hf,message:n.message})})}};var di=cr.getInstance();var tn=new Map,pi=ge.extensions.getExtension("salesforce.salesforcedx-vscode-core"),df=async r=>{let e=r.type;return e===pe.LIVESHARE_DEBUGGER_TYPE&&(e=await r.customRequest(pe.LIVESHARE_DEBUG_TYPE_REQUEST)),e},JP=()=>{let r=ge.debug.onDidReceiveDebugSessionCustomEvent(async n=>{if(n&&n.session&&await df(n.session)===pe.DEBUGGER_TYPE&&n.event===pe.SHOW_MESSAGE_EVENT){let i=n.body;if(i&&i.type&&i.message)switch(i.type){case pe.VscodeDebuggerMessageType.Info:{ge.window.showInformationMessage(i.message);break}case pe.VscodeDebuggerMessageType.Warning:{ge.window.showWarningMessage(i.message);break}case pe.VscodeDebuggerMessageType.Error:{ge.window.showErrorMessage(i.message);break}}}}),e=ge.commands.registerCommand("sf.debug.exception.breakpoint",eA),t=ge.debug.onDidStartDebugSession(n=>{tn.forEach(s=>{let i={exceptionInfo:s};n.customRequest(pe.EXCEPTION_BREAKPOINT_REQUEST,i)})});return ge.Disposable.from(r,e,t)},QP=[{label:Pt.localize("always_break_text"),description:"",breakMode:pe.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS},{label:Pt.localize("never_break_text"),description:"",breakMode:pe.EXCEPTION_BREAKPOINT_BREAK_MODE_NEVER}],eA=async()=>{let r=ge.extensions.getExtension("salesforce.salesforcedx-vscode-apex");if(r&&r.exports){let e=await r.exports.getExceptionBreakpointInfo();console.log("Retrieved exception breakpoint info from language server");let t=[];if(ge.debug.activeDebugSession){let o=await ge.debug.activeDebugSession.customRequest(pe.LIST_EXCEPTION_BREAKPOINTS_REQUEST);o&&o.typerefs&&(t=o.typerefs)}else t=Array.from(tn.keys());let n=gy(e,t),s={placeHolder:Pt.localize("select_exception_text"),matchOnDescription:!0},i=await ge.window.showQuickPick(n,s);if(i){let o={placeHolder:Pt.localize("select_break_option_text"),matchOnDescription:!0},a=await ge.window.showQuickPick(QP,o);if(a){i.breakMode=a.breakMode;let c={exceptionInfo:i};ge.debug.activeDebugSession&&await ge.debug.activeDebugSession.customRequest(pe.EXCEPTION_BREAKPOINT_REQUEST,c),vy(i)}}}},gy=(r,e)=>{let t=[];if(e.length>0)for(let n=r.length-1;n>=0;n--)e.indexOf(r[n].typeref)>=0&&(r[n].breakMode=pe.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS,r[n].description=`$(stop) ${Pt.localize("always_break_text")}`,t.unshift(r[n]),r.splice(n,1));return t.concat(r)},vy=r=>{r.breakMode===pe.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS&&!tn.has(r.typeref)?tn.set(r.typeref,r):r.breakMode===pe.EXCEPTION_BREAKPOINT_BREAK_MODE_NEVER&&tn.has(r.typeref)&&tn.delete(r.typeref)},tA=()=>tn,rA=()=>{let r=ge.workspace.createFileSystemWatcher("**/*.cls");r.onDidChange(t=>ds()),r.onDidCreate(t=>ds()),r.onDidDelete(t=>ds());let e=ge.workspace.createFileSystemWatcher("**/*.trigger");return e.onDidChange(t=>ds()),e.onDidCreate(t=>ds()),e.onDidDelete(t=>ds()),ge.Disposable.from(r,e)},ds=()=>{ge.debug.activeDebugSession&&ge.debug.activeDebugSession.customRequest(pe.HOTSWAP_REQUEST)},nA=()=>{let r=ge.debug.onDidReceiveDebugSessionCustomEvent(async e=>{if(e?.session){if(await df(e.session)!==pe.DEBUGGER_TYPE)return;e.event===pe.SEND_METRIC_EVENT&&(0,pe.isMetric)(e.body)&&di.sendMetricEvent(e)}});return ge.Disposable.from(r)},sA=async r=>{console.log("Apex Debugger Extension Activated");let e=process.hrtime(),t=JP(),n=nA(),s=rA();if(r.subscriptions.push(t,s,n),r.subscriptions.push(ge.debug.registerDebugConfigurationProvider("apex",new Sn)),pi&&pi.exports){if(pi.exports.isCLIInstalled()){console.log("Setting up ISV Debugger environment variables");try{ff(r),await hs()}catch(i){console.error(i),ge.window.showWarningMessage(Pt.localize("isv_debug_config_environment_error"))}}di.initializeService(pi.exports.telemetryService.getReporters(),pi.exports.telemetryService.isTelemetryEnabled())}di.sendExtensionActivationEvent(e)},iA=()=>{console.log("Apex Debugger Extension Deactivated"),di.sendExtensionDeactivationEvent()};0&&(module.exports={activate,deactivate,getDebuggerType,getExceptionBreakpointCache,mergeExceptionBreakpointInfos,updateExceptionBreakpointCache});
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
* @license
* Copyright Google Inc. All Rights Reserved.
*
* Use of this source code is governed by an MIT-style license that can be
* found in the LICENSE file at https://angular.io/license
*/
