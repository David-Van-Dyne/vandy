"use strict";var ko=Object.create;var it=Object.defineProperty;var jo=Object.getOwnPropertyDescriptor;var Ho=Object.getOwnPropertyNames;var Uo=Object.getPrototypeOf,Bo=Object.prototype.hasOwnProperty;var A=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),$o=(s,e)=>{for(var t in e)it(s,t,{get:e[t],enumerable:!0})},Ds=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ho(e))!Bo.call(s,n)&&n!==t&&it(s,n,{get:()=>e[n],enumerable:!(r=jo(e,n))||r.enumerable});return s};var ne=(s,e,t)=>(t=s!=null?ko(Uo(s)):{},Ds(e||!s||!s.__esModule?it(t,"default",{value:s,enumerable:!0}):t,s)),Go=s=>Ds(it({},"__esModule",{value:!0}),s);var ot=A(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.Event=oe.Response=oe.Message=void 0;var ke=class{constructor(e){this.seq=0,this.type=e}};oe.Message=ke;var hr=class extends ke{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};oe.Response=hr;var fr=class extends ke{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}};oe.Event=fr});var Ms=A(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ProtocolServer=void 0;var zo=require("events"),je=ot(),dr=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let r;return r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},at=class s extends zo.EventEmitter{constructor(){super(),this._sendMessage=new dr,this._sequence=1,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",r=>this._handleData(r)),e.on("close",()=>{this._emitEvent(new je.Event("close"))}),e.on("error",r=>{this._emitEvent(new je.Event("error","inStream error: "+(r&&r.message)))}),t.on("error",r=>{this._emitEvent(new je.Event("error","outStream error: "+(r&&r.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,n){let i={command:e};if(t&&Object.keys(t).length>0&&(i.arguments=t),this._send("request",i),n){this._pendingRequests.set(i.seq,n);let o=setTimeout(()=>{clearTimeout(o);let a=this._pendingRequests.get(i.seq);a&&(this._pendingRequests.delete(i.seq),a(new je.Response(i,"timeout")))},r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let r=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}\r
\r
${r}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let r=JSON.parse(t);this.handleMessage(r)}catch(r){this._emitEvent(new je.Event("error","Error handling data: "+(r&&r.message)))}continue}}else{let t=this._rawData.indexOf(s.TWO_CRLF);if(t!==-1){let n=this._rawData.toString("utf8",0,t).split(`\r
`);for(let i=0;i<n.length;i++){let o=n[i].split(/: +/);o[0]=="Content-Length"&&(this._contentLength=+o[1])}this._rawData=this._rawData.slice(t+s.TWO_CRLF.length);continue}}break}}};ut.ProtocolServer=at;at.TWO_CRLF=`\r
\r
`});var Ns=A(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.runDebugAdapter=void 0;var Xo=require("net");function Jo(s){let e=0;if(process.argv.slice(2).forEach(function(r,n,i){let o=/^--server=(\d{4,5})$/.exec(r);o&&(e=parseInt(o[1],10))}),e>0)console.error(`waiting for debug protocol on port ${e}`),Xo.createServer(r=>{console.error(">> accepted connection from client"),r.on("end",()=>{console.error(`>> client connection closed
`)});let n=new s(!1,!0);n.setRunAsServer(!0),n.start(r,r)}).listen(e);else{let r=new s(!1);process.on("SIGTERM",()=>{r.shutdown()}),r.start(process.stdin,process.stdout)}}ct.runDebugAdapter=Jo});var pt=A(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.DebugSession=M.ErrorDestination=M.MemoryEvent=M.InvalidatedEvent=M.ProgressEndEvent=M.ProgressUpdateEvent=M.ProgressStartEvent=M.CapabilitiesEvent=M.LoadedSourceEvent=M.ModuleEvent=M.BreakpointEvent=M.ThreadEvent=M.OutputEvent=M.ExitedEvent=M.TerminatedEvent=M.InitializedEvent=M.ContinuedEvent=M.StoppedEvent=M.CompletionItem=M.Module=M.Breakpoint=M.Variable=M.Thread=M.StackFrame=M.Scope=M.Source=void 0;var Yo=Ms(),W=ot(),Wo=Ns(),Fs=require("url"),gr=class{constructor(e,t,r=0,n,i){this.name=e,this.path=t,this.sourceReference=r,n&&(this.origin=n),i&&(this.adapterData=i)}};M.Source=gr;var mr=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};M.Scope=mr;var br=class{constructor(e,t,r,n=0,i=0){this.id=e,this.source=r,this.line=n,this.column=i,this.name=t}};M.StackFrame=br;var _r=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};M.Thread=_r;var vr=class{constructor(e,t,r=0,n,i){this.name=e,this.value=t,this.variablesReference=r,typeof i=="number"&&(this.namedVariables=i),typeof n=="number"&&(this.indexedVariables=n)}};M.Variable=vr;var yr=class{constructor(e,t,r,n){this.verified=e;let i=this;typeof t=="number"&&(i.line=t),typeof r=="number"&&(i.column=r),n&&(i.source=n)}setId(e){this.id=e}};M.Breakpoint=yr;var Er=class{constructor(e,t){this.id=e,this.name=t}};M.Module=Er;var Sr=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};M.CompletionItem=Sr;var xr=class extends W.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof r=="string"&&(this.body.text=r)}};M.StoppedEvent=xr;var Rr=class extends W.Event{constructor(e,t){super("continued"),this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};M.ContinuedEvent=Rr;var Cr=class extends W.Event{constructor(){super("initialized")}};M.InitializedEvent=Cr;var Or=class extends W.Event{constructor(e){if(super("terminated"),typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};M.TerminatedEvent=Or;var Tr=class extends W.Event{constructor(e){super("exited"),this.body={exitCode:e}}};M.ExitedEvent=Tr;var Ar=class extends W.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},r!==void 0&&(this.body.data=r)}};M.OutputEvent=Ar;var Lr=class extends W.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};M.ThreadEvent=Lr;var wr=class extends W.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};M.BreakpointEvent=wr;var Pr=class extends W.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}};M.ModuleEvent=Pr;var Ir=class extends W.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}};M.LoadedSourceEvent=Ir;var Dr=class extends W.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}};M.CapabilitiesEvent=Dr;var Mr=class extends W.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},typeof r=="string"&&(this.body.message=r)}};M.ProgressStartEvent=Mr;var Nr=class extends W.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};M.ProgressUpdateEvent=Nr;var Fr=class extends W.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};M.ProgressEndEvent=Fr;var Vr=class extends W.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}};M.InvalidatedEvent=Vr;var qr=class extends W.Event{constructor(e,t,r){super("memory"),this.body={memoryReference:e,offset:t,count:r}}};M.MemoryEvent=qr;var fe;(function(s){s[s.User=1]="User",s[s.Telemetry=2]="Telemetry"})(fe=M.ErrorDestination||(M.ErrorDestination={}));var lt=class s extends Yo.ProtocolServer{constructor(e,t){super();let r=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",n=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,Wo.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,r,n,i=fe.User){let o;typeof t=="number"?(o={id:t,format:r},n&&(o.variables=n),i&fe.User&&(o.showUser=!0),i&fe.Telemetry&&(o.sendTelemetry=!0)):o=t,e.success=!1,e.message=s.formatPII(o.format,!0,o.variables),e.body||(e.body={}),e.body.error=o,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){let t=new W.Response(e);try{if(e.command==="initialize"){var r=e.arguments;if(typeof r.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=r.linesStartAt1),typeof r.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=r.columnsStartAt1),r.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,fe.Telemetry);else{let n=t;n.body={},this.initializeRequest(n,r)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(n){this.sendErrorResponse(t,1104,"{_stack}",{_exception:n.message,_stack:n.stack},fe.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,n){this.sendErrorResponse(t,1014,"unrecognized request",null,fe.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?s.uri2path(e):s.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?s.uri2path(e):s.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new Fs.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new Fs.URL(e),r=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(s._formatPIIRegexp,function(n,i){return t&&i.length>0&&i[0]!=="_"?n:r[i]&&r.hasOwnProperty(i)?r[i]:n})}};M.DebugSession=lt;lt._formatPIIRegexp=/{([^}]+)}/g});var js=A(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.InternalLogger=void 0;var Vs=require("fs"),qs=require("path"),Q=dt(),kr=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=Q.LogLevel.Warn,this.disposeCallback=(r,n)=>{this.dispose(),n=n||2,n+=128,process.exit(n)}}async setup(e){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(!qs.isAbsolute(e.logFilePath))this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,Q.LogLevel.Error);else{let t=r=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${r.toString()}
`,Q.LogLevel.Error);try{await Vs.promises.mkdir(qs.dirname(e.logFilePath),{recursive:!0}),this.log(`Verbose logs are written to:
`,Q.LogLevel.Warn),this.log(e.logFilePath+`
`,Q.LogLevel.Warn),this._logFileStream=Vs.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",r=>{t(r)})}catch(r){t(r)}}}logDateTime(){let e=new Date,r=e.getUTCFullYear()+`-${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+ks();this.log(r+`
`,Q.LogLevel.Verbose,!1)}setupShutdownListeners(){process.on("beforeExit",this.beforeExitCallback),process.on("SIGTERM",this.disposeCallback),process.on("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,r=!0){if(this._minLogLevel!==Q.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let n=t===Q.LogLevel.Error?console.error:t===Q.LogLevel.Warn?console.warn:null;n&&n((0,Q.trimLastNewline)(e))}t===Q.LogLevel.Error&&(e=`[${Q.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+ks()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let r=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",r&&(e=e+`
`)}if(this._logCallback){let r=new Q.LogOutputEvent(e,t);this._logCallback(r)}}};ft.InternalLogger=kr;function ks(){let s=new Date,e=ht(2,String(s.getUTCHours())),t=ht(2,String(s.getUTCMinutes())),r=ht(2,String(s.getUTCSeconds())),n=ht(3,String(s.getUTCMilliseconds()));return e+":"+t+":"+r+"."+n+" UTC"}function ht(s,e){return e.length>=s?e:String("0".repeat(s)+e).slice(-s)}});var dt=A(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.trimLastNewline=Z.LogOutputEvent=Z.logger=Z.Logger=Z.LogLevel=void 0;var Ko=js(),Qo=pt(),ae;(function(s){s[s.Verbose=0]="Verbose",s[s.Log=1]="Log",s[s.Warn=2]="Warn",s[s.Error=3]="Error",s[s.Stop=4]="Stop"})(ae=Z.LogLevel||(Z.LogLevel={}));var gt=class{constructor(){this._pendingLogQ=[]}log(e,t=ae.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,ae.Verbose)}warn(e){this.log(e,ae.Warn)}error(e){this.log(e,ae.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=ae.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){let n=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let i={consoleMinLogLevel:e,logFilePath:n,prependTimestamp:r};this._currentLogger.setup(i).then(()=>{if(this._pendingLogQ){let o=this._pendingLogQ;this._pendingLogQ=null,o.forEach(a=>this._write(a.msg,a.level))}})}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new Ko.InternalLogger(e,r),this._logFilePathFromInit=t}};Z.Logger=gt;Z.logger=new gt;var jr=class extends Qo.OutputEvent{constructor(e,t){let r=t===ae.Error?"stderr":t===ae.Warn?"console":"stdout";super(e,r)}};Z.LogOutputEvent=jr;function Zo(s){return s.replace(/(\n|\r\n)$/,"")}Z.trimLastNewline=Zo});var Bs=A(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.LoggingDebugSession=void 0;var Us=dt(),_e=Us.logger,Hs=pt(),Hr=class extends Hs.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",n=>{_e.error(n.body)})}start(e,t){super.start(e,t),_e.init(r=>this.sendEvent(r),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof Us.LogOutputEvent)){let t=e;e instanceof Hs.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),_e.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,n){_e.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,n)}sendResponse(e){_e.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){_e.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};mt.LoggingDebugSession=Hr});var $s=A(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.Handles=void 0;var Ur=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};bt.Handles=Ur});var He=A(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.Handles=P.Response=P.Event=P.ErrorDestination=P.CompletionItem=P.Module=P.Source=P.Breakpoint=P.Variable=P.Scope=P.StackFrame=P.Thread=P.MemoryEvent=P.InvalidatedEvent=P.ProgressEndEvent=P.ProgressUpdateEvent=P.ProgressStartEvent=P.CapabilitiesEvent=P.LoadedSourceEvent=P.ModuleEvent=P.BreakpointEvent=P.ThreadEvent=P.OutputEvent=P.ContinuedEvent=P.StoppedEvent=P.ExitedEvent=P.TerminatedEvent=P.InitializedEvent=P.logger=P.Logger=P.LoggingDebugSession=P.DebugSession=void 0;var G=pt();Object.defineProperty(P,"DebugSession",{enumerable:!0,get:function(){return G.DebugSession}});Object.defineProperty(P,"InitializedEvent",{enumerable:!0,get:function(){return G.InitializedEvent}});Object.defineProperty(P,"TerminatedEvent",{enumerable:!0,get:function(){return G.TerminatedEvent}});Object.defineProperty(P,"ExitedEvent",{enumerable:!0,get:function(){return G.ExitedEvent}});Object.defineProperty(P,"StoppedEvent",{enumerable:!0,get:function(){return G.StoppedEvent}});Object.defineProperty(P,"ContinuedEvent",{enumerable:!0,get:function(){return G.ContinuedEvent}});Object.defineProperty(P,"OutputEvent",{enumerable:!0,get:function(){return G.OutputEvent}});Object.defineProperty(P,"ThreadEvent",{enumerable:!0,get:function(){return G.ThreadEvent}});Object.defineProperty(P,"BreakpointEvent",{enumerable:!0,get:function(){return G.BreakpointEvent}});Object.defineProperty(P,"ModuleEvent",{enumerable:!0,get:function(){return G.ModuleEvent}});Object.defineProperty(P,"LoadedSourceEvent",{enumerable:!0,get:function(){return G.LoadedSourceEvent}});Object.defineProperty(P,"CapabilitiesEvent",{enumerable:!0,get:function(){return G.CapabilitiesEvent}});Object.defineProperty(P,"ProgressStartEvent",{enumerable:!0,get:function(){return G.ProgressStartEvent}});Object.defineProperty(P,"ProgressUpdateEvent",{enumerable:!0,get:function(){return G.ProgressUpdateEvent}});Object.defineProperty(P,"ProgressEndEvent",{enumerable:!0,get:function(){return G.ProgressEndEvent}});Object.defineProperty(P,"InvalidatedEvent",{enumerable:!0,get:function(){return G.InvalidatedEvent}});Object.defineProperty(P,"MemoryEvent",{enumerable:!0,get:function(){return G.MemoryEvent}});Object.defineProperty(P,"Thread",{enumerable:!0,get:function(){return G.Thread}});Object.defineProperty(P,"StackFrame",{enumerable:!0,get:function(){return G.StackFrame}});Object.defineProperty(P,"Scope",{enumerable:!0,get:function(){return G.Scope}});Object.defineProperty(P,"Variable",{enumerable:!0,get:function(){return G.Variable}});Object.defineProperty(P,"Breakpoint",{enumerable:!0,get:function(){return G.Breakpoint}});Object.defineProperty(P,"Source",{enumerable:!0,get:function(){return G.Source}});Object.defineProperty(P,"Module",{enumerable:!0,get:function(){return G.Module}});Object.defineProperty(P,"CompletionItem",{enumerable:!0,get:function(){return G.CompletionItem}});Object.defineProperty(P,"ErrorDestination",{enumerable:!0,get:function(){return G.ErrorDestination}});var ea=Bs();Object.defineProperty(P,"LoggingDebugSession",{enumerable:!0,get:function(){return ea.LoggingDebugSession}});var Gs=dt();P.Logger=Gs;var zs=ot();Object.defineProperty(P,"Event",{enumerable:!0,get:function(){return zs.Event}});Object.defineProperty(P,"Response",{enumerable:!0,get:function(){return zs.Response}});var ta=$s();Object.defineProperty(P,"Handles",{enumerable:!0,get:function(){return ta.Handles}});var ra=Gs.logger;P.logger=ra});var gn=A(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0})});var mn=A(de=>{"use strict";var sa=de&&de.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),na=de&&de.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sa(e,s,t)};Object.defineProperty(de,"__esModule",{value:!0});na(gn(),de)});var bn=A($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.TELEMETRY_HEADER=$.SF_CONFIG_ISV_DEBUGGER_URL=$.SF_CONFIG_ISV_DEBUGGER_SID=$.SF_COMMAND=$.MISSING_LABEL_MSG=$.LOCALE_JA=$.DEFAULT_LOCALE=$.ENV_SF_ORG_INSTANCE_URL=$.ENV_HTTPS_PROXY=$.ENV_HTTP_PROXY=$.ENV_SF_TARGET_ORG=$.DEFAULT_CONNECTION_TIMEOUT_MS=$.CLIENT_ID=void 0;$.CLIENT_ID="sfdx-vscode";$.DEFAULT_CONNECTION_TIMEOUT_MS=2e4;$.ENV_SF_TARGET_ORG="SF_TARGET_ORG";$.ENV_HTTP_PROXY="HTTP_PROXY";$.ENV_HTTPS_PROXY="HTTPS_PROXY";$.ENV_SF_ORG_INSTANCE_URL="SF_ORG_INSTANCE_URL";$.DEFAULT_LOCALE="en";$.LOCALE_JA="ja";$.MISSING_LABEL_MSG="!!! MISSING LABEL !!!";$.SF_COMMAND="sf";$.SF_CONFIG_ISV_DEBUGGER_SID="org-isv-debugger-sid";$.SF_CONFIG_ISV_DEBUGGER_URL="org-isv-debugger-url";$.TELEMETRY_HEADER="salesforce-vscode-extensions"});var me=A(ge=>{"use strict";var ia=ge&&ge.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),oa=ge&&ge.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ia(e,s,t)};Object.defineProperty(ge,"__esModule",{value:!0});oa(bn(),ge)});var _n=A(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.Localization=void 0;var Xr=class{constructor(e){this.delegate=e}localize(e,...t){return this.delegate.localize(e,...t)}};Ct.Localization=Xr});var vn=A(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.Message=void 0;var aa=require("node:util"),ua=me(),Jr=class{constructor(e,t){this.messages=e,this.delegate=t}localize(e,...t){let r=this.getLabel(e);if(!r)return console.warn(`Missing label for key: ${e}`),r=`${ua.MISSING_LABEL_MSG} ${e}`,t.length>=1&&t.forEach(i=>{r+=` (${i})`}),r;let n=t;if(t.length>=1){let i=r.match(/%[sdifj%]/g),o=i?i.filter(a=>a!=="%%").length:0;return t.length!==o&&(console.log(`Arguments do not match for label '${e}', got ${t.length} but want ${o}`),t.length>o&&(n=t.slice(0,-(t.length-o)))),(0,aa.format)(r,...n)}return r}getLabel(e){return this.messages[e]?this.messages[e]:this.delegate?this.delegate.messages[e]:void 0}};Ot.Message=Jr});var Sn=A(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.LocalizationService=ue.MessageBundleManager=ue.LocalizationConfig=void 0;var $e=me(),yn=_n(),Yr=vn(),En=[$e.DEFAULT_LOCALE,"ja"],ca=s=>typeof s!="string"?!1:En.includes(s),Tt=class s{constructor(){}static getInstance(e){return s.instance??(s.instance=new s),s.instance}isLocaleSupported(e){return ca(e)}getDefaultLocale(){return $e.DEFAULT_LOCALE}};ue.LocalizationConfig=Tt;var Ge=class s{constructor(){this.baseMessages=null,this.localeMessages=new Map,this.messageBundles=new Map}static getInstance(e){let t=s.instances.get(e);if(!t){let r=new s;return s.instances.set(e,r),r}return t}registerMessageBundle(e,t){this.messageBundles.has(e)||this.messageBundles.set(e,[]);let r=this.messageBundles.get(e);if(r){r.push(t),this.rebuildMessages(e);let n=ze.instances.get(e);n&&n.refreshLocalization()}}rebuildMessages(e){let t=this.messageBundles.get(e)||[],r=t.find(i=>i.type==="base"),n=t.filter(i=>i.type==="locale");r&&(this.baseMessages=new Yr.Message(r.messages),n.forEach(i=>{let o=i.messages._locale,a=i.locale||(this.isValidLocale(o)?o:$e.DEFAULT_LOCALE);this.isValidLocale(a)&&this.localeMessages.set(a,new Yr.Message(i.messages,this.baseMessages))}))}isValidLocale(e){return typeof e!="string"?!1:En.includes(e)}loadMessageBundle(e){if(!this.baseMessages)throw new Error("No base messages registered");let t=e?.locale||$e.DEFAULT_LOCALE;return Tt.getInstance("default").isLocaleSupported(t)?this.localeMessages.get(t)||this.baseMessages:(console.error(`Cannot find ${t}, defaulting to ${$e.DEFAULT_LOCALE}`),this.baseMessages)}};ue.MessageBundleManager=Ge;Ge.instances=new Map;var ze=class s{constructor(e){this._nls=null,this.instanceName=e,this.messageBundleManager=Ge.getInstance(e)}static getInstance(e){let t=s.instances.get(e);if(!t){let r=new s(e);return s.instances.set(e,r),r}return t}get nls(){if(!this._nls)try{let e=this.messageBundleManager.loadMessageBundle();this._nls=new yn.Localization(e)}catch{console.warn(`LocalizationService: No messages registered for instance '${this.instanceName}', using fallback localization`);let t=new Yr.Message({});this._nls=new yn.Localization(t)}return this._nls}localize(e,...t){return this.nls.localize(e,...t)}refreshLocalization(){this._nls=null}};ue.LocalizationService=ze;ze.instances=new Map});var xn=A(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.LocalizationService=void 0;var la=Sn();Object.defineProperty(At,"LocalizationService",{enumerable:!0,get:function(){return la.LocalizationService}})});var Rn=A(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.extractJsonObject=void 0;var pa=s=>{let e=s.substring(s.indexOf("{"),s.lastIndexOf("}")+1);return JSON.parse(e)};Lt.extractJsonObject=pa});var Cn=A(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.stripAnsiInJson=void 0;var ha=(s,e)=>e?s.replaceAll(fa(),""):s;wt.stripAnsiInJson=ha;var fa=({onlyFirst:s=!1}={})=>{let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(e,s?void 0:"g")}});var Wr=A(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.stripAnsiInJson=Re.extractJsonObject=void 0;var da=Rn();Object.defineProperty(Re,"extractJsonObject",{enumerable:!0,get:function(){return da.extractJsonObject}});var ga=Cn();Object.defineProperty(Re,"stripAnsiInJson",{enumerable:!0,get:function(){return ga.stripAnsiInJson}})});var On=A(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.BaseCommand=void 0;var Kr=class{constructor(e){this.queryString=e}getQueryString(){return this.queryString}};Pt.BaseCommand=Kr});var An=A(Tn=>{(()=>{var s={747:(i,o,a)=>{"use strict";var f,l=Object.defineProperty,v=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,V={};((c,p)=>{for(var m in p)l(c,m,{get:p[m],enumerable:!0})})(V,{config:()=>F,t:()=>C}),i.exports=(f=V,((c,p,m,E)=>{if(p&&typeof p=="object"||typeof p=="function")for(let w of I(p))R.call(c,w)||w===void 0||l(c,w,{get:()=>p[w],enumerable:!(E=v(p,w))||E.enumerable});return c})(l({},"__esModule",{value:!0}),f));var y,L=a(896),q=a(943);function F(c){if("contents"in c)y=typeof c.contents=="string"?JSON.parse(c.contents):c.contents;else if("fsPath"in c){let m=(p=c.fsPath,(0,L.readFileSync)(p,"utf8")),E=JSON.parse(m);y=D(E)?E.contents.bundle:E}else{var p;if(c.uri){let m=c.uri;return typeof c.uri=="string"&&(m=new URL(c.uri)),new Promise((E,w)=>{(async function(h){if(h.protocol==="file:")return await(0,q.readFile)(h,"utf8");if(h.protocol==="http:"||h.protocol==="https:"){let u=await fetch(h.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!u.ok){let _=`Unexpected ${u.status} response while trying to read ${h}`;try{_+=`: ${await u.text()}`}catch{}throw new Error(_)}return await u.text()}throw new Error("Unsupported protocol")})(m).then(h=>{try{let u=JSON.parse(h);y=D(u)?u.contents.bundle:u,E()}catch(u){w(u)}}).catch(h=>{w(h)})})}}}function C(...c){let p=c[0],m,E,w;if(typeof p=="string")m=p,E=p,c.splice(0,1),w=c&&typeof c[0]=="object"?c[0]:c;else{if(p instanceof Array){let u=c.slice(1);if(p.length!==u.length+1)throw new Error("expected a string as the first argument to l10n.t");let _=p[0];for(let S=1;S<p.length;S++)_+=`{${S-1}}`+p[S];return C(_,...u)}E=p.message,m=E,p.comment&&p.comment.length>0&&(m+=`/${Array.isArray(p.comment)?p.comment.join(""):p.comment}`),w=p.args??{}}let h=y?.[m];return h?typeof h=="string"?U(h,w):h.comment?U(h.message,w):U(E,w):U(E,w)}var N=/{([^}]+)}/g;function U(c,p){return Object.keys(p).length===0?c:c.replace(N,(m,E)=>p[E]??m)}function D(c){return!(typeof c?.contents?.bundle!="object"||typeof c?.version!="string")}},544:function(i,o,a){"use strict";var f=this&&this.__createBinding||(Object.create?function(y,L,q,F){F===void 0&&(F=q);var C=Object.getOwnPropertyDescriptor(L,q);C&&!("get"in C?!L.__esModule:C.writable||C.configurable)||(C={enumerable:!0,get:function(){return L[q]}}),Object.defineProperty(y,F,C)}:function(y,L,q,F){F===void 0&&(F=q),y[F]=L[q]}),l=this&&this.__setModuleDefault||(Object.create?function(y,L){Object.defineProperty(y,"default",{enumerable:!0,value:L})}:function(y,L){y.default=L}),v=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var L={};if(y!=null)for(var q in y)q!=="default"&&Object.prototype.hasOwnProperty.call(y,q)&&f(L,y,q);return l(L,y),L};Object.defineProperty(o,"__esModule",{value:!0}),o.req=o.json=o.toBuffer=void 0;let I=v(a(611)),R=v(a(692));async function V(y){let L=0,q=[];for await(let F of y)L+=F.length,q.push(F);return Buffer.concat(q,L)}o.toBuffer=V,o.json=async function(y){let L=(await V(y)).toString("utf8");try{return JSON.parse(L)}catch(q){let F=q;throw F.message+=` (input: ${L})`,F}},o.req=function(y,L={}){let q=((typeof y=="string"?y:y.href).startsWith("https:")?R:I).request(y,L),F=new Promise((C,N)=>{q.once("response",C).once("error",N).end()});return q.then=F.then.bind(F),q}},917:function(i,o,a){"use strict";var f=this&&this.__createBinding||(Object.create?function(F,C,N,U){U===void 0&&(U=N);var D=Object.getOwnPropertyDescriptor(C,N);D&&!("get"in D?!C.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return C[N]}}),Object.defineProperty(F,U,D)}:function(F,C,N,U){U===void 0&&(U=N),F[U]=C[N]}),l=this&&this.__setModuleDefault||(Object.create?function(F,C){Object.defineProperty(F,"default",{enumerable:!0,value:C})}:function(F,C){F.default=C}),v=this&&this.__importStar||function(F){if(F&&F.__esModule)return F;var C={};if(F!=null)for(var N in F)N!=="default"&&Object.prototype.hasOwnProperty.call(F,N)&&f(C,F,N);return l(C,F),C},I=this&&this.__exportStar||function(F,C){for(var N in F)N==="default"||Object.prototype.hasOwnProperty.call(C,N)||f(C,F,N)};Object.defineProperty(o,"__esModule",{value:!0}),o.Agent=void 0;let R=v(a(278)),V=v(a(611)),y=a(692);I(a(544),o);let L=Symbol("AgentBaseInternalState");class q extends V.Agent{constructor(C){super(C),this[L]={}}isSecureEndpoint(C){if(C){if(typeof C.secureEndpoint=="boolean")return C.secureEndpoint;if(typeof C.protocol=="string")return C.protocol==="https:"}let{stack:N}=new Error;return typeof N=="string"&&N.split(`
`).some(U=>U.indexOf("(https.js:")!==-1||U.indexOf("node:https:")!==-1)}incrementSockets(C){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[C]||(this.sockets[C]=[]);let N=new R.Socket({writable:!1});return this.sockets[C].push(N),this.totalSocketCount++,N}decrementSockets(C,N){if(!this.sockets[C]||N===null)return;let U=this.sockets[C],D=U.indexOf(N);D!==-1&&(U.splice(D,1),this.totalSocketCount--,U.length===0&&delete this.sockets[C])}getName(C){return(typeof C.secureEndpoint=="boolean"?C.secureEndpoint:this.isSecureEndpoint(C))?y.Agent.prototype.getName.call(this,C):super.getName(C)}createSocket(C,N,U){let D={...N,secureEndpoint:this.isSecureEndpoint(N)},c=this.getName(D),p=this.incrementSockets(c);Promise.resolve().then(()=>this.connect(C,D)).then(m=>{if(this.decrementSockets(c,p),m instanceof V.Agent)return m.addRequest(C,D);this[L].currentSocket=m,super.createSocket(C,N,U)},m=>{this.decrementSockets(c,p),U(m)})}createConnection(){let C=this[L].currentSocket;if(this[L].currentSocket=void 0,!C)throw new Error("No socket was returned in the `connect()` function");return C}get defaultPort(){return this[L].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(C){this[L]&&(this[L].defaultPort=C)}get protocol(){return this[L].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(C){this[L]&&(this[L].protocol=C)}}o.Agent=q},645:function(i,o,a){"use strict";var f=this&&this.__createBinding||(Object.create?function(D,c,p,m){m===void 0&&(m=p);var E=Object.getOwnPropertyDescriptor(c,p);E&&!("get"in E?!c.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(D,m,E)}:function(D,c,p,m){m===void 0&&(m=p),D[m]=c[p]}),l=this&&this.__setModuleDefault||(Object.create?function(D,c){Object.defineProperty(D,"default",{enumerable:!0,value:c})}:function(D,c){D.default=c}),v=this&&this.__importStar||function(D){if(D&&D.__esModule)return D;var c={};if(D!=null)for(var p in D)p!=="default"&&Object.prototype.hasOwnProperty.call(D,p)&&f(c,D,p);return l(c,D),c},I=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(o,"__esModule",{value:!0}),o.HttpProxyAgent=void 0;let R=v(a(278)),V=v(a(756)),y=I(a(150)),L=a(434),q=a(917),F=a(16),C=(0,y.default)("http-proxy-agent");class N extends q.Agent{constructor(c,p){super(p),this.proxy=typeof c=="string"?new F.URL(c):c,this.proxyHeaders=p?.headers??{},C("Creating new HttpProxyAgent instance: %o",this.proxy.href);let m=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),E=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...p?U(p,"headers"):null,host:m,port:E}}addRequest(c,p){c._header=null,this.setRequestProps(c,p),super.addRequest(c,p)}setRequestProps(c,p){let{proxy:m}=this,E=`${p.secureEndpoint?"https:":"http:"}//${c.getHeader("host")||"localhost"}`,w=new F.URL(c.path,E);p.port!==80&&(w.port=String(p.port)),c.path=String(w);let h=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(m.username||m.password){let u=`${decodeURIComponent(m.username)}:${decodeURIComponent(m.password)}`;h["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}h["Proxy-Connection"]||(h["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(h)){let _=h[u];_&&c.setHeader(u,_)}}async connect(c,p){let m,E,w;return c._header=null,c.path.includes("://")||this.setRequestProps(c,p),C("Regenerating stored HTTP header string for request"),c._implicitHeader(),c.outputData&&c.outputData.length>0&&(C("Patching connection write() output buffer with updated header"),m=c.outputData[0].data,E=m.indexOf(`\r
\r
`)+4,c.outputData[0].data=c._header+m.substring(E),C("Output buffer: %o",c.outputData[0].data)),this.proxy.protocol==="https:"?(C("Creating `tls.Socket`: %o",this.connectOpts),w=V.connect(this.connectOpts)):(C("Creating `net.Socket`: %o",this.connectOpts),w=R.connect(this.connectOpts)),await(0,L.once)(w,"connect"),w}}function U(D,...c){let p={},m;for(m in D)c.includes(m)||(p[m]=D[m]);return p}N.protocols=["http","https"],o.HttpProxyAgent=N},288:function(i,o,a){"use strict";var f=this&&this.__createBinding||(Object.create?function(p,m,E,w){w===void 0&&(w=E);var h=Object.getOwnPropertyDescriptor(m,E);h&&!("get"in h?!m.__esModule:h.writable||h.configurable)||(h={enumerable:!0,get:function(){return m[E]}}),Object.defineProperty(p,w,h)}:function(p,m,E,w){w===void 0&&(w=E),p[w]=m[E]}),l=this&&this.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),v=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var E in p)E!=="default"&&Object.prototype.hasOwnProperty.call(p,E)&&f(m,p,E);return l(m,p),m},I=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(o,"__esModule",{value:!0}),o.HttpsProxyAgent=void 0;let R=v(a(278)),V=v(a(756)),y=I(a(613)),L=I(a(150)),q=a(917),F=a(16),C=a(868),N=(0,L.default)("https-proxy-agent");class U extends q.Agent{constructor(m,E){super(E),this.options={path:void 0},this.proxy=typeof m=="string"?new F.URL(m):m,this.proxyHeaders=E?.headers??{},N("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let w=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),h=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...E?c(E,"headers"):null,host:w,port:h}}async connect(m,E){let{proxy:w}=this;if(!E.host)throw new TypeError('No "host" provided');let h;if(w.protocol==="https:"){N("Creating `tls.Socket`: %o",this.connectOpts);let T=this.connectOpts.servername||this.connectOpts.host;h=V.connect({...this.connectOpts,servername:T})}else N("Creating `net.Socket`: %o",this.connectOpts),h=R.connect(this.connectOpts);let u=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},_=R.isIPv6(E.host)?`[${E.host}]`:E.host,S=`CONNECT ${_}:${E.port} HTTP/1.1\r
`;if(w.username||w.password){let T=`${decodeURIComponent(w.username)}:${decodeURIComponent(w.password)}`;u["Proxy-Authorization"]=`Basic ${Buffer.from(T).toString("base64")}`}u.Host=`${_}:${E.port}`,u["Proxy-Connection"]||(u["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let T of Object.keys(u))S+=`${T}: ${u[T]}\r
`;let d=(0,C.parseProxyResponse)(h);h.write(`${S}\r
`);let{connect:g,buffered:b}=await d;if(m.emit("proxyConnect",g),this.emit("proxyConnect",g,m),g.statusCode===200){if(m.once("socket",D),E.secureEndpoint){N("Upgrading socket connection to TLS");let T=E.servername||E.host;return V.connect({...c(E,"host","path","port"),socket:h,servername:T})}return h}h.destroy();let O=new R.Socket({writable:!1});return O.readable=!0,m.once("socket",T=>{N("Replaying proxy buffer for failed request"),(0,y.default)(T.listenerCount("data")>0),T.push(b),T.push(null)}),O}}function D(p){p.resume()}function c(p,...m){let E={},w;for(w in p)m.includes(w)||(E[w]=p[w]);return E}U.protocols=["http","https"],o.HttpsProxyAgent=U},868:function(i,o,a){"use strict";var f=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(o,"__esModule",{value:!0}),o.parseProxyResponse=void 0;let l=(0,f(a(150)).default)("https-proxy-agent:parse-proxy-response");o.parseProxyResponse=function(v){return new Promise((I,R)=>{let V=0,y=[];function L(){let N=v.read();N?function(U){y.push(U),V+=U.length;let D=Buffer.concat(y,V),c=D.indexOf(`\r
\r
`);if(c===-1)return l("have not received end of HTTP headers yet..."),void L();let p=D.slice(0,c).toString("ascii").split(`\r
`),m=p.shift();if(!m)return v.destroy(),R(new Error("No header received from proxy CONNECT response"));let E=m.split(" "),w=+E[1],h=E.slice(2).join(" "),u={};for(let _ of p){if(!_)continue;let S=_.indexOf(":");if(S===-1)return v.destroy(),R(new Error(`Invalid header from proxy CONNECT response: "${_}"`));let d=_.slice(0,S).toLowerCase(),g=_.slice(S+1).trimStart(),b=u[d];typeof b=="string"?u[d]=[b,g]:Array.isArray(b)?b.push(g):u[d]=g}l("got proxy server response: %o %o",m,u),q(),I({connect:{statusCode:w,statusText:h,headers:u},buffered:D})}(N):v.once("readable",L)}function q(){v.removeListener("end",F),v.removeListener("error",C),v.removeListener("readable",L)}function F(){q(),l("onend"),R(new Error("Proxy connection ended before receiving CONNECT response"))}function C(N){q(),l("onerror %o",N),R(N)}v.on("error",C),v.on("end",F),L()})}},580:function(i,o,a){"use strict";var f,l=this&&this.__extends||(f=function(c,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,E){m.__proto__=E}||function(m,E){for(var w in E)Object.prototype.hasOwnProperty.call(E,w)&&(m[w]=E[w])},f(c,p)},function(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function m(){this.constructor=c}f(c,p),c.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}),v=this&&this.__assign||function(){return v=Object.assign||function(c){for(var p,m=1,E=arguments.length;m<E;m++)for(var w in p=arguments[m])Object.prototype.hasOwnProperty.call(p,w)&&(c[w]=p[w]);return c},v.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.xhr=o.configure=void 0,o.getErrorStatusDescription=function(c){if(!(c<400))switch(c){case 400:return y.t("Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return y.t("Unauthorized. The server is refusing to respond.");case 403:return y.t("Forbidden. The server is refusing to respond.");case 404:return y.t("Not Found. The requested location could not be found.");case 405:return y.t("Method not allowed. A request was made using a request method not supported by that location.");case 406:return y.t("Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return y.t("Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return y.t("Request Timeout. The server timed out waiting for the request.");case 409:return y.t("Conflict. The request could not be completed because of a conflict in the request.");case 410:return y.t("Gone. The requested page is no longer available.");case 411:return y.t('Length Required. The "Content-Length" is not defined.');case 412:return y.t("Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return y.t("Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return y.t("Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return y.t("Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return y.t("Internal Server Error.");case 501:return y.t("Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 502:return y.t("Bad Gateway. The upstream server did not respond.");case 503:return y.t("Service Unavailable. The server is currently unavailable (overloaded or down).");default:return y.t("HTTP status code {0}",c)}};var I=a(611),R=a(692),V=a(16),y=a(747),L=a(106),q=a(645),F=a(288),C=void 0,N=!0;function U(c){var p;return new Promise(function(m,E){var w=(0,V.parse)(c.url),h={hostname:w.hostname,agent:!!c.agent&&c.agent,port:w.port?parseInt(w.port):w.protocol==="https:"?443:80,path:w.path,method:c.type||"GET",headers:c.headers,rejectUnauthorized:typeof c.strictSSL!="boolean"||c.strictSSL};c.user&&c.password&&(h.auth=c.user+":"+c.password);var u=function(_){if(_.statusCode>=300&&_.statusCode<400&&c.followRedirects&&c.followRedirects>0&&_.headers.location){var S=_.headers.location;S.startsWith("/")&&(S=(0,V.format)({protocol:w.protocol,hostname:w.hostname,port:w.port,pathname:S})),m(U(function(d){for(var g=[],b=1;b<arguments.length;b++)g[b-1]=arguments[b];return g.forEach(function(O){return Object.keys(O).forEach(function(T){return d[T]=O[T]})}),d}({},c,{url:S,followRedirects:c.followRedirects-1})))}else m({req:p,res:_})};(p=w.protocol==="https:"?R.request(h,u):I.request(h,u)).on("error",E),c.timeout&&p.setTimeout(c.timeout),c.data&&p.write(c.data),p.end(),c.token&&(c.token.isCancellationRequested&&p.destroy(new D),c.token.onCancellationRequested(function(){p.destroy(new D)}))})}o.configure=function(c,p){C=c,N=p},o.xhr=function(c){return typeof(c=v({},c)).strictSSL!="boolean"&&(c.strictSSL=N),c.agent||(c.agent=function(p,m){var E;m===void 0&&(m={});var w=(0,V.parse)(p),h=m.proxyUrl||function(u){return u.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:u.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(w);return h&&/^https?:/.test(h)?w.protocol==="http:"?new q.HttpProxyAgent(h):new F.HttpsProxyAgent(h,{rejectUnauthorized:(E=m.strictSSL)===null||E===void 0||E}):null}(c.url,{proxyUrl:C,strictSSL:N})),typeof c.followRedirects!="number"&&(c.followRedirects=5),U(c).then(function(p){return new Promise(function(m,E){var w,h,u=p.res,_=u,S=!1,d=u.headers&&u.headers["content-encoding"];if(d&&(w=c.type,h=p.res.statusCode,!(w==="HEAD"||h>=100&&h<200||h===204||h===304))){var g={flush:L.constants.Z_SYNC_FLUSH,finishFlush:L.constants.Z_SYNC_FLUSH};if(d==="gzip"){var b=L.createGunzip(g);u.pipe(b),_=b}else if(d==="deflate"){var O=L.createInflate(g);u.pipe(O),_=O}}var T=[];_.on("data",function(x){return T.push(x)}),_.on("end",function(){if(!S){if(S=!0,c.followRedirects>0&&(u.statusCode>=300&&u.statusCode<=303||u.statusCode===307)){var x=u.headers.location;if(x.startsWith("/")){var k=(0,V.parse)(c.url);x=(0,V.format)({protocol:k.protocol,hostname:k.hostname,port:k.port,pathname:x})}if(x){var H={type:c.type,url:x,user:c.user,password:c.password,headers:c.headers,timeout:c.timeout,followRedirects:c.followRedirects-1,data:c.data,token:c.token};return void(0,o.xhr)(H).then(m,E)}}var X=Buffer.concat(T),B={responseText:X.toString(),body:X,status:u.statusCode,headers:u.headers||{}};u.statusCode>=200&&u.statusCode<300||u.statusCode===1223?m(B):E(B)}}),_.on("error",function(x){var k;k=D.is(x)?x:{responseText:y.t("Unable to access {0}. Error: {1}",c.url,x.message),body:Buffer.concat(T),status:500,headers:{}},S=!0,E(k)}),c.token&&(c.token.isCancellationRequested&&_.destroy(new D),c.token.onCancellationRequested(function(){_.destroy(new D)}))})},function(p){var m;return m=D.is(p)?p:{responseText:c.agent?y.t("Unable to connect to {0} through a proxy. Error: {1}",c.url,p.message):y.t("Unable to connect to {0}. Error: {1}",c.url,p.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(m)})};var D=function(c){function p(){var m=c.call(this,"The user aborted a request")||this;return m.name="AbortError",Object.setPrototypeOf(m,p.prototype),m}return l(p,c),p.is=function(m){return m instanceof p},p}(Error)},150:(i,o)=>{function a(){}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(f){return a}},613:i=>{"use strict";i.exports=require("assert")},434:i=>{"use strict";i.exports=require("events")},896:i=>{"use strict";i.exports=require("fs")},943:i=>{"use strict";i.exports=require("fs/promises")},611:i=>{"use strict";i.exports=require("http")},692:i=>{"use strict";i.exports=require("https")},278:i=>{"use strict";i.exports=require("net")},756:i=>{"use strict";i.exports=require("tls")},16:i=>{"use strict";i.exports=require("url")},106:i=>{"use strict";i.exports=require("zlib")}},e={},t=function i(o){var a=e[o];if(a!==void 0)return a.exports;var f=e[o]={exports:{}};return s[o].call(f.exports,f,f.exports,i),f.exports}(580),r=Tn;for(var n in t)r[n]=t[n];t.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})()});var wn=A(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.RequestService=Ce.RestHttpMethodEnum=void 0;var Ln=An(),be=me(),Qr;(function(s){s.Delete="DELETE",s.Get="GET",s.Post="POST"})(Qr||(Ce.RestHttpMethodEnum=Qr={}));var Zr=class{constructor(){this._proxyStrictSSL=!1,this._connectionTimeoutMs=be.DEFAULT_CONNECTION_TIMEOUT_MS}getEnvVars(){let e=Object.assign({},process.env),t=this.proxyUrl;t&&(e[be.ENV_HTTP_PROXY]=t,e[be.ENV_HTTPS_PROXY]=t);let r=this.instanceUrl;r&&(e[be.ENV_SF_ORG_INSTANCE_URL]=r);let n=this.accessToken;return n&&(e[be.ENV_SF_TARGET_ORG]=n),e}get instanceUrl(){return this._instanceUrl}set instanceUrl(e){this._instanceUrl=e}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e}get proxyUrl(){return this._proxyUrl}set proxyUrl(e){this._proxyUrl=e}get proxyStrictSSL(){return this._proxyStrictSSL}set proxyStrictSSL(e){this._proxyStrictSSL=e}get proxyAuthorization(){return this._proxyAuthorization}set proxyAuthorization(e){this._proxyAuthorization=e}get connectionTimeoutMs(){return this._connectionTimeoutMs||be.DEFAULT_CONNECTION_TIMEOUT_MS}set connectionTimeoutMs(e){this._connectionTimeoutMs=e}async execute(e,t=Qr.Post){this.proxyUrl&&(0,Ln.configure)(this._proxyUrl,this._proxyStrictSSL);let r=[this.instanceUrl,e.getCommandUrl()],n=e.getQueryString(),i=n?r.join("/").concat("?",n):r.join("/"),o=e.getRequest(),a={type:t,url:i,timeout:this.connectionTimeoutMs,headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/json",Authorization:`OAuth ${this.accessToken}`,"Content-Length":o?String(Buffer.byteLength(o,"utf-8")):"0","Sforce-Call-Options":`client=${be.CLIENT_ID}`},data:o};this.proxyAuthorization&&a.headers&&(a.headers["Proxy-Authorization"]=this.proxyAuthorization);try{let f=await this.sendRequest(a);return Promise.resolve(f.responseText)}catch(f){let l=f;return Promise.reject(l.responseText)}}async sendRequest(e){return(0,Ln.xhr)(e)}};Ce.RequestService=Zr});var In=A(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.RestHttpMethodEnum=ce.RequestService=ce.BaseCommand=void 0;var ma=On();Object.defineProperty(ce,"BaseCommand",{enumerable:!0,get:function(){return ma.BaseCommand}});var Pn=wn();Object.defineProperty(ce,"RequestService",{enumerable:!0,get:function(){return Pn.RequestService}});Object.defineProperty(ce,"RestHttpMethodEnum",{enumerable:!0,get:function(){return Pn.RestHttpMethodEnum}})});var Xe=A(Mn=>{"use strict";var ba=typeof window<"u"&&window,_a=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,va=typeof global<"u"&&global,Dn=ba||va||_a;Mn.root=Dn;(function(){if(!Dn)throw new Error("RxJS could not find any global context (window, self, global)")})()});var It=A(Nn=>{"use strict";function ya(s){return typeof s=="function"}Nn.isFunction=ya});var es=A(Fn=>{"use strict";Fn.isArray=Array.isArray||function(s){return s&&typeof s.length=="number"}});var qn=A(Vn=>{"use strict";function Ea(s){return s!=null&&typeof s=="object"}Vn.isObject=Ea});var Dt=A(kn=>{"use strict";kn.errorObject={e:{}}});var ts=A(Un=>{"use strict";var jn=Dt(),Hn;function Sa(){try{return Hn.apply(this,arguments)}catch(s){return jn.errorObject.e=s,jn.errorObject}}function xa(s){return Hn=s,Sa}Un.tryCatch=xa});var Bn=A(Mt=>{"use strict";var Ra=Mt&&Mt.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Ca=function(s){Ra(e,s);function e(t){s.call(this),this.errors=t;var r=Error.call(this,t?t.length+` errors occurred during unsubscription:
  `+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return e}(Error);Mt.UnsubscriptionError=Ca});var Ft=A(zn=>{"use strict";var Oa=es(),Ta=qn(),Aa=It(),$n=ts(),Oe=Dt(),Nt=Bn(),La=function(){function s(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return s.prototype.unsubscribe=function(){var e=!1,t;if(!this.closed){var r=this,n=r._parent,i=r._parents,o=r._unsubscribe,a=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,l=i?i.length:0;n;)n.remove(this),n=++f<l&&i[f]||null;if(Aa.isFunction(o)){var v=$n.tryCatch(o).call(this);v===Oe.errorObject&&(e=!0,t=t||(Oe.errorObject.e instanceof Nt.UnsubscriptionError?Gn(Oe.errorObject.e.errors):[Oe.errorObject.e]))}if(Oa.isArray(a))for(f=-1,l=a.length;++f<l;){var I=a[f];if(Ta.isObject(I)){var v=$n.tryCatch(I.unsubscribe).call(I);if(v===Oe.errorObject){e=!0,t=t||[];var R=Oe.errorObject.e;R instanceof Nt.UnsubscriptionError?t=t.concat(Gn(R.errors)):t.push(R)}}}if(e)throw new Nt.UnsubscriptionError(t)}},s.prototype.add=function(e){if(!e||e===s.EMPTY)return s.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new s(e);case"object":if(t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(typeof t._addParent!="function"){var r=t;t=new s,t._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var n=this._subscriptions||(this._subscriptions=[]);return n.push(t),t._addParent(this),t},s.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);r!==-1&&t.splice(r,1)}},s.prototype._addParent=function(e){var t=this,r=t._parent,n=t._parents;!r||r===e?this._parent=e:n?n.indexOf(e)===-1&&n.push(e):this._parents=[e]},s.EMPTY=function(e){return e.closed=!0,e}(new s),s}();zn.Subscription=La;function Gn(s){return s.reduce(function(e,t){return e.concat(t instanceof Nt.UnsubscriptionError?t.errors:t)},[])}});var rs=A(Xn=>{"use strict";Xn.empty={closed:!0,next:function(s){},error:function(s){throw s},complete:function(){}}});var ns=A(Vt=>{"use strict";var wa=Xe(),ss=wa.root.Symbol;Vt.rxSubscriber=typeof ss=="function"&&typeof ss.for=="function"?ss.for("rxSubscriber"):"@@rxSubscriber";Vt.$$rxSubscriber=Vt.rxSubscriber});var Kn=A(qt=>{"use strict";var Wn=qt&&qt.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Jn=It(),Pa=Ft(),is=rs(),os=ns(),as=function(s){Wn(e,s);function e(t,r,n){switch(s.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=is.empty;break;case 1:if(!t){this.destination=is.empty;break}if(typeof t=="object"){if(Ia(t)){var i=t[os.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new Yn(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new Yn(this,t,r,n);break}}return e.prototype[os.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,s.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,r=t._parent,n=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=r,this._parents=n,this},e}(Pa.Subscription);qt.Subscriber=as;var Yn=function(s){Wn(e,s);function e(t,r,n,i){s.call(this),this._parentSubscriber=t;var o,a=this;Jn.isFunction(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==is.empty&&(a=Object.create(r),Jn.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=i}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber;if(this._error)r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)r.syncErrorValue=t,r.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),t}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};r.syncErrorThrowable?(this.__tryOrSetError(r,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(n){throw this.unsubscribe(),n}},e.prototype.__tryOrSetError=function(t,r,n){try{r.call(this._context,n)}catch(i){return t.syncErrorValue=i,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(as);function Ia(s){return s instanceof as||"syncErrorThrowable"in s&&s[os.rxSubscriber]}});var ei=A(Zn=>{"use strict";var us=Kn(),Qn=ns(),Da=rs();function Ma(s,e,t){if(s){if(s instanceof us.Subscriber)return s;if(s[Qn.rxSubscriber])return s[Qn.rxSubscriber]()}return!s&&!e&&!t?new us.Subscriber(Da.empty):new us.Subscriber(s,e,t)}Zn.toSubscriber=Ma});var ri=A(Je=>{"use strict";var Na=Xe();function ti(s){var e,t=s.Symbol;return typeof t=="function"?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}Je.getSymbolObservable=ti;Je.observable=ti(Na.root);Je.$$observable=Je.observable});var ni=A(si=>{"use strict";function Fa(){}si.noop=Fa});var oi=A(cs=>{"use strict";var Va=ni();function qa(){for(var s=[],e=0;e<arguments.length;e++)s[e-0]=arguments[e];return ii(s)}cs.pipe=qa;function ii(s){return s?s.length===1?s[0]:function(t){return s.reduce(function(r,n){return n(r)},t)}:Va.noop}cs.pipeFromArray=ii});var Te=A(ai=>{"use strict";var ee=Xe(),ka=ei(),ja=ri(),Ha=oi(),Ua=function(){function s(e){this._isScalar=!1,e&&(this._subscribe=e)}return s.prototype.lift=function(e){var t=new s;return t.source=this,t.operator=e,t},s.prototype.subscribe=function(e,t,r){var n=this.operator,i=ka.toSubscriber(e,t,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},s.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},s.prototype.forEach=function(e,t){var r=this;if(t||(ee.root.Rx&&ee.root.Rx.config&&ee.root.Rx.config.Promise?t=ee.root.Rx.config.Promise:ee.root.Promise&&(t=ee.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(n,i){var o;o=r.subscribe(function(a){if(o)try{e(a)}catch(f){i(f),o.unsubscribe()}else e(a)},i,n)})},s.prototype._subscribe=function(e){return this.source.subscribe(e)},s.prototype[ja.observable]=function(){return this},s.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.length===0?this:Ha.pipeFromArray(e)(this)},s.prototype.toPromise=function(e){var t=this;if(e||(ee.root.Rx&&ee.root.Rx.config&&ee.root.Rx.config.Promise?e=ee.root.Rx.config.Promise:ee.root.Promise&&(e=ee.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(r,n){var i;t.subscribe(function(o){return i=o},function(o){return n(o)},function(){return r(i)})})},s.create=function(e){return new s(e)},s}();ai.Observable=Ua});var fi=A((El,hi)=>{"use strict";var pi=require("child_process"),ui=pi.spawn,Ba=pi.exec;hi.exports=function(s,e,t){if(typeof e=="function"&&t===void 0&&(t=e,e=void 0),s=parseInt(s),Number.isNaN(s)){if(t)return t(new Error("pid must be a number"));throw new Error("pid must be a number")}var r={},n={};switch(r[s]=[],n[s]=1,process.platform){case"win32":Ba("taskkill /pid "+s+" /T /F",t);break;case"darwin":ls(s,r,n,function(i){return ui("pgrep",["-P",i])},function(){ci(r,e,t)});break;default:ls(s,r,n,function(i){return ui("ps",["-o","pid","--no-headers","--ppid",i])},function(){ci(r,e,t)});break}};function ci(s,e,t){var r={};try{Object.keys(s).forEach(function(n){s[n].forEach(function(i){r[i]||(li(i,e),r[i]=1)}),r[n]||(li(n,e),r[n]=1)})}catch(n){if(t)return t(n);throw n}if(t)return t()}function li(s,e){try{process.kill(parseInt(s,10),e)}catch(t){if(t.code!=="ESRCH")throw t}}function ls(s,e,t,r,n){var i=r(s),o="";i.stdout.on("data",function(l){var l=l.toString("ascii");o+=l});var a=function(f){if(delete t[s],f!=0){Object.keys(t).length==0&&n();return}o.match(/\d+/g).forEach(function(l){l=parseInt(l,10),e[s].push(l),e[l]=[],t[l]=1,ls(l,e,t,r,n)})};i.on("close",a)}});var hs=A(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.CliCommandExecution=J.KILL_CODE=J.CANCELLATION_INTERVAL=J.NO_STDERR_ERROR=J.NO_STDOUT_ERROR=J.NO_PID_ERROR=void 0;var Ye=Te(),$a=fi();J.NO_PID_ERROR="No process associated with sfdx command.";J.NO_STDOUT_ERROR="No stdout found for childProcess";J.NO_STDERR_ERROR="No stderr found for childProcess";J.CANCELLATION_INTERVAL=1e3;J.KILL_CODE="SIGKILL";var ps=class{constructor(e,t,r){if(this.command=e,this.cancellationToken=r,!t.pid)throw new Error(J.NO_PID_ERROR);this.childProcessPid=t.pid;let n;if(this.processExitSubject=Ye.Observable.fromEvent(t,"exit"),this.processExitSubject.subscribe(()=>{n&&n.unsubscribe()}),this.processErrorSubject=Ye.Observable.fromEvent(t,"error"),this.processErrorSubject.subscribe(()=>{n&&n.unsubscribe()}),!t.stdout)throw new Error(J.NO_STDOUT_ERROR);if(this.stdoutSubject=Ye.Observable.fromEvent(t.stdout,"data"),!t.stderr)throw new Error(J.NO_STDERR_ERROR);this.stderrSubject=Ye.Observable.fromEvent(t.stderr,"data"),r&&(n=Ye.Observable.interval(J.CANCELLATION_INTERVAL).subscribe(async()=>{if(r.isCancellationRequested)try{await this.killExecution()}catch(o){console.log(o)}}))}async killExecution(e=J.KILL_CODE){return Ga(this.childProcessPid,e)}};J.CliCommandExecution=ps;var Ga=(s,e)=>new Promise((t,r)=>{$a(s,e,n=>{n&&r(n),t()})})});var _i=A((xl,bi)=>{bi.exports=mi;mi.sync=Xa;var di=require("fs");function za(s,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var r=0;r<t.length;r++){var n=t[r].toLowerCase();if(n&&s.substr(-n.length).toLowerCase()===n)return!0}return!1}function gi(s,e,t){return!s.isSymbolicLink()&&!s.isFile()?!1:za(e,t)}function mi(s,e,t){di.stat(s,function(r,n){t(r,r?!1:gi(n,s,e))})}function Xa(s,e){return gi(di.statSync(s),s,e)}});var xi=A((Rl,Si)=>{Si.exports=yi;yi.sync=Ja;var vi=require("fs");function yi(s,e,t){vi.stat(s,function(r,n){t(r,r?!1:Ei(n,e))})}function Ja(s,e){return Ei(vi.statSync(s),e)}function Ei(s,e){return s.isFile()&&Ya(s,e)}function Ya(s,e){var t=s.mode,r=s.uid,n=s.gid,i=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),o=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),f=parseInt("010",8),l=parseInt("001",8),v=a|f,I=t&l||t&f&&n===o||t&a&&r===i||t&v&&i===0;return I}});var Ci=A((Ol,Ri)=>{var Cl=require("fs"),kt;process.platform==="win32"||global.TESTING_WINDOWS?kt=_i():kt=xi();Ri.exports=fs;fs.sync=Wa;function fs(s,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,n){fs(s,e||{},function(i,o){i?n(i):r(o)})})}kt(s,e||{},function(r,n){r&&(r.code==="EACCES"||e&&e.ignoreErrors)&&(r=null,n=!1),t(r,n)})}function Wa(s,e){try{return kt.sync(s,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var Ii=A((Tl,Pi)=>{var Ae=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Oi=require("path"),Ka=Ae?";":":",Ti=Ci(),Ai=s=>Object.assign(new Error(`not found: ${s}`),{code:"ENOENT"}),Li=(s,e)=>{let t=e.colon||Ka,r=s.match(/\//)||Ae&&s.match(/\\/)?[""]:[...Ae?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(t)],n=Ae?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=Ae?n.split(t):[""];return Ae&&s.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:r,pathExt:i,pathExtExe:n}},wi=(s,e,t)=>{typeof e=="function"&&(t=e,e={}),e||(e={});let{pathEnv:r,pathExt:n,pathExtExe:i}=Li(s,e),o=[],a=l=>new Promise((v,I)=>{if(l===r.length)return e.all&&o.length?v(o):I(Ai(s));let R=r[l],V=/^".*"$/.test(R)?R.slice(1,-1):R,y=Oi.join(V,s),L=!V&&/^\.[\\\/]/.test(s)?s.slice(0,2)+y:y;v(f(L,l,0))}),f=(l,v,I)=>new Promise((R,V)=>{if(I===n.length)return R(a(v+1));let y=n[I];Ti(l+y,{pathExt:i},(L,q)=>{if(!L&&q)if(e.all)o.push(l+y);else return R(l+y);return R(f(l,v,I+1))})});return t?a(0).then(l=>t(null,l),t):a(0)},Qa=(s,e)=>{e=e||{};let{pathEnv:t,pathExt:r,pathExtExe:n}=Li(s,e),i=[];for(let o=0;o<t.length;o++){let a=t[o],f=/^".*"$/.test(a)?a.slice(1,-1):a,l=Oi.join(f,s),v=!f&&/^\.[\\\/]/.test(s)?s.slice(0,2)+l:l;for(let I=0;I<r.length;I++){let R=v+r[I];try{if(Ti.sync(R,{pathExt:n}))if(e.all)i.push(R);else return R}catch{}}}if(e.all&&i.length)return i;if(e.nothrow)return null;throw Ai(s)};Pi.exports=wi;wi.sync=Qa});var Mi=A((Al,ds)=>{"use strict";var Di=(s={})=>{let e=s.env||process.env;return(s.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};ds.exports=Di;ds.exports.default=Di});var qi=A((Ll,Vi)=>{"use strict";var Ni=require("path"),Za=Ii(),eu=Mi();function Fi(s,e){let t=s.options.env||process.env,r=process.cwd(),n=s.options.cwd!=null,i=n&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(s.options.cwd)}catch{}let o;try{o=Za.sync(s.command,{path:t[eu({env:t})],pathExt:e?Ni.delimiter:void 0})}catch{}finally{i&&process.chdir(r)}return o&&(o=Ni.resolve(n?s.options.cwd:"",o)),o}function tu(s){return Fi(s)||Fi(s,!0)}Vi.exports=tu});var ki=A((wl,ms)=>{"use strict";var gs=/([()\][%!^"`<>&|;, *?])/g;function ru(s){return s=s.replace(gs,"^$1"),s}function su(s,e){return s=`${s}`,s=s.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),s=s.replace(/(?=(\\+?)?)\1$/,"$1$1"),s=`"${s}"`,s=s.replace(gs,"^$1"),e&&(s=s.replace(gs,"^$1")),s}ms.exports.command=ru;ms.exports.argument=su});var Hi=A((Pl,ji)=>{"use strict";ji.exports=/^#!(.*)/});var Bi=A((Il,Ui)=>{"use strict";var nu=Hi();Ui.exports=(s="")=>{let e=s.match(nu);if(!e)return null;let[t,r]=e[0].replace(/#! ?/,"").split(" "),n=t.split("/").pop();return n==="env"?r:r?`${n} ${r}`:n}});var Gi=A((Dl,$i)=>{"use strict";var bs=require("fs"),iu=Bi();function ou(s){let t=Buffer.alloc(150),r;try{r=bs.openSync(s,"r"),bs.readSync(r,t,0,150,0),bs.closeSync(r)}catch{}return iu(t.toString())}$i.exports=ou});var Yi=A((Ml,Ji)=>{"use strict";var au=require("path"),zi=qi(),Xi=ki(),uu=Gi(),cu=process.platform==="win32",lu=/\.(?:com|exe)$/i,pu=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function hu(s){s.file=zi(s);let e=s.file&&uu(s.file);return e?(s.args.unshift(s.file),s.command=e,zi(s)):s.file}function fu(s){if(!cu)return s;let e=hu(s),t=!lu.test(e);if(s.options.forceShell||t){let r=pu.test(e);s.command=au.normalize(s.command),s.command=Xi.command(s.command),s.args=s.args.map(i=>Xi.argument(i,r));let n=[s.command].concat(s.args).join(" ");s.args=["/d","/s","/c",`"${n}"`],s.command=process.env.comspec||"cmd.exe",s.options.windowsVerbatimArguments=!0}return s}function du(s,e,t){e&&!Array.isArray(e)&&(t=e,e=null),e=e?e.slice(0):[],t=Object.assign({},t);let r={command:s,args:e,options:t,file:void 0,original:{command:s,args:e}};return t.shell?r:fu(r)}Ji.exports=du});var Qi=A((Nl,Ki)=>{"use strict";var _s=process.platform==="win32";function vs(s,e){return Object.assign(new Error(`${e} ${s.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${s.command}`,path:s.command,spawnargs:s.args})}function gu(s,e){if(!_s)return;let t=s.emit;s.emit=function(r,n){if(r==="exit"){let i=Wi(n,e);if(i)return t.call(s,"error",i)}return t.apply(s,arguments)}}function Wi(s,e){return _s&&s===1&&!e.file?vs(e.original,"spawn"):null}function mu(s,e){return _s&&s===1&&!e.file?vs(e.original,"spawnSync"):null}Ki.exports={hookChildProcess:gu,verifyENOENT:Wi,verifyENOENTSync:mu,notFoundError:vs}});var to=A((Fl,Le)=>{"use strict";var Zi=require("child_process"),ys=Yi(),Es=Qi();function eo(s,e,t){let r=ys(s,e,t),n=Zi.spawn(r.command,r.args,r.options);return Es.hookChildProcess(n,r),n}function bu(s,e,t){let r=ys(s,e,t),n=Zi.spawnSync(r.command,r.args,r.options);return n.error=n.error||Es.verifyENOENTSync(n.status,r),n}Le.exports=eo;Le.exports.spawn=eo;Le.exports.sync=bu;Le.exports._parse=ys;Le.exports._enoent=Es});var no=A(jt=>{"use strict";var _u=jt&&jt.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},vu=Te(),yu=ts(),Eu=It(),ro=Dt(),Su=Ft(),so=Object.prototype.toString;function xu(s){return!!s&&typeof s.addListener=="function"&&typeof s.removeListener=="function"}function Ru(s){return!!s&&typeof s.on=="function"&&typeof s.off=="function"}function Cu(s){return!!s&&so.call(s)==="[object NodeList]"}function Ou(s){return!!s&&so.call(s)==="[object HTMLCollection]"}function Tu(s){return!!s&&typeof s.addEventListener=="function"&&typeof s.removeEventListener=="function"}var Au=function(s){_u(e,s);function e(t,r,n,i){s.call(this),this.sourceObj=t,this.eventName=r,this.selector=n,this.options=i}return e.create=function(t,r,n,i){return Eu.isFunction(n)&&(i=n,n=void 0),new e(t,r,i,n)},e.setupSubscription=function(t,r,n,i,o){var a;if(Cu(t)||Ou(t))for(var f=0,l=t.length;f<l;f++)e.setupSubscription(t[f],r,n,i,o);else if(Tu(t)){var v=t;t.addEventListener(r,n,o),a=function(){return v.removeEventListener(r,n,o)}}else if(Ru(t)){var I=t;t.on(r,n),a=function(){return I.off(r,n)}}else if(xu(t)){var R=t;t.addListener(r,n),a=function(){return R.removeListener(r,n)}}else throw new TypeError("Invalid event target");i.add(new Su.Subscription(a))},e.prototype._subscribe=function(t){var r=this.sourceObj,n=this.eventName,i=this.options,o=this.selector,a=o?function(){for(var f=[],l=0;l<arguments.length;l++)f[l-0]=arguments[l];var v=yu.tryCatch(o).apply(void 0,f);v===ro.errorObject?t.error(ro.errorObject.e):t.next(v)}:function(f){return t.next(f)};e.setupSubscription(r,n,a,t,i)},e}(vu.Observable);jt.FromEventObservable=Au});var oo=A(io=>{"use strict";var Lu=no();io.fromEvent=Lu.FromEventObservable.create});var ao=A(()=>{"use strict";var wu=Te(),Pu=oo();wu.Observable.fromEvent=Pu.fromEvent});var co=A(uo=>{"use strict";var Iu=es();function Du(s){return!Iu.isArray(s)&&s-parseFloat(s)+1>=0}uo.isNumeric=Du});var lo=A(Ht=>{"use strict";var Mu=Ht&&Ht.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Nu=Ft(),Fu=function(s){Mu(e,s);function e(t,r){s.call(this)}return e.prototype.schedule=function(t,r){return r===void 0&&(r=0),this},e}(Nu.Subscription);Ht.Action=Fu});var ho=A(Ut=>{"use strict";var Vu=Ut&&Ut.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},po=Xe(),qu=lo(),ku=function(s){Vu(e,s);function e(t,r){s.call(this,t,r),this.scheduler=t,this.pending=!1,this.work=r}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,i=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(i,n,r)),this.delay=r,this.id=this.id||this.requestAsyncId(i,this.id,r),this},e.prototype.requestAsyncId=function(t,r,n){return n===void 0&&(n=0),po.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,r,n){return n===void 0&&(n=0),n!==null&&this.delay===n&&this.pending===!1?r:po.root.clearInterval(r)&&void 0||void 0},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,r);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var n=!1,i=void 0;try{this.work(t)}catch(o){n=!0,i=!!o&&o||new Error(o)}if(n)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,r=this.scheduler,n=r.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&n.splice(i,1),t!=null&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null},e}(qu.Action);Ut.AsyncAction=ku});var go=A(fo=>{"use strict";var ju=function(){function s(e,t){t===void 0&&(t=s.now),this.SchedulerAction=e,this.now=t}return s.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},s.now=Date.now?Date.now:function(){return+new Date},s}();fo.Scheduler=ju});var mo=A(Bt=>{"use strict";var Hu=Bt&&Bt.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Uu=go(),Bu=function(s){Hu(e,s);function e(){s.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return e.prototype.flush=function(t){var r=this.actions;if(this.active){r.push(t);return}var n;this.active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=r.shift());if(this.active=!1,n){for(;t=r.shift();)t.unsubscribe();throw n}},e}(Uu.Scheduler);Bt.AsyncScheduler=Bu});var _o=A(bo=>{"use strict";var $u=ho(),Gu=mo();bo.async=new Gu.AsyncScheduler($u.AsyncAction)});var vo=A($t=>{"use strict";var zu=$t&&$t.__extends||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);function r(){this.constructor=s}s.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)},Xu=co(),Ju=Te(),Ss=_o(),Yu=function(s){zu(e,s);function e(t,r){t===void 0&&(t=0),r===void 0&&(r=Ss.async),s.call(this),this.period=t,this.scheduler=r,(!Xu.isNumeric(t)||t<0)&&(this.period=0),(!r||typeof r.schedule!="function")&&(this.scheduler=Ss.async)}return e.create=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=Ss.async),new e(t,r)},e.dispatch=function(t){var r=t.index,n=t.subscriber,i=t.period;n.next(r),!n.closed&&(t.index+=1,this.schedule(t,i))},e.prototype._subscribe=function(t){var r=0,n=this.period,i=this.scheduler;t.add(i.schedule(e.dispatch,n,{index:r,subscriber:t,period:n}))},e}(Ju.Observable);$t.IntervalObservable=Yu});var Eo=A(yo=>{"use strict";var Wu=vo();yo.interval=Wu.IntervalObservable.create});var So=A(()=>{"use strict";var Ku=Te(),Qu=Eo();Ku.Observable.interval=Qu.interval});var xs=A(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.GlobalCliEnvironment=void 0;var Gt=class{};zt.GlobalCliEnvironment=Gt;Gt.environmentVariables=new Map});var Jt=A(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.CliCommandExecutor=void 0;var Zu=to();ao();So();var ec=me(),tc=hs(),rc=xs(),Rs=class s{static patchEnv(e,t){let r=Object.create(null);return Object.assign(r,process.env),t.forEach((n,i)=>{r[i]=n}),r&&(r.SFDX_TOOL=ec.TELEMETRY_HEADER),typeof e.env<"u"&&Object.assign(r,e.env),e.env=r,e}constructor(e,t,r=!0){this.command=e,this.options=r?s.patchEnv(t,rc.GlobalCliEnvironment.environmentVariables):t}execute(e){let t=Zu(this.command.command,this.command.args,this.options);return new tc.CliCommandExecution(this.command,t,e)}};Xt.CliCommandExecutor=Rs});var xo=A(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.Command=void 0;var Cs=class{constructor(e){this.command=e.command,this.description=e.description,this.args=e.args,this.logName=e.logName}toString(){return this.description?this.description:`${this.command} ${this.args.join(" ")}`}toCommand(){return`${this.command} ${this.args.join(" ")}`}};Yt.Command=Cs});var Wt=A(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.CommandBuilder=le.JSON_FLAG=void 0;var sc=xo();le.JSON_FLAG="--json";var Os=class{constructor(e){this.args=[],this.command=e}withDescription(e){return this.description=e,this}withArg(e){return e===le.JSON_FLAG?this.withJson():this.args.push(e),this}withFlag(e,t){return this.args.push(e,t),this}withJson(){return this.args.push(le.JSON_FLAG),this}withLogName(e){return this.logName=e,this}build(){return new sc.Command(this)}};le.CommandBuilder=Os});var Qt=A(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.CommandOutput=void 0;var We=Wr(),nc=Wt(),Ts=class{constructor(){this.stdoutBuffer="",this.stderrBuffer=""}async getCmdResult(e){let t=e.command?.args?.some(r=>r===nc.JSON_FLAG);return e.stdoutSubject.subscribe(r=>{this.stdoutBuffer+=r.toString()}),e.stderrSubject.subscribe(r=>{this.stderrBuffer+=r.toString()}),new Promise((r,n)=>{e.processExitSubject.subscribe(i=>i!==void 0&&String(i)==="0"?r((0,We.stripAnsiInJson)(this.stdoutBuffer,t)):e.command.command==="sf"?n((0,We.stripAnsiInJson)(this.stdoutBuffer,t)||(0,We.stripAnsiInJson)(this.stderrBuffer,t)):n((0,We.stripAnsiInJson)(this.stderrBuffer,t)||(0,We.stripAnsiInJson)(this.stdoutBuffer,t)))})}};Kt.CommandOutput=Ts});var er=A(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.SfCommandBuilder=void 0;var ic=me(),oc=Wt(),As=class extends oc.CommandBuilder{constructor(){super(ic.SF_COMMAND)}};Zt.SfCommandBuilder=As});var Ro=A(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.ConfigGet=void 0;var ac=Jt(),uc=Qt(),cc=er(),Ls=class{async getConfig(e,...t){let r=new cc.SfCommandBuilder().withArg("config:get");t.forEach(a=>r.withArg(a));let n=new ac.CliCommandExecutor(r.withJson().build(),{cwd:e}).execute(),o=await new uc.CommandOutput().getCmdResult(n);try{let a=new Map;return JSON.parse(o).result.forEach(l=>a.set(l.key,l.value)),Promise.resolve(a)}catch(a){return Promise.reject(a)}}};tr.ConfigGet=Ls});var Co=A(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.OrgDisplay=void 0;var lc=Jt(),pc=Qt(),hc=er(),ws=class{async getOrgInfo(e){let t=new lc.CliCommandExecutor(new hc.SfCommandBuilder().withArg("org:display").withJson().build(),{cwd:e}).execute(),n=await new pc.CommandOutput().getCmdResult(t);try{let i=JSON.parse(n).result;return Promise.resolve(i)}catch{return Promise.reject(n)}}};rr.OrgDisplay=ws});var Oo=A(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.SfCommandBuilder=Y.OrgDisplay=Y.GlobalCliEnvironment=Y.ConfigGet=Y.CommandOutput=Y.CommandBuilder=Y.CliCommandExecutor=Y.CliCommandExecution=void 0;var fc=hs();Object.defineProperty(Y,"CliCommandExecution",{enumerable:!0,get:function(){return fc.CliCommandExecution}});var dc=Jt();Object.defineProperty(Y,"CliCommandExecutor",{enumerable:!0,get:function(){return dc.CliCommandExecutor}});var gc=Wt();Object.defineProperty(Y,"CommandBuilder",{enumerable:!0,get:function(){return gc.CommandBuilder}});var mc=Qt();Object.defineProperty(Y,"CommandOutput",{enumerable:!0,get:function(){return mc.CommandOutput}});var bc=Ro();Object.defineProperty(Y,"ConfigGet",{enumerable:!0,get:function(){return bc.ConfigGet}});var _c=xs();Object.defineProperty(Y,"GlobalCliEnvironment",{enumerable:!0,get:function(){return _c.GlobalCliEnvironment}});var vc=Co();Object.defineProperty(Y,"OrgDisplay",{enumerable:!0,get:function(){return vc.OrgDisplay}});var yc=er();Object.defineProperty(Y,"SfCommandBuilder",{enumerable:!0,get:function(){return yc.SfCommandBuilder}})});var sr=A(te=>{"use strict";var Ec=te&&te.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,n)}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),we=te&&te.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ec(e,s,t)};Object.defineProperty(te,"__esModule",{value:!0});we(mn(),te);we(xn(),te);we(me(),te);we(Wr(),te);we(In(),te);we(Oo(),te)});var Cc={};$o(Cc,{ApexDebugStackFrameInfo:()=>Qe,ApexReplayDebug:()=>pr,ApexVariable:()=>st,ApexVariableContainer:()=>z,VariableContainer:()=>nt});module.exports=Go(Cc);var qo=require("os"),j=ne(He());var Ue=class s{constructor(){this.lineNumberMapping=new Map;this.typerefMapping=new Map}setValidLines(e,t){this.lineNumberMapping=e,this.typerefMapping=t}static getInstance(){return s.instance||(s.instance=new s),s.instance}static setInstance(e){s.instance=e}hasLineNumberMapping(){return this.lineNumberMapping&&this.lineNumberMapping.size>0}getLineNumberMapping(){return this.lineNumberMapping}getTyperefMapping(){return this.typerefMapping}canSetLineBreakpoint(e,t){return this.lineNumberMapping.has(e)&&this.lineNumberMapping.get(e).indexOf(t)!==-1}createMappingsFromLineBreakpointInfo(e){this.lineNumberMapping.clear(),this.typerefMapping.clear();for(let t of e)this.lineNumberMapping.has(t.uri)||this.lineNumberMapping.set(t.uri,[]),this.lineNumberMapping.set(t.uri,this.lineNumberMapping.get(t.uri).concat(t.lines)),this.typerefMapping.set(t.typeref,t.uri)}returnLinesForLoggingFromBreakpointArgs(e){return e.map(t=>t.line).join(",")}getTopLevelTyperefForUri(e){let t="";return this.typerefMapping.forEach((r,n)=>{if(r===e&&n.indexOf("$")===-1){t=n;return}}),t}};var ve=Ue.getInstance();var ye="sendMetricGeneral",re="sendMetricError";var Br="Trigger.",Xs="sendMetricLaunch";var Js="0x",_t="CODE_UNIT_STARTED",vt="CODE_UNIT_FINISHED",yt="CONSTRUCTOR_ENTRY",Et="CONSTRUCTOR_EXIT",Ys="Execute Anonymous",Ws="HEAP_DUMP",Ks="METHOD_ENTRY",Qs="METHOD_EXIT",Zs="STATEMENT_EXECUTE",en="USER_DEBUG",St="VF_APEX_CALL_START",xt="VF_APEX_CALL_END",tn="VARIABLE_SCOPE_BEGIN",rn="VARIABLE_ASSIGNMENT",Ee="execute_anonymous_apex",sn="services/data/v43.0/tooling/sobjects",Be="__sfdc_trigger/",nn="blob",$r="boolean",on="date",an="datetime",un="decimal",cn="double",ln="id",pn="integer",hn="long",se="string",fn="time",Gr="String",zr="KeyValuePair",Se="key",xe="value";var Rt=class{constructor(e){this.logContext=e}replaceVariablesWithHeapDump(){let e=this.logContext.getTopFrame();e&&this.replaceFrameVariablesWithHeapDump(e)}replaceFrameVariablesWithHeapDump(e){let t=this.logContext.getHeapDumpForThisLocation(e.name,e.line);if(t&&t.getOverlaySuccessResult()){let r=t.getOverlaySuccessResult(),n=this.logContext.getFrameHandler().get(e.id);this.logContext.getRefsMap().clear(),this.logContext.getVariableHandler().reset(),this.createStringRefsFromHeapdump(r);for(let i of r.HeapDump.extents)if(!this.isPrimitiveType(i.typeName))for(let o of i.extent){let a=o.address,f=new z("","",i.typeName,a);this.updateLeafReferenceContainer(f,o,i.collectionType),this.logContext.getRefsMap().set(a,f)}for(let i of r.HeapDump.extents)for(let o of i.extent){let a=o.symbols&&o.symbols.length>0?o.symbols[0]:void 0,f=a?this.logContext.getUtil().substringUpToLastPeriod(a):void 0;if(a&&n.locals.has(a)){let l=n.locals.get(a);l.type=i.typeName;let v=this.logContext.getRefsMap().get(o.address);if(v)if(v.type===se)l.value=v.value;else{let I=this.createVariableFromReference(a,v,new Map,new Array);I&&n.locals.set(l.name,I)}else l.value=this.createStringFromExtentValue(o.value.value)}else if(a&&f&&this.logContext.getStaticVariablesClassMap().has(f)){let l=this.logContext.getStaticVariablesClassMap().get(f),v=this.logContext.getUtil().substringFromLastPeriod(a);if(l&&l.has(v)){let I=l.get(v);I.type=i.typeName;let R=this.logContext.getRefsMap().get(o.address);if(R)if(R.type===se)I.value=R.value;else{let V=this.createVariableFromReference(a,R,new Map,new Array);V&&l.set(I.name,V)}else I.value=this.createStringFromExtentValue(o.value.value)}}}if(this.logContext.isRunningApexTrigger()){for(let i of r.HeapDump.extents)if(this.isTriggerExtent(i)){for(let o of i.extent)if(o.symbols&&o.symbols.length>0){for(let a of o.symbols)if(a&&a.startsWith(Br)){let f=this.logContext.getRefsMap().get(o.address);if(f){let l=this.createVariableFromReference(a,f,new Map,new Array);l&&n.globals.set(a,l)}else n.globals.set(a,new z(a,this.createStringFromExtentValue(o.value.value),i.typeName))}}}}}}createStringRefsFromHeapdump(e){let t=this.logContext.getRefsMap();for(let r of e.HeapDump.extents)if(r.typeName.toLowerCase()===se)for(let n of r.extent){t.has(n.address)||t.set(n.address,new z("",n.value.value,Gr,n.address));let i=t.get(n.address);i.type=Gr,i.value=`'${n.value.value}'`}}isAddress(e){return typeof e=="string"&&e.startsWith(Js)}isTriggerExtent(e){return!!((e.typeName.toLowerCase()===$r||this.isCollectionType(e.typeName))&&e.count>0&&e.extent[0].symbols!==null&&e.extent[0].symbols.length>0&&e.extent[0].symbols[0].startsWith(Br))}copyReferenceContainer(e,t,r=!0){let n=new z(t,e.value,e.type,e.ref);return n.variables=e.variables,this.isPrimitiveType(n.type)||(r?n.variablesRef=this.logContext.getVariableHandler().create(n):n.variablesRef=e.variablesRef),n}createStringFromVarContainer(e,t){if(!e.ref||e.type.toLowerCase()===se)return e.value;if(e.ref){if(t.has(e.ref))return"already output";t.add(e.ref)}let r="";try{let n=e.type.toLowerCase().startsWith("list<")||e.type.toLowerCase().startsWith("set<"),i=this.isCollectionType(e.type)?"":`${e.type}:`;r=n?"(":`${i}{`;let o=!0;for(let a of Array.from(e.variables.entries())){let f=a[1];o||(r+=", "),f.ref?r+=this.createStringFromVarContainer(f,t):r+=n?f.value:`${f.name}=${f.value}`,o=!1}r+=n?")":"}"}finally{e.ref&&t.delete(e.ref)}return r}isPrimitiveType(e){let t=e.toLocaleLowerCase();return t===nn||t===$r||t===on||t===an||t===un||t===cn||t===ln||t===pn||t===hn||t===se||t===fn}isCollectionType(e){return e.toLocaleLowerCase().startsWith("map<")||e.toLocaleLowerCase().startsWith("list<")||e.toLocaleLowerCase().startsWith("set<")}updateLeafReferenceContainer(e,t,r){let n="";r&&(n=r);let i=!1;if(this.isCollectionType(e.type))if(t.value.entry){let o=0,a=this.getKeyTypeForMap(e.type,r||"");for(let f of t.value.entry){let l=this.isAddress(f.keyDisplayValue),v=this.isAddress(f.value.value),I=`${Se}${o.toString()}_${xe}${o.toString()}`,R=new z(I,"",zr),V=new z(Se,"",a);if(l){let L=this.logContext.getRefsMap().get(f.keyDisplayValue);L&&L.type.toLowerCase()===se?(l=!1,V.value=L.value):(i=!0,V.ref=f.keyDisplayValue)}else V.value=f.keyDisplayValue.toString();let y=new z(xe,"",n);if(v){let L=this.logContext.getRefsMap().get(f.value.value);L&&L.type.toLowerCase()===se?(v=!1,y.value=L.value):(i=!0,y.ref=f.value.value)}else y.value=this.createStringFromExtentValue(f.value.value);R.variables.set(V.name,V),R.variables.set(y.name,y),!l&&!v&&(R.name=V.value,R.value=y.value),e.variables.set(I,R),o++}}else{let o=t.value.value;for(let a=0;a<o.length;a++)if(this.isAddress(o[a].value)){let f=o[a].value,l=this.logContext.getRefsMap().get(o[a].value);l&&l.type.toLowerCase()===se?f=l.value:i=!0,e.variables.set(a.toString(),new z(a.toString(),f,n,o[a].value))}else e.variables.set(a.toString(),new z(a.toString(),this.createStringFromExtentValue(o[a].value),n))}else for(let o of t.value.entry)if(this.isAddress(o.value.value)){let f=o.value.value,l=this.logContext.getRefsMap().get(o.value.value);l&&l.type.toLowerCase()===se?f=l.value:i=!0,e.variables.set(o.keyDisplayValue,new z(o.keyDisplayValue,f,"",o.value.value))}else e.variables.set(o.keyDisplayValue,new z(o.keyDisplayValue,this.createStringFromExtentValue(o.value.value),""));i||(e.value=this.createStringFromVarContainer(e,new Set))}createStringFromExtentValue(e){return e===void 0?"undefined":e===null?"null":e.toString()}createVariableFromReference(e,t,r,n){if(t.ref){if(r.has(t.ref)){let i=r.get(t.ref);if(i!==null)if(i.name!==e){let o=this.copyReferenceContainer(i,e,!1);return n.push(o),o}else return i;return}try{let i=this.copyReferenceContainer(t,e);r.set(t.ref,i);for(let o of Array.from(i.variables.entries())){let a=o[0],f=o[1];if(f.type===zr){let l=f.variables.get(Se),v=l.value;if(l&&l.ref){let V=this.logContext.getRefsMap().get(l.ref);if(V){let y=this.createVariableFromReference(Se,V,r,n);y&&(v=y.value,f.variables.set(Se,y))}else l.value=l.ref,l.ref=void 0}let I=f.variables.get(xe),R=I.value;if(I&&I.ref){let V=this.logContext.getRefsMap().get(I.ref);if(V){let y=this.createVariableFromReference(xe,V,r,n);y&&(R=y.value,f.variables.set(xe,y))}else I.value=I.ref,I.ref=void 0}f.name=v,f.value=R,f.variablesRef=this.logContext.getVariableHandler().create(f)}else{if(!f.ref)continue;let l=this.logContext.getRefsMap().get(f.ref);if(l){let v=this.createVariableFromReference(a,l,r,n);v&&i.variables.set(a,v)}else f.value=f.ref,f.ref=void 0}i.value=this.createStringFromVarContainer(i,new Set)}return i}finally{r.delete(t.ref),r.size===0&&n.forEach(i=>{let o=i;o.value=this.createStringFromVarContainer(o,new Set)})}}}getKeyTypeForMap(e,t){let r=","+t;return e.substring(e.indexOf("<")+1,e.lastIndexOf(r))}};var Ve=ne(sr()),No=ne(require("path"));var To=ne(sr());var Ke=class extends To.BaseCommand{constructor(t){super(void 0);this.commandName="ApexExecutionOverlayResult";this.heapdumpKey=t}getCommandUrl(){return[sn,this.commandName,this.heapdumpKey].join("/")}getRequest(){}};var nr=ne(sr());var Ao={session_language_server_error_text:"Apex language server could not provide information about valid breakpoints.",session_started_text:"Apex Replay Debugger session started for log file %s.",session_terminated_text:"Apex Replay Debugger session terminated.",no_log_file_text:"The log file either is missing or does not have any log lines in it.",incorrect_log_levels_text:"The log must be generated with log categories Apex code at the FINEST level and Visualforce at the FINER level.",unable_to_retrieve_org_info:"Unable to retrieve OrgInfo",heap_dump_error:"Problems were encountered while retrieving heap dump information. Message=%s, Error code=%s, Heap dump information=%s",heap_dump_error_wrap_up_text:"Problems were encountered while retrieving heap dump information. See the messages above this one for details. Detailed heap dump variable information is unavailable for the specified line or lines.",fetching_heap_dump:"Retrieving heap dump from server. Heap dump information=%s",malformed_log_line:"Encountered a malformed HEAP_DUMP log line, skipping. Log line number=%d, log line='%s'.",reconcile_heapdump_error:'Problems were encountered while using a heap dump: %s. Use Tooling API to delete the ApexExecutionOverlayResult record with the ID %s: From a terminal, run "sf data:delete:record -t -s ApexExecutionOverlayResult -i %s".'};var Lo={session_language_server_error_text:"Apex \u8A00\u8A9E\u30B5\u30FC\u30D0\u306F\u6709\u52B9\u306A\u30D6\u30EC\u30FC\u30AF\u30DD\u30A4\u30F3\u30C8\u306B\u95A2\u3059\u308B\u60C5\u5831\u3092\u63D0\u4F9B\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",session_started_text:"Apex Replay Debugger \u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u30ED\u30B0\u30D5\u30A1\u30A4\u30EB %s \u3067\u958B\u59CB\u3057\u307E\u3057\u305F\u3002",session_terminated_text:"Apex Replay Debugger \u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002",no_log_file_text:"\u30ED\u30B0\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u304B\u3001\u30D5\u30A1\u30A4\u30EB\u306B\u30ED\u30B0\u306E\u884C\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u305B\u3093\u3002",incorrect_log_levels_text:"\u30ED\u30B0\u306F\u3001\u30ED\u30B0\u30AB\u30C6\u30B4\u30EA\u3092 Apex \u304C FINEST \u30EC\u30D9\u30EB\u306B\u3001Visualforce \u304C FINER \u30EC\u30D9\u30EB\u3067\u751F\u6210\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002",unable_to_retrieve_org_info:"OrgInfo \u306E\u53D6\u5F97\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",heap_dump_error:"\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u30E1\u30C3\u30BB\u30FC\u30B8=%s, \u30A8\u30E9\u30FC\u30B3\u30FC\u30C9=%s, \u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831=%s",heap_dump_error_wrap_up_text:"\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001\u4E0A\u8A18\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u6307\u5B9A\u3055\u308C\u305F\u884C\u306B\u3064\u3044\u3066\u3001\u8A73\u7D30\u306A\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u5909\u6570\u306E\u60C5\u5831\u304C\u4F7F\u7528\u3067\u304D\u307E\u305B\u3093\u3002",fetching_heap_dump:"\u30B5\u30FC\u30D0\u304B\u3089\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3057\u3066\u3044\u307E\u3059\u3002\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831=%s",malformed_log_line:"\u4E0D\u6B63\u306A HEAP_DUMP \u306E\u30ED\u30B0\u306E\u884C\u304C\u898B\u3064\u304B\u308A\u307E\u3057\u305F\u3002\u3053\u306E\u884C\u3092\u30B9\u30AD\u30C3\u30D7\u3057\u307E\u3059\u3002\u30ED\u30B0\u306E\u884C\u756A\u53F7=%d\u3001\u30ED\u30B0\u306E\u884C='%s'",reconcile_heapdump_error:'\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F: %s\u3002 Tooling API \u3092\u4F7F\u7528\u3057\u3066 ApexExecutionOverlayResult \u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u306E\u30EC\u30B3\u30FC\u30C9 (ID %s) \u3092\u524A\u9664\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u30BF\u30FC\u30DF\u30CA\u30EB\u304B\u3089\u3001"sf data:delete:record -t -s ApexExecutionOverlayResult -i %s" \u3092\u5B9F\u884C\u3057\u3066\u304F\u3060\u3055\u3044\u3002'};var Ps="salesforcedx-apex-replay-debugger",Is=nr.LocalizationService.getInstance(Ps);Is.messageBundleManager.registerMessageBundle(Ps,{messages:Ao,type:"base"});Is.messageBundleManager.registerMessageBundle(Ps,{messages:{...Lo,_locale:nr.LOCALE_JA},type:"locale"});var K={localize:(s,...e)=>Is.localize(s,...e)};var Io=require("path"),ir=ne(He());var wo;(()=>{"use strict";var s={975:h=>{function u(d){if(typeof d!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(d))}function _(d,g){for(var b,O="",T=0,x=-1,k=0,H=0;H<=d.length;++H){if(H<d.length)b=d.charCodeAt(H);else{if(b===47)break;b=47}if(b===47){if(!(x===H-1||k===1))if(x!==H-1&&k===2){if(O.length<2||T!==2||O.charCodeAt(O.length-1)!==46||O.charCodeAt(O.length-2)!==46){if(O.length>2){var X=O.lastIndexOf("/");if(X!==O.length-1){X===-1?(O="",T=0):T=(O=O.slice(0,X)).length-1-O.lastIndexOf("/"),x=H,k=0;continue}}else if(O.length===2||O.length===1){O="",T=0,x=H,k=0;continue}}g&&(O.length>0?O+="/..":O="..",T=2)}else O.length>0?O+="/"+d.slice(x+1,H):O=d.slice(x+1,H),T=H-x-1;x=H,k=0}else b===46&&k!==-1?++k:k=-1}return O}var S={resolve:function(){for(var d,g="",b=!1,O=arguments.length-1;O>=-1&&!b;O--){var T;O>=0?T=arguments[O]:(d===void 0&&(d=process.cwd()),T=d),u(T),T.length!==0&&(g=T+"/"+g,b=T.charCodeAt(0)===47)}return g=_(g,!b),b?g.length>0?"/"+g:"/":g.length>0?g:"."},normalize:function(d){if(u(d),d.length===0)return".";var g=d.charCodeAt(0)===47,b=d.charCodeAt(d.length-1)===47;return(d=_(d,!g)).length!==0||g||(d="."),d.length>0&&b&&(d+="/"),g?"/"+d:d},isAbsolute:function(d){return u(d),d.length>0&&d.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var d,g=0;g<arguments.length;++g){var b=arguments[g];u(b),b.length>0&&(d===void 0?d=b:d+="/"+b)}return d===void 0?".":S.normalize(d)},relative:function(d,g){if(u(d),u(g),d===g||(d=S.resolve(d))===(g=S.resolve(g)))return"";for(var b=1;b<d.length&&d.charCodeAt(b)===47;++b);for(var O=d.length,T=O-b,x=1;x<g.length&&g.charCodeAt(x)===47;++x);for(var k=g.length-x,H=T<k?T:k,X=-1,B=0;B<=H;++B){if(B===H){if(k>H){if(g.charCodeAt(x+B)===47)return g.slice(x+B+1);if(B===0)return g.slice(x+B)}else T>H&&(d.charCodeAt(b+B)===47?X=B:B===0&&(X=0));break}var ie=d.charCodeAt(b+B);if(ie!==g.charCodeAt(x+B))break;ie===47&&(X=B)}var qe="";for(B=b+X+1;B<=O;++B)B!==O&&d.charCodeAt(B)!==47||(qe.length===0?qe+="..":qe+="/..");return qe.length>0?qe+g.slice(x+X):(x+=X,g.charCodeAt(x)===47&&++x,g.slice(x))},_makeLong:function(d){return d},dirname:function(d){if(u(d),d.length===0)return".";for(var g=d.charCodeAt(0),b=g===47,O=-1,T=!0,x=d.length-1;x>=1;--x)if((g=d.charCodeAt(x))===47){if(!T){O=x;break}}else T=!1;return O===-1?b?"/":".":b&&O===1?"//":d.slice(0,O)},basename:function(d,g){if(g!==void 0&&typeof g!="string")throw new TypeError('"ext" argument must be a string');u(d);var b,O=0,T=-1,x=!0;if(g!==void 0&&g.length>0&&g.length<=d.length){if(g.length===d.length&&g===d)return"";var k=g.length-1,H=-1;for(b=d.length-1;b>=0;--b){var X=d.charCodeAt(b);if(X===47){if(!x){O=b+1;break}}else H===-1&&(x=!1,H=b+1),k>=0&&(X===g.charCodeAt(k)?--k==-1&&(T=b):(k=-1,T=H))}return O===T?T=H:T===-1&&(T=d.length),d.slice(O,T)}for(b=d.length-1;b>=0;--b)if(d.charCodeAt(b)===47){if(!x){O=b+1;break}}else T===-1&&(x=!1,T=b+1);return T===-1?"":d.slice(O,T)},extname:function(d){u(d);for(var g=-1,b=0,O=-1,T=!0,x=0,k=d.length-1;k>=0;--k){var H=d.charCodeAt(k);if(H!==47)O===-1&&(T=!1,O=k+1),H===46?g===-1?g=k:x!==1&&(x=1):g!==-1&&(x=-1);else if(!T){b=k+1;break}}return g===-1||O===-1||x===0||x===1&&g===O-1&&g===b+1?"":d.slice(g,O)},format:function(d){if(d===null||typeof d!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof d);return function(g,b){var O=b.dir||b.root,T=b.base||(b.name||"")+(b.ext||"");return O?O===b.root?O+T:O+"/"+T:T}(0,d)},parse:function(d){u(d);var g={root:"",dir:"",base:"",ext:"",name:""};if(d.length===0)return g;var b,O=d.charCodeAt(0),T=O===47;T?(g.root="/",b=1):b=0;for(var x=-1,k=0,H=-1,X=!0,B=d.length-1,ie=0;B>=b;--B)if((O=d.charCodeAt(B))!==47)H===-1&&(X=!1,H=B+1),O===46?x===-1?x=B:ie!==1&&(ie=1):x!==-1&&(ie=-1);else if(!X){k=B+1;break}return x===-1||H===-1||ie===0||ie===1&&x===H-1&&x===k+1?H!==-1&&(g.base=g.name=k===0&&T?d.slice(1,H):d.slice(k,H)):(k===0&&T?(g.name=d.slice(1,x),g.base=d.slice(1,H)):(g.name=d.slice(k,x),g.base=d.slice(k,H)),g.ext=d.slice(x,H)),k>0?g.dir=d.slice(0,k-1):T&&(g.dir="/"),g},sep:"/",delimiter:":",win32:null,posix:null};S.posix=S,h.exports=S}},e={};function t(h){var u=e[h];if(u!==void 0)return u.exports;var _=e[h]={exports:{}};return s[h](_,_.exports,t),_.exports}t.d=(h,u)=>{for(var _ in u)t.o(u,_)&&!t.o(h,_)&&Object.defineProperty(h,_,{enumerable:!0,get:u[_]})},t.o=(h,u)=>Object.prototype.hasOwnProperty.call(h,u),t.r=h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var r={};let n;t.r(r),t.d(r,{URI:()=>R,Utils:()=>w}),typeof process=="object"?n=process.platform==="win32":typeof navigator=="object"&&(n=navigator.userAgent.indexOf("Windows")>=0);let i=/^\w[\w\d+.-]*$/,o=/^\//,a=/^\/\//;function f(h,u){if(!h.scheme&&u)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${h.authority}", path: "${h.path}", query: "${h.query}", fragment: "${h.fragment}"}`);if(h.scheme&&!i.test(h.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(h.path){if(h.authority){if(!o.test(h.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(h.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let l="",v="/",I=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class R{static isUri(u){return u instanceof R||!!u&&typeof u.authority=="string"&&typeof u.fragment=="string"&&typeof u.path=="string"&&typeof u.query=="string"&&typeof u.scheme=="string"&&typeof u.fsPath=="string"&&typeof u.with=="function"&&typeof u.toString=="function"}scheme;authority;path;query;fragment;constructor(u,_,S,d,g,b=!1){typeof u=="object"?(this.scheme=u.scheme||l,this.authority=u.authority||l,this.path=u.path||l,this.query=u.query||l,this.fragment=u.fragment||l):(this.scheme=function(O,T){return O||T?O:"file"}(u,b),this.authority=_||l,this.path=function(O,T){switch(O){case"https":case"http":case"file":T?T[0]!==v&&(T=v+T):T=v}return T}(this.scheme,S||l),this.query=d||l,this.fragment=g||l,f(this,b))}get fsPath(){return C(this,!1)}with(u){if(!u)return this;let{scheme:_,authority:S,path:d,query:g,fragment:b}=u;return _===void 0?_=this.scheme:_===null&&(_=l),S===void 0?S=this.authority:S===null&&(S=l),d===void 0?d=this.path:d===null&&(d=l),g===void 0?g=this.query:g===null&&(g=l),b===void 0?b=this.fragment:b===null&&(b=l),_===this.scheme&&S===this.authority&&d===this.path&&g===this.query&&b===this.fragment?this:new y(_,S,d,g,b)}static parse(u,_=!1){let S=I.exec(u);return S?new y(S[2]||l,c(S[4]||l),c(S[5]||l),c(S[7]||l),c(S[9]||l),_):new y(l,l,l,l,l)}static file(u){let _=l;if(n&&(u=u.replace(/\\/g,v)),u[0]===v&&u[1]===v){let S=u.indexOf(v,2);S===-1?(_=u.substring(2),u=v):(_=u.substring(2,S),u=u.substring(S)||v)}return new y("file",_,u,l,l)}static from(u){let _=new y(u.scheme,u.authority,u.path,u.query,u.fragment);return f(_,!0),_}toString(u=!1){return N(this,u)}toJSON(){return this}static revive(u){if(u){if(u instanceof R)return u;{let _=new y(u);return _._formatted=u.external,_._fsPath=u._sep===V?u.fsPath:null,_}}return u}}let V=n?1:void 0;class y extends R{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath}toString(u=!1){return u?N(this,!0):(this._formatted||(this._formatted=N(this,!1)),this._formatted)}toJSON(){let u={$mid:1};return this._fsPath&&(u.fsPath=this._fsPath,u._sep=V),this._formatted&&(u.external=this._formatted),this.path&&(u.path=this.path),this.scheme&&(u.scheme=this.scheme),this.authority&&(u.authority=this.authority),this.query&&(u.query=this.query),this.fragment&&(u.fragment=this.fragment),u}}let L={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function q(h,u,_){let S,d=-1;for(let g=0;g<h.length;g++){let b=h.charCodeAt(g);if(b>=97&&b<=122||b>=65&&b<=90||b>=48&&b<=57||b===45||b===46||b===95||b===126||u&&b===47||_&&b===91||_&&b===93||_&&b===58)d!==-1&&(S+=encodeURIComponent(h.substring(d,g)),d=-1),S!==void 0&&(S+=h.charAt(g));else{S===void 0&&(S=h.substr(0,g));let O=L[b];O!==void 0?(d!==-1&&(S+=encodeURIComponent(h.substring(d,g)),d=-1),S+=O):d===-1&&(d=g)}}return d!==-1&&(S+=encodeURIComponent(h.substring(d))),S!==void 0?S:h}function F(h){let u;for(let _=0;_<h.length;_++){let S=h.charCodeAt(_);S===35||S===63?(u===void 0&&(u=h.substr(0,_)),u+=L[S]):u!==void 0&&(u+=h[_])}return u!==void 0?u:h}function C(h,u){let _;return _=h.authority&&h.path.length>1&&h.scheme==="file"?`//${h.authority}${h.path}`:h.path.charCodeAt(0)===47&&(h.path.charCodeAt(1)>=65&&h.path.charCodeAt(1)<=90||h.path.charCodeAt(1)>=97&&h.path.charCodeAt(1)<=122)&&h.path.charCodeAt(2)===58?u?h.path.substr(1):h.path[1].toLowerCase()+h.path.substr(2):h.path,n&&(_=_.replace(/\//g,"\\")),_}function N(h,u){let _=u?F:q,S="",{scheme:d,authority:g,path:b,query:O,fragment:T}=h;if(d&&(S+=d,S+=":"),(g||d==="file")&&(S+=v,S+=v),g){let x=g.indexOf("@");if(x!==-1){let k=g.substr(0,x);g=g.substr(x+1),x=k.lastIndexOf(":"),x===-1?S+=_(k,!1,!1):(S+=_(k.substr(0,x),!1,!1),S+=":",S+=_(k.substr(x+1),!1,!0)),S+="@"}g=g.toLowerCase(),x=g.lastIndexOf(":"),x===-1?S+=_(g,!1,!0):(S+=_(g.substr(0,x),!1,!0),S+=g.substr(x))}if(b){if(b.length>=3&&b.charCodeAt(0)===47&&b.charCodeAt(2)===58){let x=b.charCodeAt(1);x>=65&&x<=90&&(b=`/${String.fromCharCode(x+32)}:${b.substr(3)}`)}else if(b.length>=2&&b.charCodeAt(1)===58){let x=b.charCodeAt(0);x>=65&&x<=90&&(b=`${String.fromCharCode(x+32)}:${b.substr(2)}`)}S+=_(b,!0,!1)}return O&&(S+="?",S+=_(O,!1,!1)),T&&(S+="#",S+=u?T:q(T,!1,!1)),S}function U(h){try{return decodeURIComponent(h)}catch{return h.length>3?h.substr(0,3)+U(h.substr(3)):h}}let D=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function c(h){return h.match(D)?h.replace(D,u=>U(u)):h}var p=t(975);let m=p.posix||p,E="/";var w;(function(h){h.joinPath=function(u,..._){return u.with({path:m.join(u.path,..._)})},h.resolvePath=function(u,..._){let S=u.path,d=!1;S[0]!==E&&(S=E+S,d=!0);let g=m.resolve(S,..._);return d&&g[0]===E&&!u.authority&&(g=g.substring(1)),u.with({path:g})},h.dirname=function(u){if(u.path.length===0||u.path===E)return u;let _=m.dirname(u.path);return _.length===1&&_.charCodeAt(0)===46&&(_=""),u.with({path:_})},h.basename=function(u){return m.basename(u.path)},h.extname=function(u){return m.extname(u.path)}})(w||(w={})),wo=r})();var{URI:Po,Utils:yp}=wo;var pe=class{static computeFrameName(e){let t=e[e.length-1],r=" invoke\\((.*)\\)",n="";switch(e[1]){case _t:case vt:t.startsWith(Be)?n=t.substring(Be.length):n=t;break;case yt:case Et:t.lastIndexOf(".")>=0?n=t+"."+t.substr(t.lastIndexOf(".")+1):t.lastIndexOf("/")>=0?n=t+"."+t.substring(t.lastIndexOf("/")+1):n=t+"."+t;break;case St:case xt:n=t;let i=e[e.length-2].match(r);i!=null&&i.length>=2&&(n+="."+i[1],i[1].endsWith(")")||(n+="()"));break;default:n=t}return n}static isExtraneousVFGetterOrSetterLogLine(e){return!(e.match(" get\\((.*)\\)")==null&&e.match(" set\\((.*)\\)")==null)}};var Pe=class{constructor(e){this._signature=e[e.length-1],this._frameName=pe.computeFrameName(e)}};var Ie=class extends Pe{constructor(e){super(e)}handle(e){let t=e.getUriFromSignature(this._signature),r=new Qe(e.getFrames().length,this._signature),n=e.getFrameHandler().create(r),i=this._signature.indexOf(".")>-1?this._signature.substring(0,this._signature.lastIndexOf(".")):this._signature;return e.getStaticVariablesClassMap().has(i)?r.statics=e.getStaticVariablesClassMap().get(i):e.getStaticVariablesClassMap().set(i,r.statics),e.getFrames().push(new ir.StackFrame(n,this._frameName,t?new ir.Source((0,Io.basename)(t),Po.parse(t).fsPath):void 0,void 0)),!1}};var De=class extends Pe{constructor(e){super(e)}handle(e){for(;e.hasFrames();){let t=e.getTopFrame();if(t&&(e.getFrames().pop(),t.name===this._frameName||t.name.startsWith(this._frameName)))break}return!1}};var or=ne(He()),Me=class{handle(e){let t=e.getLogFileName();return e.getFrames().push(new or.StackFrame(0,"",new or.Source(t,e.getLogFilePath()),e.getLogLinePosition()+1)),!0}};var he=class{handle(e){return!1}};var Ze=class{constructor(e){this.line=parseInt(e[e.length-1],10)}handle(e){let t=e.getTopFrame();return t&&(t.line=t.name===Ee?e.getExecAnonScriptLocationInDebugLog(this.line):this.line),!0}};var Do=require("os");var Mo=ne(He()),Ne=class{constructor(e){this.line=parseInt(e[2],10),this.message=e[e.length-1]}getMessage(){return this.message}handle(e){this.lookAheadAndAppend(e);let t=e.getTopFrame();return t&&e.getSession().warnToDebugConsole(this.message,t.source instanceof Mo.Source?t.source:void 0,t.name===Ee?e.getExecAnonScriptLocationInDebugLog(this.line):this.line),!1}lookAheadAndAppend(e){for(let t=e.getLogLinePosition()+1;t<e.getLogLines().length;t++){let r=e.getLogLines()[t];if(r.split("|").length>=3)break;this.message=`${this.message}${Do.EOL}${r}`,e.incrementLogLinePosition()}}};var et=class{constructor(e){this.fields=e}handle(e){let t=e.getTopFrame();if(t){let r=t.id,n=e.getFrameHandler().get(r),i=this.fields[3],o=this.fields[4],a=this.fields[6]==="true",f=e.getUtil().substringUpToLastPeriod(i);f&&!e.getStaticVariablesClassMap().has(f)&&e.getStaticVariablesClassMap().set(f,new Map);let l=e.getStaticVariablesClassMap().get(f);if(a){let v=e.getUtil().substringFromLastPeriod(i);l.set(v,new z(v,"null",o))}else n.locals.has(i)||n.locals.set(i,new z(i,"null",o))}return!1}};var tt=class{constructor(e){this.fields=e}handle(e){let t=e.getTopFrame();if(t){let r=t.id,n=e.getFrameHandler().get(r),i=this.fields[3],o=this.fields[3].split("."),a=i.indexOf(".")>-1?i.substring(0,i.lastIndexOf(".")):"",f=o.length>0?o[o.length-1]:i,l=this.fields[4].replace(/^"/,"'").replace(/"$/,"'"),v;this.fields.length===6&&(v=this.fields[5]);let I=e.getRefsMap(),R,V,y=!1;if(e.getStaticVariablesClassMap().has(a)?(V=e.getStaticVariablesClassMap().get(a),R=V.get(f)):a!=="this"&&n.locals.has(f)?(V=n.locals,R=V.get(f)):i.indexOf(".")!==-1&&(y=!0),v){I.has(v)||e.getRefsMap().set(v,new z("","","",v));let L=I.get(v);if(y)if(l==="{}")L.variables.set(f,new z(f,l,""));else if(l.indexOf("{")===0){let q=new z(f,"","");L.variables.set(f,q),q.variablesRef=e.getVariableHandler().create(q),this.parseJSONAndPopulate(l,q,e)}else if(I.has(l)){let q=I.get(l),F=this.copyReferenceContainer(q,f,e);L.variables.set(f,F)}else if(L.variables.has(f)){let q=L.variables.get(f);q.value=l}else L.variables.set(f,new z(f,l,""));else l.indexOf("{")===0?this.parseJSONAndPopulate(l,L,e):L.variables.set(f,new z(f,l,""));R&&this.isNotCollection(R)&&R.name!=="this"||R&&R.name==="this"&&!R.ref?(R.ref=v,R.value="",R.variables=L.variables,L.type=R.type,l==="{}"&&(R.value=l),R.variablesRef===0&&(R.value="",R.variablesRef=e.getVariableHandler().create(R))):R&&R.name!=="this"&&(R.value=l)}else R&&(R.value=l)}return!1}isNotCollection(e){return!e.type.startsWith("Map<")&&!e.type.startsWith("List<")&&!e.type.startsWith("Set<")}parseJSONAndPopulate(e,t,r){try{e=r.getUtil().surroundBlobsWithQuotes(e);let n=JSON.parse(e);Object.keys(n).forEach(i=>{let o=r.getRefsMap().get(String(n[i]));if(o){let a=this.copyReferenceContainer(o,i,r);t.variables.set(i,a)}else{let a=n[i];typeof a=="string"?(a="'"+a+"'",a=r.getUtil().removeQuotesFromBlob(a)):a=`${a}`,t.variables.set(i,new z(i,a,""))}})}catch{t.value=e,t.variablesRef=0,t.variables.clear()}}copyReferenceContainer(e,t,r){let n=new z(t,e.value,e.type,e.ref);return n.variables=e.variables,n.variablesRef=r.getVariableHandler().create(n),n}};var Fe=class{constructor(e){this.START_HANDLE=1e3;this._handleMap=new Map;this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){let t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}copy(){let e=Object.assign(Object.create(Object.getPrototypeOf(this)));return e.START_HANDLE=this.START_HANDLE,e._nextHandle=this._nextHandle,e._handleMap=new Map,this._handleMap.forEach((t,r)=>{t.copy!=="undefined"&&e._handleMap.set(r,t.copy())}),e}};var ar=class{constructor(e,t,r,n){this.toString=()=>`HeapDumpId: ${this.heapDumpId}, ClassName: ${this.className}, Namespace: ${this.namespace}, Line: ${this.line}`;this.heapDumpId=e,this.className=t,this.namespace=r,this.line=n}getHeapDumpId(){return this.heapDumpId}getClassName(){return this.className}getNamespace(){return this.namespace}getLine(){return this.line}getOverlaySuccessResult(){return this.overlaySuccessResut}setOverlaySuccessResult(e){this.overlaySuccessResut=e}};var cr=ne(require("fs")),ur=class{getFileSize(e){try{return cr.statSync(e).size}catch{return 0}}readLogFile(e){try{return cr.readFileSync(e,"utf-8").trim().split(/\r?\n/)}catch{return[]}}stripBrackets(e){return e.replace("[","").replace("]","")}substringUpToLastPeriod(e){return e.substring(0,e.lastIndexOf("."))}substringFromLastPeriod(e){let t=e.split(".");return t.length>1?t[t.length-1]:e}surroundBlobsWithQuotes(e){return e.replace(/(BLOB\(\d+ bytes\))/g,'"$1"')}removeQuotesFromBlob(e){return e.replace(/'(BLOB\(\d+ bytes\))'/g,"$1")}};var lr=class{constructor(e,t){this.util=new ur;this.logLines=[];this.frameHandles=new Fe;this.staticVariablesClassMap=new Map;this.refsMap=new Map;this.variableHandles=new Fe;this.stackFrameInfos=[];this.logLinePosition=-1;this.execAnonMapping=new Map;this.apexHeapDumps=[];this.lastSeenHeapDumpClass="";this.lastSeenHeapDumpLine=-1;this.backupStackFrameInfos=this.stackFrameInfos;this.backupFrameHandles=this.frameHandles;this.backupRefsMap=this.refsMap;this.backupStaticVariablesClassMap=this.staticVariablesClassMap;this.backupVariableHandles=this.variableHandles;this.launchArgs=e,this.session=t,this.logLines=this.util.readLogFile(e.logFile),this.logSize=this.util.getFileSize(e.logFile)}getUtil(){return this.util}getLaunchArgs(){return this.launchArgs}getSession(){return this.session}getLogLines(){return this.logLines}getLogSize(){return this.logSize}hasLogLines(){return this.logLines&&this.logLines.length>0&&this.logLinePosition<this.logLines.length}meetsLogLevelRequirements(){return this.logLines&&this.logLines.length>0&&this.logLines[0].match(/(\d{2}.*APEX_CODE,FINEST;.*VISUALFORCE,FINER;.*|\d{2}.*APEX_CODE,FINEST;.*VISUALFORCE,FINEST;.*)/)!==null}getHeapDumps(){return this.apexHeapDumps}hasHeapDump(){return this.apexHeapDumps.length>0}getHeapDumpForThisLocation(e,t){for(let r of this.apexHeapDumps)if(e.includes(r.getClassName())&&t===r.getLine())return r}hasHeapDumpForTopFrame(){let e=this.getTopFrame();if(e){let t=this.getHeapDumpForThisLocation(e.name,e.line);if(t&&e.name.includes(this.lastSeenHeapDumpClass)&&e.line===this.lastSeenHeapDumpLine)return t.getHeapDumpId()}}resetLastSeenHeapDumpLogLine(){this.lastSeenHeapDumpClass="",this.lastSeenHeapDumpLine=-1}isRunningApexTrigger(){return!!this.getTopFrame()?.source?.name?.toLowerCase().endsWith(".trigger")}copyStateForHeapDump(){this.backupStackFrameInfos=JSON.parse(JSON.stringify(this.stackFrameInfos)),this.backupFrameHandles=this.frameHandles.copy(),this.backupRefsMap=new Map,this.backupVariableHandles=new Fe,this.cloneStaticVariablesClassMap();for(let e of this.backupStackFrameInfos){let t=this.backupFrameHandles.get(e.id);this.copyVariableContainers(t.locals),this.copyVariableContainers(t.statics)}}copyVariableContainers(e){e.forEach((t,r)=>{let n=t;if(n.ref){this.backupRefsMap.set(n.ref,n);let i=this.backupVariableHandles.create(n);n.variablesRef=i,this.copyVariableContainers(n.variables)}})}cloneStaticVariablesClassMap(){this.backupStaticVariablesClassMap=new Map,this.staticVariablesClassMap.forEach((e,t)=>{let r=e,n=new Map;r.forEach((i,o)=>{let a=i;n.set(o,a.copy())}),this.backupStaticVariablesClassMap.set(t,n)})}revertStateAfterHeapDump(){this.staticVariablesClassMap=this.backupStaticVariablesClassMap,this.stackFrameInfos=this.backupStackFrameInfos,this.frameHandles=this.backupFrameHandles,this.refsMap=this.backupRefsMap,this.variableHandles=this.backupVariableHandles}scanLogForHeapDumpLines(){let e=RegExp(/\|HEAP_DUMP\|/);return this.logLines.forEach((t,r)=>{if(e.test(t)){let n=t.split("|");if(n.length>=7){let i=new ar(n[3],n[4],n[5],Number(n[6]));this.apexHeapDumps.push(i)}else this.session.printToDebugConsole(K.localize("malformed_log_line",r+1,t))}}),this.apexHeapDumps.length>0}async fetchOverlayResultsForApexHeapDumps(e){let t=!0;try{let r=await new Ve.OrgDisplay().getOrgInfo(e),n=new Ve.RequestService;n.instanceUrl=r.instanceUrl,n.accessToken=r.accessToken;for(let i of this.apexHeapDumps){this.session.printToDebugConsole(K.localize("fetching_heap_dump",i.toString()));let o=new Ke(i.getHeapDumpId()),a,f;if(await n.execute(o,Ve.RestHttpMethodEnum.Get).then(l=>{f=l},l=>{a=l}),f)i.setOverlaySuccessResult(JSON.parse(f));else if(a)try{t=!1;let l=JSON.parse(a),v=K.localize("heap_dump_error",l[0].message,l[0].errorCode,i.toString());this.session.errorToDebugConsole(v)}catch(l){let v=`${l}. ${a}. ${i.toString()}`;this.session.errorToDebugConsole(v)}}}catch(r){t=!1;let n=JSON.parse(r),i=`${K.localize("unable_to_retrieve_org_info")} : ${n.message}`;this.session.errorToDebugConsole(i)}return t}getLogFileName(){return No.basename(this.launchArgs.logFile)}getLogFilePath(){return this.launchArgs.logFile}getLogLinePosition(){return this.logLinePosition}incrementLogLinePosition(){this.logLinePosition+=1}getFrames(){return this.stackFrameInfos}getNumOfFrames(){return this.stackFrameInfos.length}getTopFrame(){if(this.stackFrameInfos.length>0)return this.stackFrameInfos[this.stackFrameInfos.length-1]}getRefsMap(){return this.refsMap}getStaticVariablesClassMap(){return this.staticVariablesClassMap}getFrameHandler(){return this.frameHandles}getVariableHandler(){return this.variableHandles}setState(e){this.state=e}hasState(){return this.state!==void 0}getExecAnonScriptLocationInDebugLog(e){return this.execAnonMapping.get(e)||0}getExecAnonScriptMapping(){return this.execAnonMapping}getUriFromSignature(e){if(e===Ee)return this.getLogFilePath();let t=e.endsWith(")")?e.substring(0,e.substring(0,e.indexOf("(")).lastIndexOf(".")):e,r=ve.getTyperefMapping(),n="";return r.forEach((i,o)=>{let a="";if(o.startsWith(Be)?a=o:a=o.replace("/",".").replace("$","."),a===t){n=i;return}}),n}hasFrames(){return this.stackFrameInfos&&this.stackFrameInfos.length>0}updateFrames(){for(this.hasHeapDump()&&this.revertStateAfterHeapDump(),this.state instanceof Me&&this.stackFrameInfos.pop();++this.logLinePosition<this.logLines.length;){let e=this.logLines[this.logLinePosition];if(e&&(this.setState(this.parseLogEvent(e)),this.session.shouldTraceLogFile()&&!(this.state instanceof Ne)&&this.session.printToDebugConsole(e),this.state&&this.state.handle(this)))break}}parseLogEvent(e){if(this.state===void 0)return new Me;e.startsWith(Ys)&&this.execAnonMapping.set(this.execAnonMapping.size+1,this.logLinePosition+1);let t=e.split("|");if(t.length>=3)switch(t[1]){case _t:case yt:case Ks:return new Ie(t);case St:return pe.isExtraneousVFGetterOrSetterLogLine(t[t.length-2])?new he:new Ie(t);case vt:case Et:case Qs:return new De(t);case tn:return new et(t);case rn:return new tt(t);case xt:return pe.isExtraneousVFGetterOrSetterLogLine(t[t.length-2])?new he:new De(t);case Zs:if(e.match(/.*\|.*\|\[\d{1,}\]/))return t[2]=this.util.stripBrackets(t[2]),new Ze(t);break;case en:if(e.match(/.*\|.*\|\[\d{1,}\]\|.*\|.*/))return t[2]=this.util.stripBrackets(t[2]),new Ne(t);break;case Ws:if(e.match(/.+\|HEAP_DUMP|\[\d+\]|.+\|.+\|\d+/)){let r=e.split("|");this.lastSeenHeapDumpClass=r[4],this.lastSeenHeapDumpLine=Number(r[6])}break;default:return new he}return new he}};var Fo="all",Sc="protocol",xc="logfile",Rc="launch",Vo="breakpoints";var st=class extends j.Variable{constructor(e,t,r,n=0,i){super(e,t,n),this.type=r,this.apexRef=i,this.evaluateName=t}},Qe=class s{constructor(e,t){this.frameNumber=e,this.signature=t,this.statics=new Map,this.locals=new Map,this.globals=new Map}copy(){let e=new s(this.frameNumber,this.signature);return this.statics.forEach((t,r)=>{e.statics.set(r,t.copy())}),this.locals.forEach((t,r)=>{e.locals.set(r,t.copy())}),e}};var nt=class{constructor(e=new Map){this.variables=e}getAllVariables(){let e=[];return this.variables.forEach(t=>{let r=t;e.push(new st(r.name,r.value,r.type,r.variablesRef))}),e}copy(){let e=Object.assign(Object.create(Object.getPrototypeOf(this)));return e.variables=new Map,this.variables.forEach((t,r)=>{e.variables.set(r,t.copy())}),e}},z=class extends nt{constructor(e,t,r,n,i=0){super(),this.name=e,this.value=t,this.type=r,this.ref=n,this.variablesRef=i}copy(){let e=super.copy();return e.name=this.name,e.value=this.value,e.type=this.type,e.ref=this.ref,e.variablesRef=this.variablesRef,e}},rt=class extends nt{constructor(e,t){super(t),this.type=e}getAllVariables(){let e=[];return this.variables.forEach(t=>{let r=t;e.push(new st(r.name,r.value,r.type,r.variablesRef))}),e}},pr=class s extends j.LoggingDebugSession{constructor(){super("apex-replay-debug-adapter.log");this.trace=[];this.traceAll=!1;this.breakpoints=new Map;this.setDebuggerLinesStartAt1(!0),this.setDebuggerPathFormat("uri")}static{this.THREAD_ID=1}initializeRequest(t,r){this.initializedResponse=t,this.initializedResponse.body={supportsConfigurationDoneRequest:!0,supportsCompletionsRequest:!1,supportsConditionalBreakpoints:!0,supportsDelayedStackTraceLoading:!1,supportsEvaluateForHovers:!1,supportsExceptionInfoRequest:!1,supportsExceptionOptions:!1,supportsFunctionBreakpoints:!1,supportsHitConditionalBreakpoints:!1,supportsLoadedSourcesRequest:!1,supportsRestartFrame:!1,supportsSetVariable:!1,supportsStepBack:!1,supportsStepInTargetsRequest:!1},this.initializedResponse.success=!0,this.sendResponse(this.initializedResponse)}async launchRequest(t,r){let n=!1;r?.lineBreakpointInfo&&(n=!0,ve.createMappingsFromLineBreakpointInfo(r.lineBreakpointInfo),delete r.lineBreakpointInfo),this.projectPath=r.projectPath,t.success=!1,this.setupLogger(r),this.log(Rc,`launchRequest: args=${JSON.stringify(r)}`),this.sendEvent(new j.Event(ye,{subject:`launchRequest: args=${JSON.stringify(r)}`,type:"launchApexReplayDebugger"})),this.logContext=new lr(r,this),this.heapDumpService=new Rt(this.logContext),this.logContext.hasLogLines()?this.logContext.meetsLogLevelRequirements()?n?(this.printToDebugConsole(K.localize("session_started_text",this.logContext.getLogFileName())),this.projectPath&&this.logContext.scanLogForHeapDumpLines()&&!await this.logContext.fetchOverlayResultsForApexHeapDumps(this.projectPath)&&(t.message=K.localize("heap_dump_error_wrap_up_text"),this.errorToDebugConsole(K.localize("heap_dump_error_wrap_up_text")),this.sendEvent(new j.Event(re,{subject:"Fetching heap dumps failed",callstack:new Error().stack,message:t.message}))),t.success=!0):(t.message=K.localize("session_language_server_error_text"),this.sendEvent(new j.Event(re,{subject:"No line breakpoint info available",callstack:new Error().stack,message:t.message}))):(t.message=K.localize("incorrect_log_levels_text"),this.sendEvent(new j.Event(re,{subject:"Incorrect log levels",callstack:new Error().stack,message:t.message}))):(t.message=K.localize("no_log_file_text"),this.sendEvent(new j.Event(re,{subject:"No log lines found",callstack:new Error().stack,message:t.message}))),this.sendResponse(t),this.sendEvent(new j.InitializedEvent),this.sendEvent(new j.Event(Xs,{logSize:this.logContext.getLogSize(),error:{subject:t.message}}))}setupLogger(t){typeof t.trace=="boolean"?(this.trace=t.trace?[Fo]:[],this.traceAll=t.trace):typeof t.trace=="string"&&(this.trace=t.trace.split(",").map(r=>r.trim()),this.traceAll=this.trace.indexOf(Fo)>=0),this.trace?.indexOf(Sc)>=0?j.logger.setup(j.Logger.LogLevel.Verbose,!1):j.logger.setup(j.Logger.LogLevel.Stop,!1)}configurationDoneRequest(t,r){this.logContext.getLaunchArgs().stopOnEntry?(this.logContext.updateFrames(),this.sendEvent(new j.StoppedEvent("entry",s.THREAD_ID))):this.continueRequest({},{threadId:s.THREAD_ID}),this.sendEvent(new j.Event(ye,{subject:"configurationDoneRequest",type:"apexReplayDebuggerConfigurationDone"}))}disconnectRequest(t,r){this.printToDebugConsole(K.localize("session_terminated_text")),t.success=!0,this.sendResponse(t),this.sendEvent(new j.Event(ye,{subject:"disconnectRequest",type:"apexReplayDebuggerDisconnect"}))}threadsRequest(t){t.body={threads:[new j.Thread(s.THREAD_ID,"")]},t.success=!0,this.sendResponse(t)}stackTraceRequest(t,r){t.body={stackFrames:this.logContext.getFrames().slice().reverse()},t.success=!0,this.sendResponse(t)}async scopesRequest(t,r){let n=this.logContext.hasHeapDumpForTopFrame();if(n)try{this.logContext.copyStateForHeapDump(),this.heapDumpService.replaceVariablesWithHeapDump()}catch(a){this.sendEvent(new j.Event(re,{subject:"Heap dump processing error",callstack:a.stack,message:a.message})),this.logContext.revertStateAfterHeapDump(),this.warnToDebugConsole(K.localize("reconcile_heapdump_error",a,n,n))}finally{this.logContext.resetLastSeenHeapDumpLogLine()}t.success=!0;let i=this.logContext.getFrameHandler().get(r.frameId);if(!i){t.body={scopes:[]},this.sendResponse(t);return}let o=new Array;o.push(new j.Scope("Local",this.logContext.getVariableHandler().create(new rt("local",i.locals)),!1)),o.push(new j.Scope("Static",this.logContext.getVariableHandler().create(new rt("static",i.statics)),!1)),o.push(new j.Scope("Global",this.logContext.getVariableHandler().create(new rt("global",i.globals)),!1)),t.body={scopes:o},this.sendResponse(t),this.sendEvent(new j.Event(ye,{subject:"scopesRequest",type:"apexReplayDebuggerScopesRequest",numberOfScopes:o.length}))}async variablesRequest(t,r){t.success=!0;try{let n=this.logContext.getVariableHandler().get(r.variablesReference);t.body={variables:n?n.getAllVariables():[]},this.sendResponse(t)}catch(n){this.sendEvent(new j.Event(re,{subject:"Error in variablesRequest",callstack:n.stack,message:n.message})),t.success=!1,this.sendResponse(t)}}evaluateRequest(t,r){t.body={result:r.expression,variablesReference:0},t.success=!0,this.sendResponse(t)}continueRequest(t,r){this.executeStep(t,3)}nextRequest(t,r){this.executeStep(t,0)}stepInRequest(t,r){this.executeStep(t,1)}stepOutRequest(t,r){this.executeStep(t,2)}executeStep(t,r){t.success=!0,this.sendResponse(t);try{let n=this.logContext.getNumOfFrames();for(;this.logContext.hasLogLines();){this.logContext.updateFrames();let i=this.logContext.getNumOfFrames();if(r===0&&i!==0&&i<=n||r===1&&i>=n||r===2&&i!==0&&i<n)return this.sendEvent(new j.StoppedEvent("step",s.THREAD_ID));if(this.shouldStopForBreakpoint())return}this.sendEvent(new j.TerminatedEvent)}catch(n){throw this.sendEvent(new j.Event(re,{subject:"Error during step execution",callstack:n.stack,message:n.message})),n}}shouldStopForBreakpoint(){let t=this.logContext.getTopFrame(),r=t?.source?.path??null,n=t?.line??null;if(r&&n){let i=this.convertClientPathToDebugger(r),o=this.convertClientLineToDebugger(n);if((this.breakpoints.get(i)??[]).includes(o))return this.sendEvent(new j.StoppedEvent("breakpoint",s.THREAD_ID)),!0}return!1}setBreakPointsRequest(t,r){if(t.body={breakpoints:[]},r.source.path&&r.breakpoints){let n=this.convertClientPathToDebugger(r.source.path);this.log(Vo,`setBreakPointsRequest: path=${r.source.path} uri=${n} lines=${ve.returnLinesForLoggingFromBreakpointArgs(r.breakpoints)}`),this.breakpoints.set(n,[]);for(let i of r.breakpoints){let o=ve.canSetLineBreakpoint(n,this.convertClientLineToDebugger(i.line));t.body.breakpoints.push({verified:o,source:r.source,line:i.line}),o?this.breakpoints.get(n).push(this.convertClientLineToDebugger(i.line)):this.sendEvent(new j.Event(re,{subject:"Failed to set breakpoint",callstack:new Error().stack,message:`Failed to set breakpoint at line ${i.line} in ${r.source.path}`}))}this.log(Vo,`setBreakPointsRequest: path=${r.source.path} verified lines=${this.breakpoints.get(n).join(",")}`),this.sendEvent(new j.Event(ye,{subject:"setBreakPointsRequest",type:"apexReplayDebuggerSetBreakpoints",numberOfVerifiedBreakpoints:t.body.breakpoints.filter(i=>i.verified).length}))}else this.sendEvent(new j.Event(re,{subject:"setBreakPointsRequest - path or breakpoints invalid",type:"apexReplayDebuggerSetBreakpoints"}));t.success=!0,this.sendResponse(t)}log(t,r){this.trace&&(this.traceAll||this.trace.indexOf(t)>=0)&&this.printToDebugConsole(`${process.pid}: ${r}`)}shouldTraceLogFile(){return this.traceAll||this.trace.indexOf(xc)!==-1}printToDebugConsole(t,r,n,i="stdout"){if(t?.length!==0){let o=new j.OutputEvent(`${t}${qo.EOL}`,i);o.body.source=r,o.body.line=n,o.body.column=0,this.sendEvent(o)}}warnToDebugConsole(t,r,n){this.printToDebugConsole(t,r,n,"console")}errorToDebugConsole(t,r,n){this.printToDebugConsole(t,r,n,"stderr")}};j.DebugSession.run(pr);0&&(module.exports={ApexDebugStackFrameInfo,ApexReplayDebug,ApexVariable,ApexVariableContainer,VariableContainer});
